<section class="hero-panel">
  <div class="hero-content">
    <div class="hero-text">
      <p class="eyebrow">CHÀO MỪNG TỚI</p>
      <h1>Hệ Thống Thư Viện Trực Tuyến</h1>
      <p class="subtitle">
        Khám phá – mượn – theo dõi sách yêu thích của bạn. Nhanh, gọn, mượt.
      </p>
      <form (ngSubmit)="searchBooks()" class="search-form">
        <input [(ngModel)]="searchTerm" name="searchTerm" type="search"
               placeholder="Tìm theo tên sách, tác giả…">
        <button class="btn-search" type="submit">Tìm Kiếm</button>
      </form>
      <div class="cta-buttons">
        <a class="btn btn-primary" routerLink="/borrow-book">Xem Toàn Bộ Sách</a>
        <a *ngIf="userAuthService.isAdmin()" class="btn btn-secondary" routerLink="/create-book">Thêm Sách Mới</a>
      </div>
    </div>
    <figure class="hero-image" aria-hidden="true">
      <img src="https://images.unsplash.com/photo-1532012197267-da84d127e765?q=80&w=1887" alt="Một người đang với tay lấy sách trên kệ" />
    </figure>
  </div>
</section>

<section class="categories-section">
  <div class="section-wrap">
    <h2 class="section-title">Thể Loại Phổ Biến</h2>
    <div class="category-chips">
      <a class="chip" *ngFor="let category of categories"
         [routerLink]="['/borrow-book']" [queryParams]="{ genre: category }">
        {{ category }}
      </a>
    </div>
  </div>
</section>

<section class="new-books-section">
  <div class="section-wrap">
    <div class="section-header">
      <h2 class="section-title">Sách Mới Thêm</h2>
      <a routerLink="/borrow-book" class="view-all-link">Xem tất cả →</a>
    </div>

    <ng-container *ngIf="newestBooks$ | async as books; else loading">
      <div class="books-grid" *ngIf="books.length > 0; else empty">
        <a class="book-card" *ngFor="let book of books" [routerLink]="['/books', book.id]">
          <div class="book-cover">
    <img [src]="book.coverUrl || 'https://placehold.co/200x300/1f2937/d1d5db?text=' + (book.name | slice:0:12)" 
         alt="Bìa sách {{ book.name }}">
</div>
          <div class="book-info">
            <h3 class="book-title">{{ book.name }}</h3>
            <p class="book-author">{{ book.author }}</p>
          </div>
        </a>
      </div>
    </ng-container>

    <ng-template #loading>
      <div class="books-grid">
        <div class="book-card-skeleton" *ngFor="let i of [1,2,3,4,5,6]"></div>
      </div>
    </ng-template>

    <ng-template #empty>
      <p class="text-muted">Hiện tại không có sách mới nào.</p>
    </ng-template>
  </div>
</section>