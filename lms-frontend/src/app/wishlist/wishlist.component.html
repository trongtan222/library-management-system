<div class="container mt-5">
  <div class="d-flex align-items-center mb-4">
    <h2 class="text-danger fw-bold"><i class="fa-solid fa-heart me-2"></i>Danh Sách Yêu Thích</h2>
    <span class="badge bg-secondary ms-3 fs-6" *ngIf="!isLoading">
      {{ wishlistItems.length }} cuốn sách
    </span>
  </div>

  <div *ngIf="isLoading" class="text-center py-5">
    <div class="spinner-border text-danger" role="status"></div>
    <p class="text-muted mt-2">Đang tải sách yêu thích...</p>
  </div>

  <div *ngIf="!isLoading && wishlistItems.length === 0" class="text-center py-5 bg-light rounded border">
    <i class="fa-regular fa-heart fa-4x text-muted mb-3"></i>
    <h4 class="text-muted">Danh sách yêu thích đang trống</h4>
    <p class="mb-4">Hãy thêm những cuốn sách bạn quan tâm vào đây để xem lại sau.</p>
    <a routerLink="/borrow-book" class="btn btn-primary">
      <i class="fa-solid fa-search me-2"></i>Tìm Sách Ngay
    </a>
  </div>

  <div class="row g-4" *ngIf="!isLoading && wishlistBooks.length > 0">
    <div class="col-md-3 col-sm-6" *ngFor="let book of wishlistBooks">
      <div class="card h-100 shadow-sm border-0 hover-card">
        
        <div class="position-relative">
          <a [routerLink]="['/books', book.id]">
            <img [src]="book.coverUrl || 'assets/images/placeholder.png'" 
                 class="card-img-top" 
                 alt="{{ book.name }}"
                 style="height: 300px; object-fit: cover;">
          </a>
          
          <button class="btn btn-danger btn-sm position-absolute top-0 end-0 m-2 rounded-circle shadow" 
                  (click)="remove(book.id)" 
                  title="Bỏ thích">
            <i class="fa-solid fa-times"></i>
          </button>
        </div>

        <div class="card-body d-flex flex-column">
          <h6 class="card-title text-truncate">
            <a [routerLink]="['/books', book.id]" class="text-decoration-none text-dark fw-bold">
              {{ book.name }}
            </a>
          </h6>
          
          <small class="mb-3" *ngIf="book.authors && book.authors.length">
            <i class="fa-solid fa-pen-nib me-1"></i> {{ book.authors[0].name }}
          </small>

          <div class="mt-auto">
            <a [routerLink]="['/books', book.id]" class="btn btn-outline-primary w-100 btn-sm">
              Xem Chi Tiết
            </a>
          </div>
        </div>
        
        <div class="card-footer bg-white text-muted small border-0">
          <i class="fa-regular fa-clock me-1"></i>
          <span>Đã thích</span>
        </div>
      </div>
    </div>
  </div>
</div>