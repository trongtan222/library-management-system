<div class="container py-4">
  <h2 class="mb-3">Yêu cầu gia hạn mượn sách</h2>
  <div class="mb-3">
    <select
      class="form-select w-auto d-inline"
      [(ngModel)]="filter"
      (change)="load()"
    >
      <option value="PENDING">Đang chờ</option>
      <option value="APPROVED">Đã duyệt</option>
      <option value="REJECTED">Từ chối</option>
      <option value="ALL">Tất cả</option>
    </select>
  </div>
  <div *ngIf="loading" class="text-muted">Đang tải...</div>
  <table
    *ngIf="!loading"
    class="table table-dark table-striped table-bordered align-middle"
  >
    <thead>
      <tr>
        <th>ID</th>
        <th>Loan</th>
        <th>Member</th>
        <th>Thêm ngày</th>
        <th>Trạng thái</th>
        <th>Thời gian tạo</th>
        <th>Thao tác</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let r of items">
        <td>{{ r.id }}</td>
        <td>#{{ r.loanId }}</td>
        <td>{{ r.memberId }}</td>
        <td>{{ r.extraDays }}</td>
        <td>
          <span
            [ngClass]="{
              'badge bg-secondary': r.status === 'PENDING',
              'badge bg-success': r.status === 'APPROVED',
              'badge bg-danger': r.status === 'REJECTED'
            }"
            >{{ r.status }}</span
          >
        </td>
        <td>{{ r.createdAt | date : "short" }}</td>
        <td>
          <button
            class="btn btn-sm btn-success me-2"
            (click)="approve(r.id)"
            [disabled]="r.status !== 'PENDING'"
          >
            Duyệt
          </button>
          <button
            class="btn btn-sm btn-outline-danger"
            (click)="reject(r.id)"
            [disabled]="r.status !== 'PENDING'"
          >
            Từ chối
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
