<h2>Qu·∫£n L√≠ S√°ch</h2>

<div
  class="d-flex align-items-center justify-content-between mb-3"
  style="gap: 12px"
>
  <div class="input-group" style="max-width: 420px">
    <span class="input-group-text">üîé</span>
    <input
      class="form-control"
      type="text"
      placeholder="T√¨m theo m√£, t√™n s√°ch, t√°c gi·∫£, th·ªÉ lo·∫°i, nƒÉm, ISBN..."
      [(ngModel)]="searchTerm"
      (ngModelChange)="loadBooks(1)"
    />
    <button
      class="btn btn-outline-secondary"
      *ngIf="searchTerm"
      (click)="searchTerm = ''; loadBooks(1)"
    >
      Clear
    </button>
  </div>

  <div class="d-flex align-items-center" style="gap: 8px">
    <small class="text-muted me-2">
      {{ totalElements }} results ‚Ä¢ Page {{ page }} / {{ totalPages }}
    </small>
    <button
      class="btn btn-sm btn-outline-secondary"
      (click)="setPage(1)"
      [disabled]="page === 1"
    >
      ¬´ ƒê·∫ßu
    </button>
    <button
      class="btn btn-sm btn-outline-secondary"
      (click)="prevPage()"
      [disabled]="page === 1"
    >
      ‚Äπ Tr∆∞·ªõc
    </button>
    <button
      class="btn btn-sm btn-outline-secondary"
      (click)="nextPage()"
      [disabled]="page === totalPages"
    >
      Ti·∫øp ‚Ä∫
    </button>
    <button
      class="btn btn-sm btn-outline-secondary"
      (click)="setPage(totalPages)"
      [disabled]="page === totalPages"
    >
      Cu·ªëi ¬ª
    </button>

    <select
      class="form-select form-select-sm ms-2"
      style="width: auto"
      [ngModel]="pageSize"
      (change)="changePageSize($event)"
    >
      <option *ngFor="let s of pageSizes" [ngValue]="s">{{ s }} / trang</option>
    </select>
  </div>
</div>

<div class="table-responsive">
  <table class="table table-hover align-middle">
    <thead>
      <tr>
        <th>ID</th>
        <th>T√™n</th>
        <th>T√°c Gi·∫£</th>
        <th>Th·ªÉ Lo·∫°i</th>
        <th>NƒÉm Xu·∫•t B·∫£n</th>
        <th>ISBN</th>
        <th>C√≤n H√†ng</th>
        <th>H√†nh ƒê·ªông</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngIf="books.length === 0">
        <td colspan="8" class="text-center text-muted py-4">
          Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£ n√†o.
        </td>
      </tr>
      <tr *ngFor="let r of books">
        <td>{{ r.id }}</td>
        <td>{{ r.name }}</td>
        <td>
          <span *ngFor="let a of r.authors; let last = last">
            {{ a.name }}{{ !last ? ", " : "" }}
          </span>
        </td>
        <td>
          <span *ngFor="let c of r.categories; let last = last">
            {{ c.name }}{{ !last ? ", " : "" }}
          </span>
        </td>
        <td>{{ r.publishedYear || "-" }}</td>
        <td>{{ r.isbn || "-" }}</td>
        <td [class.text-danger]="r.numberOfCopiesAvailable === 0">
          {{ r.numberOfCopiesAvailable }}
        </td>
        <td>
          <div class="btn-group">
            <button
              (click)="bookDetails(r.id)"
              class="btn btn-sm btn-outline-success"
            >
              Xem
            </button>
            <button
              (click)="updateBook(r.id)"
              class="btn btn-sm btn-outline-info"
            >
              Ch·ªânh S·ª≠a
            </button>
            <button
              (click)="deleteBook(r)"
              class="btn btn-sm btn-outline-danger"
            >
              X√≥a
            </button>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
