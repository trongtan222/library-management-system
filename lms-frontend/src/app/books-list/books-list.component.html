<h2>Quáº£n LÃ­ SÃ¡ch</h2>

<div class="d-flex align-items-center justify-content-between mb-3" style="gap: 12px;">
<div class="input-group" style="max-width: 420px;">
<span class="input-group-text">ğŸ”</span>
<input class="form-control"
type="text"
placeholder="Search by ID, name, author, genre, year, ISBN..."
[(ngModel)]="searchTerm"
(ngModelChange)="loadBooks(1)">
<button class="btn btn-outline-secondary" *ngIf="searchTerm" (click)="searchTerm=''; loadBooks(1)">Clear</button>
</div>

<div class="d-flex align-items-center" style="gap:8px;">
<small class="text-muted me-2">
{{ totalElements }} results â€¢ Page {{ page }} / {{ totalPages }}
</small>
<button class="btn btn-sm btn-outline-secondary" (click)="setPage(1)" [disabled]="page===1">Â« Äáº§u</button>
<button class="btn btn-sm btn-outline-secondary" (click)="prevPage()" [disabled]="page===1">â€¹ TrÆ°á»›c</button>
<button class="btn btn-sm btn-outline-secondary" (click)="nextPage()" [disabled]="page===totalPages">Tiáº¿p â€º</button>
<button class="btn btn-sm btn-outline-secondary" (click)="setPage(totalPages)" [disabled]="page===totalPages">Cuá»‘i Â»</button>

<select class="form-select form-select-sm ms-2" style="width:auto;"
        [ngModel]="pageSize" (change)="changePageSize($event)">
  <option *ngFor="let s of pageSizes" [ngValue]="s">{{ s }} / trang</option>
</select>

</div>
</div>

<div class="table-responsive">
<table class="table table-hover align-middle">
<thead>
<tr>
<th>ID</th>
<th>TÃªn</th>
<th>TÃ¡c Giáº£</th> <th>Thá»ƒ Loáº¡i</th> <th>NÄƒm Xuáº¥t Báº£n</th>
<th>ISBN</th>
<th>CÃ²n HÃ ng</th>
<th>HÃ nh Äá»™ng</th>
</tr>
</thead>
<tbody>
<tr *ngIf="books.length === 0">
<td colspan="8" class="text-center text-muted py-4">KhÃ´ng tÃ¬m tháº¥y káº¿t quáº£ nÃ o.</td>
</tr>
<tr *ngFor="let r of books">
<td>{{ r.id }}</td>
<td>{{ r.name }}</td>
<td>
  <span *ngFor="let a of r.authors; let last = last">
    {{ a.name }}{{ !last ? ', ' : '' }}
  </span>
</td>
<td>
  <span *ngFor="let c of r.categories; let last = last">
    {{ c.name }}{{ !last ? ', ' : '' }}
  </span>
</td>
<td>{{ r.publishedYear || '-' }}</td>
<td>{{ r.isbn || '-' }}</td>
<td [class.text-danger]="r.numberOfCopiesAvailable === 0">{{ r.numberOfCopiesAvailable }}</td>
<td>
<div class="btn-group">
<button (click)="bookDetails(r.id)" class="btn btn-sm btn-outline-success">Xem</button>
<button (click)="updateBook(r.id)" class="btn btn-sm btn-outline-info">Chá»‰nh Sá»­a</button>
<button (click)="deleteBook(r)" class="btn btn-sm btn-outline-danger">XÃ³a</button>
</div>
<div class="btn-group ms-2">
<button class="btn btn-sm btn-primary" [disabled]="r.numberOfCopiesAvailable === 0 || isLoading(r.id)" (click)="openBorrow(r)">
MÆ°á»£n
</button>
<button class="btn btn-sm btn-warning" [disabled]="isLoading(r.id)" (click)="openReserve(r)">
Äáº·t TrÆ°á»›c
</button>
</div>
</td>
</tr>
</tbody>
</table>
</div>