<h2 class="d-flex justify-content-between align-items-center">
  Quản Lí Người Dùng
  <a routerLink="/create-user" class="btn btn-primary">Tạo Người Dùng Mới</a>
</h2>
<table class="table table-success table-striped">
    <thead>
        <tr>
            <th>ID </th>
            <th>Tên</th>
            <th>Tên Đăng Nhập</th>
            <th>Vai Trò</th>
            <th>Hành Động</th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let user of users">
            <td>{{ user.userId }}</td>
            <td>{{ user.name }}</td>
            <td>{{ user.username }}</td>
            <td>{{ user.roles.join(', ') }}</td>
            <td>
              <a [routerLink]="['/user-details', user.userId]" class="btn btn-secondary btn-sm me-2">Xem Chi Tiết</a>
              <button (click)="updateUser(user.userId)" class="btn btn-info btn-sm">Chỉnh Sửa</button>
              <button (click)="openConfirmModal(user, 'reset')" class="btn btn-warning btn-sm mx-2">Đặt Lại Mật Khẩu</button>
              <button (click)="openConfirmModal(user, 'delete')" class="btn btn-danger btn-sm">Xóa</button>
            </td>
        </tr>
    </tbody>
</table>

<div class="modal fade show" [ngStyle]="{display: userToAction ? 'block' : 'none'}" *ngIf="userToAction">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content" style="background:#0f1426; color:#f1f3ff;">
      <div class="modal-header">
        <h5 class="modal-title">{{ actionType === 'delete' ? 'Confirm Deletion' : 'Confirm Password Reset' }}</h5>
        <button type="button" class="btn-close btn-close-white" (click)="cancelAction()"></button>
      </div>
      <div class="modal-body">
        <p *ngIf="actionType === 'delete'">
          Are you sure you want to delete user "<strong>{{ userToAction.username }}</strong>"? This action cannot be undone.
        </p>
        <p *ngIf="actionType === 'reset'">
          Are you sure you want to reset the password for user "<strong>{{ userToAction.username }}</strong>"?
        </p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="cancelAction()">Hủy</button>
        <button [ngClass]="actionType === 'delete' ? 'btn-danger' : 'btn-warning'" (click)="confirmAction()">
          {{ actionType === 'delete' ? 'Có, Xóa' : 'Có, Đặt Lại' }}
        </button>
      </div>
    </div>
  </div>
</div>
<div class="modal-backdrop fade show" *ngIf="userToAction"></div>