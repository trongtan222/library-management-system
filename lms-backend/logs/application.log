2025-11-15T17:26:12.554+07:00  INFO 3992 --- [main] c.i.lms.LibraryManagementApplication     : Starting LibraryManagementApplication using Java 21.0.8 with PID 3992 (C:\Users\Admin\library-management-system\lms-backend\target\classes started by Admin in C:\Users\Admin\library-management-system\lms-backend)
2025-11-15T17:26:12.557+07:00 DEBUG 3992 --- [main] c.i.lms.LibraryManagementApplication     : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-15T17:26:12.557+07:00  INFO 3992 --- [main] c.i.lms.LibraryManagementApplication     : No active profile set, falling back to 1 default profile: "default"
2025-11-15T17:26:13.867+07:00  INFO 3992 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-15T17:26:14.252+07:00  INFO 3992 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 363 ms. Found 9 JPA repository interfaces.
2025-11-15T17:26:15.088+07:00  INFO 3992 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-15T17:26:15.123+07:00  INFO 3992 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-15T17:26:15.124+07:00  INFO 3992 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-15T17:26:15.207+07:00  INFO 3992 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-15T17:26:15.207+07:00  INFO 3992 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2614 ms
2025-11-15T17:26:15.482+07:00  INFO 3992 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-15T17:26:15.592+07:00  INFO 3992 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-15T17:26:15.632+07:00  INFO 3992 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-15T17:26:15.959+07:00  INFO 3992 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-15T17:26:16.003+07:00  INFO 3992 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-15T17:26:16.210+07:00  INFO 3992 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7be3abaa
2025-11-15T17:26:16.215+07:00  INFO 3992 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-15T17:26:16.276+07:00  WARN 3992 --- [main] org.hibernate.dialect.Dialect            : HHH000511: The 5.5.5 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-11-15T17:26:16.283+07:00  WARN 3992 --- [main] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-15T17:26:16.312+07:00  INFO 3992 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 5.5.5
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-15T17:26:17.732+07:00  INFO 3992 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-15T17:26:18.280+07:00 DEBUG 3992 --- [main] org.hibernate.SQL                        : alter table loans modify column status enum ('ACTIVE','OVERDUE','RETURNED') not null
2025-11-15T17:26:18.281+07:00 DEBUG 3992 --- [main] org.hibernate.SQL                        : alter table reservations modify column status enum ('ACTIVE','CANCELLED','EXPIRED','FULFILLED') not null
2025-11-15T17:26:18.346+07:00  INFO 3992 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-15T17:26:18.811+07:00  INFO 3992 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-15T17:26:19.680+07:00 DEBUG 3992 --- [main] c.i.lms.configuration.JwtRequestFilter   : Filter 'jwtRequestFilter' configured for use
2025-11-15T17:26:21.463+07:00  INFO 3992 --- [main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-11-15T17:26:21.463+07:00  WARN 3992 --- [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-11-15T17:26:22.565+07:00 DEBUG 3992 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 42 mappings in 'requestMappingHandlerMapping'
2025-11-15T17:26:22.618+07:00 DEBUG 3992 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-15T17:26:22.811+07:00 DEBUG 3992 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtRequestFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-15T17:26:22.940+07:00 DEBUG 3992 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-15T17:26:23.023+07:00 DEBUG 3992 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-15T17:26:23.546+07:00  INFO 3992 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-15T17:26:23.578+07:00  INFO 3992 --- [main] c.i.lms.LibraryManagementApplication     : Started LibraryManagementApplication in 11.678 seconds (process running for 12.154)
2025-11-15T17:26:23.721+07:00 DEBUG 3992 --- [main] org.hibernate.SQL                        : select r1_0.role_id,r1_0.role_name from role r1_0 where r1_0.role_name=?
2025-11-15T17:26:23.777+07:00 DEBUG 3992 --- [main] org.hibernate.SQL                        : select r1_0.role_id,r1_0.role_name from role r1_0 where r1_0.role_name=?
2025-11-15T17:26:23.782+07:00 DEBUG 3992 --- [main] org.hibernate.SQL                        : select u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,u1_0.username from users u1_0 where u1_0.username=?
2025-11-15T17:26:23.957+07:00 DEBUG 3992 --- [main] org.hibernate.SQL                        : insert into users (email,name,password,username) values (?,?,?,?)
2025-11-15T17:26:24.003+07:00 DEBUG 3992 --- [main] org.hibernate.SQL                        : insert into user_role (user_id,role_id) values (?,?)
2025-11-15T17:26:24.023+07:00 DEBUG 3992 --- [main] org.hibernate.SQL                        : select u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,u1_0.username from users u1_0 where u1_0.username=?
2025-11-15T17:26:24.131+07:00 DEBUG 3992 --- [main] org.hibernate.SQL                        : insert into users (email,name,password,username) values (?,?,?,?)
2025-11-15T17:26:24.131+07:00 DEBUG 3992 --- [main] org.hibernate.SQL                        : insert into user_role (user_id,role_id) values (?,?)
2025-11-15T17:26:46.741+07:00  INFO 12712 --- [main] c.i.lms.LibraryManagementApplication     : Starting LibraryManagementApplication using Java 21.0.8 with PID 12712 (C:\Users\Admin\library-management-system\lms-backend\target\classes started by Admin in C:\Users\Admin\library-management-system\lms-backend)
2025-11-15T17:26:46.741+07:00 DEBUG 12712 --- [main] c.i.lms.LibraryManagementApplication     : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-15T17:26:46.743+07:00  INFO 12712 --- [main] c.i.lms.LibraryManagementApplication     : No active profile set, falling back to 1 default profile: "default"
2025-11-15T17:26:47.375+07:00  INFO 12712 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-15T17:26:47.510+07:00  INFO 12712 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 118 ms. Found 9 JPA repository interfaces.
2025-11-15T17:26:47.975+07:00  INFO 12712 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-15T17:26:47.986+07:00  INFO 12712 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-15T17:26:47.991+07:00  INFO 12712 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-15T17:26:48.033+07:00  INFO 12712 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-15T17:26:48.038+07:00  INFO 12712 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1264 ms
2025-11-15T17:26:48.134+07:00  INFO 12712 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-15T17:26:48.166+07:00  INFO 12712 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-15T17:26:48.213+07:00  INFO 12712 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-15T17:26:48.451+07:00  INFO 12712 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-15T17:26:48.511+07:00  INFO 12712 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-15T17:26:49.268+07:00  INFO 12712 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@18e8eb59
2025-11-15T17:26:49.268+07:00  INFO 12712 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-15T17:26:49.348+07:00  WARN 12712 --- [main] org.hibernate.dialect.Dialect            : HHH000511: The 5.5.5 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-11-15T17:26:49.348+07:00  WARN 12712 --- [main] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-15T17:26:49.435+07:00  INFO 12712 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 5.5.5
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-15T17:26:52.961+07:00  INFO 12712 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-15T17:26:53.405+07:00 DEBUG 12712 --- [main] org.hibernate.SQL                        : alter table loans modify column status enum ('ACTIVE','OVERDUE','RETURNED') not null
2025-11-15T17:26:53.437+07:00 DEBUG 12712 --- [main] org.hibernate.SQL                        : alter table reservations modify column status enum ('ACTIVE','CANCELLED','EXPIRED','FULFILLED') not null
2025-11-15T17:26:53.537+07:00  INFO 12712 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-15T17:26:54.442+07:00  INFO 12712 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-15T17:26:56.135+07:00 DEBUG 12712 --- [main] c.i.lms.configuration.JwtRequestFilter   : Filter 'jwtRequestFilter' configured for use
2025-11-15T17:26:57.740+07:00  INFO 12712 --- [main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-11-15T17:26:57.740+07:00  WARN 12712 --- [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-11-15T17:26:58.785+07:00 DEBUG 12712 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 42 mappings in 'requestMappingHandlerMapping'
2025-11-15T17:26:58.845+07:00 DEBUG 12712 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-15T17:26:59.037+07:00 DEBUG 12712 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtRequestFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-15T17:26:59.236+07:00 DEBUG 12712 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-15T17:26:59.353+07:00 DEBUG 12712 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-15T17:27:01.797+07:00  WARN 12712 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
2025-11-15T17:27:01.803+07:00  INFO 12712 --- [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-15T17:27:01.817+07:00  INFO 12712 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-15T17:27:01.843+07:00  INFO 12712 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-15T17:27:01.877+07:00  INFO 12712 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-15T17:27:01.939+07:00 ERROR 12712 --- [main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8080 was already in use.

Action:

Identify and stop the process that's listening on port 8080 or configure this application to listen on another port.

2025-11-15T17:32:12.422+07:00  INFO 16088 --- [main] c.i.lms.LibraryManagementApplication     : Starting LibraryManagementApplication using Java 21.0.8 with PID 16088 (C:\Users\Admin\library-management-system\lms-backend\target\classes started by Admin in C:\Users\Admin\library-management-system\lms-backend)
2025-11-15T17:32:12.422+07:00 DEBUG 16088 --- [main] c.i.lms.LibraryManagementApplication     : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-15T17:32:12.422+07:00  INFO 16088 --- [main] c.i.lms.LibraryManagementApplication     : No active profile set, falling back to 1 default profile: "default"
2025-11-15T17:32:13.798+07:00  INFO 16088 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-15T17:32:14.160+07:00  INFO 16088 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 330 ms. Found 9 JPA repository interfaces.
2025-11-15T17:32:15.032+07:00  INFO 16088 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-15T17:32:15.049+07:00  INFO 16088 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-15T17:32:15.061+07:00  INFO 16088 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-15T17:32:15.156+07:00  INFO 16088 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-15T17:32:15.156+07:00  INFO 16088 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2689 ms
2025-11-15T17:32:15.439+07:00  INFO 16088 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-15T17:32:15.603+07:00  INFO 16088 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-15T17:32:15.698+07:00  INFO 16088 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-15T17:32:16.076+07:00  INFO 16088 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-15T17:32:16.130+07:00  INFO 16088 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-15T17:32:16.394+07:00  INFO 16088 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@55c46ec1
2025-11-15T17:32:16.403+07:00  INFO 16088 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-15T17:32:16.462+07:00  WARN 16088 --- [main] org.hibernate.dialect.Dialect            : HHH000511: The 5.5.5 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-11-15T17:32:16.478+07:00  WARN 16088 --- [main] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-15T17:32:16.508+07:00  INFO 16088 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 5.5.5
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-15T17:32:18.327+07:00  INFO 16088 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-15T17:32:18.615+07:00 DEBUG 16088 --- [main] org.hibernate.SQL                        : alter table loans modify column status enum ('ACTIVE','OVERDUE','RETURNED') not null
2025-11-15T17:32:18.629+07:00 DEBUG 16088 --- [main] org.hibernate.SQL                        : alter table reservations modify column status enum ('ACTIVE','CANCELLED','EXPIRED','FULFILLED') not null
2025-11-15T17:32:18.725+07:00  INFO 16088 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-15T17:32:19.194+07:00  INFO 16088 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-15T17:32:20.129+07:00 DEBUG 16088 --- [main] c.i.lms.configuration.JwtRequestFilter   : Filter 'jwtRequestFilter' configured for use
2025-11-15T17:32:21.764+07:00  INFO 16088 --- [main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-11-15T17:32:21.764+07:00  WARN 16088 --- [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-11-15T17:32:22.880+07:00 DEBUG 16088 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 43 mappings in 'requestMappingHandlerMapping'
2025-11-15T17:32:22.969+07:00 DEBUG 16088 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-15T17:32:23.169+07:00 DEBUG 16088 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtRequestFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-15T17:32:23.450+07:00 DEBUG 16088 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-15T17:32:23.581+07:00 DEBUG 16088 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-15T17:32:23.803+07:00  INFO 16088 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-15T17:32:23.815+07:00  INFO 16088 --- [main] c.i.lms.LibraryManagementApplication     : Started LibraryManagementApplication in 12.108 seconds (process running for 12.695)
2025-11-15T17:32:23.994+07:00 DEBUG 16088 --- [main] org.hibernate.SQL                        : select r1_0.role_id,r1_0.role_name from role r1_0 where r1_0.role_name=?
2025-11-15T17:32:24.029+07:00 DEBUG 16088 --- [main] org.hibernate.SQL                        : select r1_0.role_id,r1_0.role_name from role r1_0 where r1_0.role_name=?
2025-11-15T17:32:24.045+07:00 DEBUG 16088 --- [main] org.hibernate.SQL                        : select u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,u1_0.username from users u1_0 where u1_0.username=?
2025-11-15T17:32:24.264+07:00 DEBUG 16088 --- [main] org.hibernate.SQL                        : insert into users (email,name,password,username) values (?,?,?,?)
2025-11-15T17:32:24.312+07:00 DEBUG 16088 --- [main] org.hibernate.SQL                        : insert into user_role (user_id,role_id) values (?,?)
2025-11-15T17:32:24.327+07:00 DEBUG 16088 --- [main] org.hibernate.SQL                        : select u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,u1_0.username from users u1_0 where u1_0.username=?
2025-11-15T17:32:24.447+07:00 DEBUG 16088 --- [main] org.hibernate.SQL                        : insert into users (email,name,password,username) values (?,?,?,?)
2025-11-15T17:32:24.447+07:00 DEBUG 16088 --- [main] org.hibernate.SQL                        : insert into user_role (user_id,role_id) values (?,?)
2025-11-15T17:32:38.236+07:00  INFO 16088 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-15T17:32:38.236+07:00  INFO 16088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-15T17:32:38.236+07:00 DEBUG 16088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-11-15T17:32:38.236+07:00 DEBUG 16088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-11-15T17:32:38.236+07:00 DEBUG 16088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-11-15T17:32:38.236+07:00 DEBUG 16088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@74964a63
2025-11-15T17:32:38.236+07:00 DEBUG 16088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@4d71f24b
2025-11-15T17:32:38.236+07:00 DEBUG 16088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-15T17:32:38.236+07:00  INFO 16088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-11-15T17:32:38.282+07:00 DEBUG 16088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/authenticate
2025-11-15T17:32:38.298+07:00 DEBUG 16088 --- [http-nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-15T17:32:38.298+07:00 DEBUG 16088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/authenticate
2025-11-15T17:32:38.314+07:00 DEBUG 16088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : POST "/api/auth/authenticate", parameters={}
2025-11-15T17:32:38.314+07:00 DEBUG 16088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.AuthController#authenticate(LoginRequest)
2025-11-15T17:32:38.462+07:00 DEBUG 16088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest[username=user, password=user123]]
2025-11-15T17:32:38.637+07:00 DEBUG 16088 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:32:38.797+07:00 DEBUG 16088 --- [http-nio-8080-exec-1] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-11-15T17:32:38.797+07:00 DEBUG 16088 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:32:39.275+07:00 DEBUG 16088 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json]
2025-11-15T17:32:39.292+07:00 DEBUG 16088 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse[token=eyJhbGciOiJIUzI1NiJ9.eyJ1c2VySWQiOjMzLCJyb2xlcyI6WyJST0xFX1VTRVIiXSwic3ViIjoidXN (truncated)...]
2025-11-15T17:32:39.318+07:00 DEBUG 16088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-15T17:32:39.318+07:00 DEBUG 16088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/debug/whoami
2025-11-15T17:32:39.414+07:00 DEBUG 16088 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:32:39.430+07:00 DEBUG 16088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/debug/whoami
2025-11-15T17:32:39.430+07:00 DEBUG 16088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/debug/whoami", parameters={}
2025-11-15T17:32:39.430+07:00 DEBUG 16088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.DebugController#whoami(String)
2025-11-15T17:32:39.446+07:00 DEBUG 16088 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-15T17:32:39.446+07:00 DEBUG 16088 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{tokenPayload={"userId":33,"roles":["ROLE_USER"],"sub":"user","iat":1763202758,"exp":1763289158}, to (truncated)...]
2025-11-15T17:32:39.446+07:00 DEBUG 16088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-15T17:36:58.628+07:00  INFO 14988 --- [main] c.i.lms.LibraryManagementApplication     : Starting LibraryManagementApplication using Java 21.0.8 with PID 14988 (C:\Users\Admin\library-management-system\lms-backend\target\classes started by Admin in C:\Users\Admin\library-management-system\lms-backend)
2025-11-15T17:36:58.629+07:00 DEBUG 14988 --- [main] c.i.lms.LibraryManagementApplication     : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-15T17:36:58.630+07:00  INFO 14988 --- [main] c.i.lms.LibraryManagementApplication     : No active profile set, falling back to 1 default profile: "default"
2025-11-15T17:36:59.822+07:00  INFO 14988 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-15T17:37:00.121+07:00  INFO 14988 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 273 ms. Found 9 JPA repository interfaces.
2025-11-15T17:37:01.167+07:00  INFO 14988 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-15T17:37:01.198+07:00  INFO 14988 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-15T17:37:01.201+07:00  INFO 14988 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-15T17:37:01.326+07:00  INFO 14988 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-15T17:37:01.326+07:00  INFO 14988 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2646 ms
2025-11-15T17:37:02.678+07:00  INFO 14988 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-15T17:37:02.903+07:00  INFO 14988 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-15T17:37:03.063+07:00  INFO 14988 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-15T17:37:04.217+07:00  INFO 14988 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-15T17:37:04.309+07:00  INFO 14988 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-15T17:37:04.952+07:00  INFO 14988 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@299eca90
2025-11-15T17:37:04.952+07:00  INFO 14988 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-15T17:37:05.068+07:00  WARN 14988 --- [main] org.hibernate.dialect.Dialect            : HHH000511: The 5.5.5 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-11-15T17:37:05.075+07:00  WARN 14988 --- [main] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-15T17:37:05.209+07:00  INFO 14988 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 5.5.5
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-15T17:37:09.145+07:00  INFO 14988 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-15T17:37:09.496+07:00 DEBUG 14988 --- [main] org.hibernate.SQL                        : alter table loans modify column status enum ('ACTIVE','OVERDUE','RETURNED') not null
2025-11-15T17:37:09.498+07:00 DEBUG 14988 --- [main] org.hibernate.SQL                        : alter table reservations modify column status enum ('ACTIVE','CANCELLED','EXPIRED','FULFILLED') not null
2025-11-15T17:37:09.662+07:00  INFO 14988 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-15T17:37:10.789+07:00  INFO 14988 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-15T17:37:11.767+07:00 DEBUG 14988 --- [main] c.i.lms.configuration.JwtRequestFilter   : Filter 'jwtRequestFilter' configured for use
2025-11-15T17:37:13.205+07:00  INFO 14988 --- [main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-11-15T17:37:13.205+07:00  WARN 14988 --- [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-11-15T17:37:14.319+07:00 DEBUG 14988 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 43 mappings in 'requestMappingHandlerMapping'
2025-11-15T17:37:14.402+07:00 DEBUG 14988 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-15T17:37:14.581+07:00 DEBUG 14988 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtRequestFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-15T17:37:14.716+07:00 DEBUG 14988 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-15T17:37:14.799+07:00 DEBUG 14988 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-15T17:37:17.066+07:00  WARN 14988 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
2025-11-15T17:37:17.066+07:00  INFO 14988 --- [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-15T17:37:17.077+07:00  INFO 14988 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-15T17:37:17.081+07:00  INFO 14988 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-15T17:37:17.110+07:00  INFO 14988 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-15T17:37:17.142+07:00 ERROR 14988 --- [main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8080 was already in use.

Action:

Identify and stop the process that's listening on port 8080 or configure this application to listen on another port.

2025-11-15T17:37:36.672+07:00 DEBUG 16088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/books/1/reviews
2025-11-15T17:37:36.672+07:00 DEBUG 16088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/public/books/1
2025-11-15T17:37:36.709+07:00 DEBUG 16088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/books/1/reviews
2025-11-15T17:37:36.709+07:00 DEBUG 16088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/public/books/1
2025-11-15T17:37:36.709+07:00 DEBUG 16088 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:37:36.709+07:00 DEBUG 16088 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:37:36.725+07:00 ERROR 16088 --- [http-nio-8080-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception

org.springframework.security.core.userdetails.UsernameNotFoundException: User not found: admin
	at com.ibizabroker.lms.service.AuthUserDetailsService.lambda$loadUserByUsername$0(AuthUserDetailsService.java:28) ~[classes/:na]
	at java.base/java.util.Optional.orElseThrow(Optional.java:403) ~[na:na]
	at com.ibizabroker.lms.service.AuthUserDetailsService.loadUserByUsername(AuthUserDetailsService.java:28) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.12.jar:6.2.12]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at com.ibizabroker.lms.service.AuthUserDetailsService$$SpringCGLIB$$0.loadUserByUsername(<generated>) ~[classes/:na]
	at com.ibizabroker.lms.configuration.JwtRequestFilter.doFilterInternal(JwtRequestFilter.java:50) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319) ~[spring-security-config-6.5.6.jar:6.5.6]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240) ~[spring-security-config-6.5.6.jar:6.5.6]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-11-15T17:37:36.725+07:00 ERROR 16088 --- [http-nio-8080-exec-5] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception

org.springframework.security.core.userdetails.UsernameNotFoundException: User not found: admin
	at com.ibizabroker.lms.service.AuthUserDetailsService.lambda$loadUserByUsername$0(AuthUserDetailsService.java:28) ~[classes/:na]
	at java.base/java.util.Optional.orElseThrow(Optional.java:403) ~[na:na]
	at com.ibizabroker.lms.service.AuthUserDetailsService.loadUserByUsername(AuthUserDetailsService.java:28) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.12.jar:6.2.12]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at com.ibizabroker.lms.service.AuthUserDetailsService$$SpringCGLIB$$0.loadUserByUsername(<generated>) ~[classes/:na]
	at com.ibizabroker.lms.configuration.JwtRequestFilter.doFilterInternal(JwtRequestFilter.java:50) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319) ~[spring-security-config-6.5.6.jar:6.5.6]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240) ~[spring-security-config-6.5.6.jar:6.5.6]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-11-15T17:37:36.759+07:00 DEBUG 16088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /error
2025-11-15T17:37:36.759+07:00 DEBUG 16088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /error
2025-11-15T17:37:36.759+07:00 DEBUG 16088 --- [http-nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-15T17:37:36.759+07:00 DEBUG 16088 --- [http-nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-15T17:37:36.759+07:00 DEBUG 16088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /error
2025-11-15T17:37:36.759+07:00 DEBUG 16088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /error
2025-11-15T17:37:36.759+07:00 DEBUG 16088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/error", parameters={}
2025-11-15T17:37:36.759+07:00 DEBUG 16088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/error", parameters={}
2025-11-15T17:37:36.759+07:00 DEBUG 16088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-11-15T17:37:36.759+07:00 DEBUG 16088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-11-15T17:37:36.759+07:00 DEBUG 16088 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T17:37:36.759+07:00 DEBUG 16088 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T17:37:36.759+07:00 DEBUG 16088 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Sat Nov 15 17:37:36 ICT 2025, status=500, error=Internal Server Error, path=/api/books/1/ (truncated)...]
2025-11-15T17:37:36.759+07:00 DEBUG 16088 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Sat Nov 15 17:37:36 ICT 2025, status=500, error=Internal Server Error, path=/api/public/b (truncated)...]
2025-11-15T17:37:36.776+07:00 DEBUG 16088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 500
2025-11-15T17:37:36.776+07:00 DEBUG 16088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 500
2025-11-15T17:37:48.880+07:00  INFO 19632 --- [main] c.i.lms.LibraryManagementApplication     : Starting LibraryManagementApplication using Java 21.0.8 with PID 19632 (C:\Users\Admin\library-management-system\lms-backend\target\classes started by Admin in C:\Users\Admin\library-management-system\lms-backend)
2025-11-15T17:37:48.880+07:00 DEBUG 19632 --- [main] c.i.lms.LibraryManagementApplication     : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-15T17:37:48.880+07:00  INFO 19632 --- [main] c.i.lms.LibraryManagementApplication     : No active profile set, falling back to 1 default profile: "default"
2025-11-15T17:37:49.837+07:00  INFO 19632 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-15T17:37:50.069+07:00  INFO 19632 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 226 ms. Found 9 JPA repository interfaces.
2025-11-15T17:37:51.019+07:00  INFO 19632 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-15T17:37:51.071+07:00  INFO 19632 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-15T17:37:51.073+07:00  INFO 19632 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-15T17:37:51.215+07:00  INFO 19632 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-15T17:37:51.231+07:00  INFO 19632 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2293 ms
2025-11-15T17:37:51.405+07:00  INFO 19632 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-15T17:37:51.472+07:00  INFO 19632 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-15T17:37:51.548+07:00  INFO 19632 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-15T17:37:51.872+07:00  INFO 19632 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-15T17:37:51.917+07:00  INFO 19632 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-15T17:37:52.145+07:00  INFO 19632 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7402c49f
2025-11-15T17:37:52.145+07:00  INFO 19632 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-15T17:37:52.202+07:00  WARN 19632 --- [main] org.hibernate.dialect.Dialect            : HHH000511: The 5.5.5 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-11-15T17:37:52.223+07:00  WARN 19632 --- [main] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-15T17:37:52.252+07:00  INFO 19632 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 5.5.5
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-15T17:37:53.951+07:00  INFO 19632 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-15T17:37:54.209+07:00 DEBUG 19632 --- [main] org.hibernate.SQL                        : alter table loans modify column status enum ('ACTIVE','OVERDUE','RETURNED') not null
2025-11-15T17:37:54.220+07:00 DEBUG 19632 --- [main] org.hibernate.SQL                        : alter table reservations modify column status enum ('ACTIVE','CANCELLED','EXPIRED','FULFILLED') not null
2025-11-15T17:37:54.309+07:00  INFO 19632 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-15T17:37:54.621+07:00  INFO 19632 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-15T17:37:55.472+07:00 DEBUG 19632 --- [main] c.i.lms.configuration.JwtRequestFilter   : Filter 'jwtRequestFilter' configured for use
2025-11-15T17:37:56.918+07:00  INFO 19632 --- [main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-11-15T17:37:56.918+07:00  WARN 19632 --- [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-11-15T17:37:57.882+07:00 DEBUG 19632 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 43 mappings in 'requestMappingHandlerMapping'
2025-11-15T17:37:57.939+07:00 DEBUG 19632 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-15T17:37:58.057+07:00 DEBUG 19632 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtRequestFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-15T17:37:58.242+07:00 DEBUG 19632 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-15T17:37:58.336+07:00 DEBUG 19632 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-15T17:38:00.629+07:00  WARN 19632 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
2025-11-15T17:38:00.634+07:00  INFO 19632 --- [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-15T17:38:00.637+07:00  INFO 19632 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-15T17:38:00.643+07:00  INFO 19632 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-15T17:38:00.674+07:00  INFO 19632 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-15T17:38:00.691+07:00 ERROR 19632 --- [main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8080 was already in use.

Action:

Identify and stop the process that's listening on port 8080 or configure this application to listen on another port.

2025-11-15T17:38:18.383+07:00  INFO 22232 --- [main] c.i.lms.LibraryManagementApplication     : Starting LibraryManagementApplication using Java 21.0.8 with PID 22232 (C:\Users\Admin\library-management-system\lms-backend\target\classes started by Admin in C:\Users\Admin\library-management-system\lms-backend)
2025-11-15T17:38:18.386+07:00 DEBUG 22232 --- [main] c.i.lms.LibraryManagementApplication     : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-15T17:38:18.388+07:00  INFO 22232 --- [main] c.i.lms.LibraryManagementApplication     : No active profile set, falling back to 1 default profile: "default"
2025-11-15T17:38:19.583+07:00  INFO 22232 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-15T17:38:19.806+07:00  INFO 22232 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 208 ms. Found 9 JPA repository interfaces.
2025-11-15T17:38:20.710+07:00  INFO 22232 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-15T17:38:20.727+07:00  INFO 22232 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-15T17:38:20.728+07:00  INFO 22232 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-15T17:38:20.984+07:00  INFO 22232 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-15T17:38:20.985+07:00  INFO 22232 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2535 ms
2025-11-15T17:38:21.166+07:00  INFO 22232 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-15T17:38:21.241+07:00  INFO 22232 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-15T17:38:21.296+07:00  INFO 22232 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-15T17:38:21.643+07:00  INFO 22232 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-15T17:38:21.685+07:00  INFO 22232 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-15T17:38:21.935+07:00  INFO 22232 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@38848217
2025-11-15T17:38:21.938+07:00  INFO 22232 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-15T17:38:22.015+07:00  WARN 22232 --- [main] org.hibernate.dialect.Dialect            : HHH000511: The 5.5.5 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-11-15T17:38:22.025+07:00  WARN 22232 --- [main] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-15T17:38:22.077+07:00  INFO 22232 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 5.5.5
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-15T17:38:23.595+07:00  INFO 22232 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-15T17:38:23.824+07:00 DEBUG 22232 --- [main] org.hibernate.SQL                        : alter table loans modify column status enum ('ACTIVE','OVERDUE','RETURNED') not null
2025-11-15T17:38:23.835+07:00 DEBUG 22232 --- [main] org.hibernate.SQL                        : alter table reservations modify column status enum ('ACTIVE','CANCELLED','EXPIRED','FULFILLED') not null
2025-11-15T17:38:23.914+07:00  INFO 22232 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-15T17:38:24.216+07:00  INFO 22232 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-15T17:38:25.109+07:00 DEBUG 22232 --- [main] c.i.lms.configuration.JwtRequestFilter   : Filter 'jwtRequestFilter' configured for use
2025-11-15T17:38:26.633+07:00  INFO 22232 --- [main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-11-15T17:38:26.633+07:00  WARN 22232 --- [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-11-15T17:38:27.540+07:00 DEBUG 22232 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 43 mappings in 'requestMappingHandlerMapping'
2025-11-15T17:38:27.611+07:00 DEBUG 22232 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-15T17:38:27.778+07:00 DEBUG 22232 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtRequestFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-15T17:38:27.985+07:00 DEBUG 22232 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-15T17:38:28.051+07:00 DEBUG 22232 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-15T17:38:28.251+07:00  INFO 22232 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-15T17:38:28.266+07:00  INFO 22232 --- [main] c.i.lms.LibraryManagementApplication     : Started LibraryManagementApplication in 10.554 seconds (process running for 11.067)
2025-11-15T17:38:28.400+07:00 DEBUG 22232 --- [main] org.hibernate.SQL                        : select r1_0.role_id,r1_0.role_name from role r1_0 where r1_0.role_name=?
2025-11-15T17:38:28.454+07:00 DEBUG 22232 --- [main] org.hibernate.SQL                        : select r1_0.role_id,r1_0.role_name from role r1_0 where r1_0.role_name=?
2025-11-15T17:38:28.460+07:00 DEBUG 22232 --- [main] org.hibernate.SQL                        : select u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,u1_0.username from users u1_0 where u1_0.username=?
2025-11-15T17:38:28.741+07:00 DEBUG 22232 --- [main] org.hibernate.SQL                        : insert into users (email,name,password,username) values (?,?,?,?)
2025-11-15T17:38:28.787+07:00 DEBUG 22232 --- [main] org.hibernate.SQL                        : insert into user_role (user_id,role_id) values (?,?)
2025-11-15T17:38:28.801+07:00 DEBUG 22232 --- [main] org.hibernate.SQL                        : select u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,u1_0.username from users u1_0 where u1_0.username=?
2025-11-15T17:38:28.909+07:00 DEBUG 22232 --- [main] org.hibernate.SQL                        : insert into users (email,name,password,username) values (?,?,?,?)
2025-11-15T17:38:28.912+07:00 DEBUG 22232 --- [main] org.hibernate.SQL                        : insert into user_role (user_id,role_id) values (?,?)
2025-11-15T17:38:56.061+07:00  INFO 22232 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-15T17:38:56.063+07:00  INFO 22232 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-15T17:38:56.063+07:00 DEBUG 22232 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-11-15T17:38:56.063+07:00 DEBUG 22232 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-11-15T17:38:56.063+07:00 DEBUG 22232 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-11-15T17:38:56.063+07:00 DEBUG 22232 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@dac317c
2025-11-15T17:38:56.063+07:00 DEBUG 22232 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@28b9877d
2025-11-15T17:38:56.063+07:00 DEBUG 22232 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-15T17:38:56.063+07:00  INFO 22232 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-11-15T17:38:56.110+07:00 DEBUG 22232 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/admin/dashboard/details
2025-11-15T17:38:56.176+07:00 DEBUG 22232 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/details
2025-11-15T17:38:56.391+07:00 DEBUG 22232 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:38:56.424+07:00 DEBUG 22232 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/details
2025-11-15T17:38:56.591+07:00 DEBUG 22232 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/details", parameters={}
2025-11-15T17:38:56.660+07:00 DEBUG 22232 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.AdminDashboardController#getDashboardDetails()
2025-11-15T17:38:56.726+07:00 DEBUG 22232 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.ibizabroker.lms.controller.AdminDashboardController.getDashboardDetails(); target is of class [com.ibizabroker.lms.controller.AdminDashboardController]
2025-11-15T17:38:56.793+07:00 DEBUG 22232 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.ibizabroker.lms.controller.AdminDashboardController.getDashboardDetails(); target is of class [com.ibizabroker.lms.controller.AdminDashboardController]
2025-11-15T17:38:56.806+07:00 DEBUG 22232 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : select count(*) from books b1_0
2025-11-15T17:38:56.808+07:00 DEBUG 22232 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : select count(*) from users u1_0
2025-11-15T17:38:56.828+07:00 DEBUG 22232 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : select count(l1_0.id) from loans l1_0 where l1_0.status=?
2025-11-15T17:38:56.828+07:00 DEBUG 22232 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : select count(l1_0.id) from loans l1_0 where l1_0.status=?
2025-11-15T17:38:56.861+07:00 DEBUG 22232 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : select l1_0.book_id,count(l1_0.book_id) from loans l1_0 group by l1_0.book_id order by 2 desc limit ?
2025-11-15T17:38:56.886+07:00 DEBUG 22232 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : select l1_0.member_id,count(l1_0.member_id) from loans l1_0 group by l1_0.member_id order by 2 desc limit ?
2025-11-15T17:38:56.895+07:00 DEBUG 22232 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : select l1_0.id,l1_0.book_id,l1_0.due_date,l1_0.fine_amount,l1_0.fine_status,l1_0.loan_date,l1_0.member_id,l1_0.return_date,l1_0.status from loans l1_0 order by l1_0.loan_date desc limit ?
2025-11-15T17:38:56.909+07:00 DEBUG 22232 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : select l1_0.id,l1_0.book_id,l1_0.due_date,l1_0.fine_amount,l1_0.fine_status,l1_0.loan_date,l1_0.member_id,l1_0.return_date,l1_0.status from loans l1_0 where l1_0.status=?
2025-11-15T17:38:57.003+07:00 DEBUG 22232 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T17:38:57.008+07:00 DEBUG 22232 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.ibizabroker.lms.dto.DashboardDetailsDto@4c4ea3cf]
2025-11-15T17:38:57.043+07:00 DEBUG 22232 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-15T17:38:59.956+07:00 DEBUG 22232 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/admin/users
2025-11-15T17:38:59.960+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/users
2025-11-15T17:38:59.977+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:38:59.994+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/users
2025-11-15T17:38:59.995+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/users", parameters={}
2025-11-15T17:38:59.998+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.AdminController#getAllUsers()
2025-11-15T17:39:00.004+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public java.util.List com.ibizabroker.lms.controller.AdminController.getAllUsers(); target is of class [com.ibizabroker.lms.controller.AdminController]
2025-11-15T17:39:00.004+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public java.util.List com.ibizabroker.lms.controller.AdminController.getAllUsers(); target is of class [com.ibizabroker.lms.controller.AdminController]
2025-11-15T17:39:00.057+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : select u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,u1_0.username from users u1_0
2025-11-15T17:39:00.094+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : select r1_0.user_id,r1_1.role_id,r1_1.role_name from user_role r1_0 join role r1_1 on r1_1.role_id=r1_0.role_id where r1_0.user_id=?
2025-11-15T17:39:00.106+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : select r1_0.user_id,r1_1.role_id,r1_1.role_name from user_role r1_0 join role r1_1 on r1_1.role_id=r1_0.role_id where r1_0.user_id=?
2025-11-15T17:39:00.106+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : select r1_0.user_id,r1_1.role_id,r1_1.role_name from user_role r1_0 join role r1_1 on r1_1.role_id=r1_0.role_id where r1_0.user_id=?
2025-11-15T17:39:00.120+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T17:39:00.120+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [[com.ibizabroker.lms.dto.UserDto@3dcc3d2a, com.ibizabroker.lms.dto.UserDto@4397a18d, com.ibizabroker (truncated)...]
2025-11-15T17:39:00.134+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-15T17:39:01.398+07:00 DEBUG 22232 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/public/books/newest
2025-11-15T17:39:01.413+07:00 DEBUG 22232 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/public/books/newest
2025-11-15T17:39:01.434+07:00 DEBUG 22232 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:39:01.452+07:00 DEBUG 22232 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/public/books/newest
2025-11-15T17:39:01.453+07:00 DEBUG 22232 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/public/books/newest", parameters={}
2025-11-15T17:39:01.456+07:00 DEBUG 22232 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.PublicBooksController#getNewestBooks()
2025-11-15T17:39:01.470+07:00  WARN 22232 --- [http-nio-8080-exec-7] org.hibernate.orm.query                  : HHH90003004: firstResult/maxResults specified with collection fetch; applying in memory
2025-11-15T17:39:01.484+07:00 DEBUG 22232 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : select b1_0.id,a1_0.book_id,a1_1.id,a1_1.name,c1_0.book_id,c1_1.id,c1_1.name,b1_0.cover_url,b1_0.isbn,b1_0.name,b1_0.number_of_copies_available,b1_0.published_year from books b1_0 left join book_authors a1_0 on b1_0.id=a1_0.book_id left join authors a1_1 on a1_1.id=a1_0.author_id left join book_categories c1_0 on b1_0.id=c1_0.book_id left join categories c1_1 on c1_1.id=c1_0.category_id order by b1_0.id desc
2025-11-15T17:39:01.924+07:00 DEBUG 22232 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T17:39:01.924+07:00 DEBUG 22232 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [[com.ibizabroker.lms.entity.Books@69628053, com.ibizabroker.lms.entity.Books@2584c213, com.ibizabrok (truncated)...]
2025-11-15T17:39:01.939+07:00 DEBUG 22232 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-15T17:39:25.738+07:00 DEBUG 22232 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/auth/authenticate
2025-11-15T17:39:25.747+07:00 DEBUG 22232 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/authenticate
2025-11-15T17:39:25.758+07:00 DEBUG 22232 --- [http-nio-8080-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-15T17:39:25.775+07:00 DEBUG 22232 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/authenticate
2025-11-15T17:39:25.775+07:00 DEBUG 22232 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : POST "/api/auth/authenticate", parameters={}
2025-11-15T17:39:25.775+07:00 DEBUG 22232 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.AuthController#authenticate(LoginRequest)
2025-11-15T17:39:25.881+07:00 DEBUG 22232 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest[username=user, password=user123]]
2025-11-15T17:39:26.278+07:00 DEBUG 22232 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:39:26.471+07:00 DEBUG 22232 --- [http-nio-8080-exec-10] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-11-15T17:39:26.487+07:00 DEBUG 22232 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:39:26.542+07:00 DEBUG 22232 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json]
2025-11-15T17:39:26.567+07:00 DEBUG 22232 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse[token=eyJhbGciOiJIUzI1NiJ9.eyJ1c2VySWQiOjM1LCJyb2xlcyI6WyJST0xFX1VTRVIiXSwic3ViIjoidXN (truncated)...]
2025-11-15T17:39:26.574+07:00 DEBUG 22232 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-15T17:39:26.601+07:00 DEBUG 22232 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/public/books/newest
2025-11-15T17:39:26.626+07:00 DEBUG 22232 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/public/books/newest
2025-11-15T17:39:26.648+07:00 DEBUG 22232 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:39:26.661+07:00 DEBUG 22232 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/public/books/newest
2025-11-15T17:39:26.661+07:00 DEBUG 22232 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/public/books/newest", parameters={}
2025-11-15T17:39:26.661+07:00 DEBUG 22232 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.PublicBooksController#getNewestBooks()
2025-11-15T17:39:26.661+07:00  WARN 22232 --- [http-nio-8080-exec-9] org.hibernate.orm.query                  : HHH90003004: firstResult/maxResults specified with collection fetch; applying in memory
2025-11-15T17:39:26.678+07:00 DEBUG 22232 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select b1_0.id,a1_0.book_id,a1_1.id,a1_1.name,c1_0.book_id,c1_1.id,c1_1.name,b1_0.cover_url,b1_0.isbn,b1_0.name,b1_0.number_of_copies_available,b1_0.published_year from books b1_0 left join book_authors a1_0 on b1_0.id=a1_0.book_id left join authors a1_1 on a1_1.id=a1_0.author_id left join book_categories c1_0 on b1_0.id=c1_0.book_id left join categories c1_1 on c1_1.id=c1_0.category_id order by b1_0.id desc
2025-11-15T17:39:26.741+07:00 DEBUG 22232 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T17:39:26.760+07:00 DEBUG 22232 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [[com.ibizabroker.lms.entity.Books@97b3ff0, com.ibizabroker.lms.entity.Books@19024752, com.ibizabroke (truncated)...]
2025-11-15T17:39:26.773+07:00 DEBUG 22232 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-15T17:39:34.465+07:00 DEBUG 22232 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/user/circulation/my-loans
2025-11-15T17:39:34.466+07:00 DEBUG 22232 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/user/circulation/my-fines
2025-11-15T17:39:34.477+07:00 DEBUG 22232 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/user/circulation/my-loans
2025-11-15T17:39:34.481+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/user/circulation/my-fines
2025-11-15T17:39:34.523+07:00 DEBUG 22232 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:39:34.523+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:39:34.538+07:00 DEBUG 22232 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/user/circulation/my-loans
2025-11-15T17:39:34.538+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/user/circulation/my-fines
2025-11-15T17:39:34.538+07:00 DEBUG 22232 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/user/circulation/my-loans", parameters={}
2025-11-15T17:39:34.538+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/user/circulation/my-fines", parameters={}
2025-11-15T17:39:34.554+07:00 DEBUG 22232 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.CirculationController#getMyLoanHistory(UserDetails)
2025-11-15T17:39:34.554+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.CirculationController#getMyFines(UserDetails)
2025-11-15T17:39:34.554+07:00 DEBUG 22232 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.ibizabroker.lms.controller.CirculationController.getMyLoanHistory(org.springframework.security.core.userdetails.UserDetails); target is of class [com.ibizabroker.lms.controller.CirculationController]
2025-11-15T17:39:34.554+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.ibizabroker.lms.controller.CirculationController.getMyFines(org.springframework.security.core.userdetails.UserDetails); target is of class [com.ibizabroker.lms.controller.CirculationController]
2025-11-15T17:39:34.554+07:00 DEBUG 22232 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.ibizabroker.lms.controller.CirculationController.getMyLoanHistory(org.springframework.security.core.userdetails.UserDetails); target is of class [com.ibizabroker.lms.controller.CirculationController]
2025-11-15T17:39:34.554+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.ibizabroker.lms.controller.CirculationController.getMyFines(org.springframework.security.core.userdetails.UserDetails); target is of class [com.ibizabroker.lms.controller.CirculationController]
2025-11-15T17:39:34.571+07:00 DEBUG 22232 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,u1_0.username from users u1_0 where u1_0.username=?
2025-11-15T17:39:34.571+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : select u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,u1_0.username from users u1_0 where u1_0.username=?
2025-11-15T17:39:34.607+07:00 DEBUG 22232 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select l1_0.id,b1_0.name,u1_0.name,l1_0.loan_date,l1_0.due_date,l1_0.return_date,l1_0.status from loans l1_0 join books b1_0 on l1_0.book_id=b1_0.id join users u1_0 on l1_0.member_id=u1_0.user_id where l1_0.member_id=? order by l1_0.loan_date desc
2025-11-15T17:39:34.624+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : select l1_0.id,b1_0.name,u1_0.name,l1_0.due_date,l1_0.return_date,l1_0.fine_amount from loans l1_0 join books b1_0 on l1_0.book_id=b1_0.id join users u1_0 on l1_0.member_id=u1_0.user_id where l1_0.fine_status='UNPAID' and l1_0.member_id=? order by l1_0.return_date desc
2025-11-15T17:39:34.655+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T17:39:34.655+07:00 DEBUG 22232 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T17:39:34.658+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[]]
2025-11-15T17:39:34.658+07:00 DEBUG 22232 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[]]
2025-11-15T17:39:34.658+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-15T17:39:34.658+07:00 DEBUG 22232 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-15T17:39:35.599+07:00 DEBUG 22232 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/user/circulation/my-loans
2025-11-15T17:39:35.611+07:00 DEBUG 22232 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:39:35.628+07:00 DEBUG 22232 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/user/circulation/my-loans
2025-11-15T17:39:35.628+07:00 DEBUG 22232 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/user/circulation/my-loans", parameters={}
2025-11-15T17:39:35.628+07:00 DEBUG 22232 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.CirculationController#getMyLoanHistory(UserDetails)
2025-11-15T17:39:35.628+07:00 DEBUG 22232 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.ibizabroker.lms.controller.CirculationController.getMyLoanHistory(org.springframework.security.core.userdetails.UserDetails); target is of class [com.ibizabroker.lms.controller.CirculationController]
2025-11-15T17:39:35.641+07:00 DEBUG 22232 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.ibizabroker.lms.controller.CirculationController.getMyLoanHistory(org.springframework.security.core.userdetails.UserDetails); target is of class [com.ibizabroker.lms.controller.CirculationController]
2025-11-15T17:39:35.645+07:00 DEBUG 22232 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : select u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,u1_0.username from users u1_0 where u1_0.username=?
2025-11-15T17:39:35.661+07:00 DEBUG 22232 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : select l1_0.id,b1_0.name,u1_0.name,l1_0.loan_date,l1_0.due_date,l1_0.return_date,l1_0.status from loans l1_0 join books b1_0 on l1_0.book_id=b1_0.id join users u1_0 on l1_0.member_id=u1_0.user_id where l1_0.member_id=? order by l1_0.loan_date desc
2025-11-15T17:39:35.662+07:00 DEBUG 22232 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T17:39:35.662+07:00 DEBUG 22232 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[]]
2025-11-15T17:39:35.676+07:00 DEBUG 22232 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-15T17:39:36.672+07:00 DEBUG 22232 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/public/books?availableOnly=false&page=0&size=1000
2025-11-15T17:39:36.672+07:00 DEBUG 22232 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/public/books?availableOnly=true&page=0&size=10
2025-11-15T17:39:36.679+07:00 DEBUG 22232 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/public/books?availableOnly=false&page=0&size=1000
2025-11-15T17:39:36.679+07:00 DEBUG 22232 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/public/books?availableOnly=true&page=0&size=10
2025-11-15T17:39:36.700+07:00 DEBUG 22232 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:39:36.707+07:00 DEBUG 22232 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:39:36.728+07:00 DEBUG 22232 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/public/books?availableOnly=false&page=0&size=1000
2025-11-15T17:39:36.730+07:00 DEBUG 22232 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/public/books?availableOnly=false&page=0&size=1000", parameters={masked}
2025-11-15T17:39:36.747+07:00 DEBUG 22232 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/public/books?availableOnly=true&page=0&size=10
2025-11-15T17:39:36.745+07:00 DEBUG 22232 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.PublicBooksController#listBooks(String, String, boolean, int, int)
2025-11-15T17:39:36.747+07:00 DEBUG 22232 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/public/books?availableOnly=true&page=0&size=10", parameters={masked}
2025-11-15T17:39:36.759+07:00 DEBUG 22232 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.PublicBooksController#listBooks(String, String, boolean, int, int)
2025-11-15T17:39:36.780+07:00  WARN 22232 --- [http-nio-8080-exec-10] org.hibernate.orm.query                  : HHH90003004: firstResult/maxResults specified with collection fetch; applying in memory
2025-11-15T17:39:36.796+07:00  WARN 22232 --- [http-nio-8080-exec-8] org.hibernate.orm.query                  : HHH90003004: firstResult/maxResults specified with collection fetch; applying in memory
2025-11-15T17:39:36.841+07:00 DEBUG 22232 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : select distinct b1_0.id,a1_0.book_id,a1_1.id,a1_1.name,c1_0.book_id,c1_1.id,c1_1.name,b1_0.cover_url,b1_0.isbn,b1_0.name,b1_0.number_of_copies_available,b1_0.published_year from books b1_0 left join book_authors a1_0 on b1_0.id=a1_0.book_id left join authors a1_1 on a1_1.id=a1_0.author_id left join book_categories c1_0 on b1_0.id=c1_0.book_id left join categories c1_1 on c1_1.id=c1_0.category_id where (? is null or ?='' or lower(b1_0.name) like replace(lower(concat('%',?,'%')),'\\','\\\\') or lower(a1_1.name) like replace(lower(concat('%',?,'%')),'\\','\\\\')) and (? is null or ?='' or c1_1.name=?) and (?=0 or b1_0.number_of_copies_available>0)
2025-11-15T17:39:36.841+07:00 DEBUG 22232 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : select distinct b1_0.id,a1_0.book_id,a1_1.id,a1_1.name,c1_0.book_id,c1_1.id,c1_1.name,b1_0.cover_url,b1_0.isbn,b1_0.name,b1_0.number_of_copies_available,b1_0.published_year from books b1_0 left join book_authors a1_0 on b1_0.id=a1_0.book_id left join authors a1_1 on a1_1.id=a1_0.author_id left join book_categories c1_0 on b1_0.id=c1_0.book_id left join categories c1_1 on c1_1.id=c1_0.category_id where (? is null or ?='' or lower(b1_0.name) like replace(lower(concat('%',?,'%')),'\\','\\\\') or lower(a1_1.name) like replace(lower(concat('%',?,'%')),'\\','\\\\')) and (? is null or ?='' or c1_1.name=?) and (?=0 or b1_0.number_of_copies_available>0)
2025-11-15T17:39:36.944+07:00 DEBUG 22232 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : select count(distinct b1_0.id) from books b1_0 left join book_authors a1_0 on b1_0.id=a1_0.book_id left join authors a1_1 on a1_1.id=a1_0.author_id left join book_categories c1_0 on b1_0.id=c1_0.book_id left join categories c1_1 on c1_1.id=c1_0.category_id where (? is null or ?='' or lower(b1_0.name) like replace(lower(concat('%',?,'%')),'\\','\\\\') or lower(a1_1.name) like replace(lower(concat('%',?,'%')),'\\','\\\\')) and (? is null or ?='' or c1_1.name=?) and (?=0 or b1_0.number_of_copies_available>0)
2025-11-15T17:39:36.947+07:00  WARN 22232 --- [http-nio-8080-exec-8] ration$PageModule$WarningLoggingModifier : Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2025-11-15T17:39:36.959+07:00 DEBUG 22232 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T17:39:36.975+07:00 DEBUG 22232 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [Page 1 of 1 containing com.ibizabroker.lms.entity.Books instances]
2025-11-15T17:39:36.975+07:00 DEBUG 22232 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T17:39:36.980+07:00 DEBUG 22232 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [Page 1 of 5 containing com.ibizabroker.lms.entity.Books instances]
2025-11-15T17:39:37.007+07:00 DEBUG 22232 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-15T17:39:37.007+07:00 DEBUG 22232 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-15T17:39:40.636+07:00 DEBUG 22232 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/user/circulation/loans
2025-11-15T17:39:40.641+07:00 DEBUG 22232 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/user/circulation/loans
2025-11-15T17:39:40.649+07:00 DEBUG 22232 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:39:40.654+07:00 DEBUG 22232 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/user/circulation/loans
2025-11-15T17:39:40.654+07:00 DEBUG 22232 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : POST "/api/user/circulation/loans", parameters={}
2025-11-15T17:39:40.665+07:00 DEBUG 22232 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.CirculationController#loan(LoanRequest)
2025-11-15T17:39:40.674+07:00 DEBUG 22232 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [com.ibizabroker.lms.dto.LoanRequest@31fa2731]
2025-11-15T17:39:40.674+07:00 DEBUG 22232 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : select r1_0.id,r1_0.book_id,r1_0.created_at,r1_0.expire_at,r1_0.member_id,r1_0.status from reservations r1_0 where r1_0.book_id=? and r1_0.status=? order by r1_0.created_at limit ?
2025-11-15T17:39:40.719+07:00 DEBUG 22232 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : update books b1_0 set number_of_copies_available=(b1_0.number_of_copies_available-1) where b1_0.id=? and b1_0.number_of_copies_available>0
2025-11-15T17:39:40.719+07:00 DEBUG 22232 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : insert into loans (book_id,due_date,fine_amount,fine_status,loan_date,member_id,return_date,status) values (?,?,?,?,?,?,?,?)
2025-11-15T17:39:40.770+07:00 DEBUG 22232 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T17:39:40.770+07:00 DEBUG 22232 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.ibizabroker.lms.entity.Loan@4549af70]
2025-11-15T17:39:40.784+07:00 DEBUG 22232 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-15T17:39:40.786+07:00 DEBUG 22232 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/public/books?availableOnly=true&page=0&size=10
2025-11-15T17:39:40.802+07:00 DEBUG 22232 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:39:40.825+07:00 DEBUG 22232 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/public/books?availableOnly=true&page=0&size=10
2025-11-15T17:39:40.827+07:00 DEBUG 22232 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/public/books?availableOnly=true&page=0&size=10", parameters={masked}
2025-11-15T17:39:40.828+07:00 DEBUG 22232 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.PublicBooksController#listBooks(String, String, boolean, int, int)
2025-11-15T17:39:40.839+07:00  WARN 22232 --- [http-nio-8080-exec-4] org.hibernate.orm.query                  : HHH90003004: firstResult/maxResults specified with collection fetch; applying in memory
2025-11-15T17:39:40.839+07:00 DEBUG 22232 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : select distinct b1_0.id,a1_0.book_id,a1_1.id,a1_1.name,c1_0.book_id,c1_1.id,c1_1.name,b1_0.cover_url,b1_0.isbn,b1_0.name,b1_0.number_of_copies_available,b1_0.published_year from books b1_0 left join book_authors a1_0 on b1_0.id=a1_0.book_id left join authors a1_1 on a1_1.id=a1_0.author_id left join book_categories c1_0 on b1_0.id=c1_0.book_id left join categories c1_1 on c1_1.id=c1_0.category_id where (? is null or ?='' or lower(b1_0.name) like replace(lower(concat('%',?,'%')),'\\','\\\\') or lower(a1_1.name) like replace(lower(concat('%',?,'%')),'\\','\\\\')) and (? is null or ?='' or c1_1.name=?) and (?=0 or b1_0.number_of_copies_available>0)
2025-11-15T17:39:40.853+07:00 DEBUG 22232 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : select count(distinct b1_0.id) from books b1_0 left join book_authors a1_0 on b1_0.id=a1_0.book_id left join authors a1_1 on a1_1.id=a1_0.author_id left join book_categories c1_0 on b1_0.id=c1_0.book_id left join categories c1_1 on c1_1.id=c1_0.category_id where (? is null or ?='' or lower(b1_0.name) like replace(lower(concat('%',?,'%')),'\\','\\\\') or lower(a1_1.name) like replace(lower(concat('%',?,'%')),'\\','\\\\')) and (? is null or ?='' or c1_1.name=?) and (?=0 or b1_0.number_of_copies_available>0)
2025-11-15T17:39:40.867+07:00 DEBUG 22232 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T17:39:40.867+07:00 DEBUG 22232 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [Page 1 of 5 containing com.ibizabroker.lms.entity.Books instances]
2025-11-15T17:39:40.867+07:00 DEBUG 22232 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-15T17:39:42.798+07:00 DEBUG 22232 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/user/circulation/my-loans
2025-11-15T17:39:42.804+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/user/circulation/my-loans
2025-11-15T17:39:42.826+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:39:42.839+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/user/circulation/my-loans
2025-11-15T17:39:42.839+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/user/circulation/my-loans", parameters={}
2025-11-15T17:39:42.839+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.CirculationController#getMyLoanHistory(UserDetails)
2025-11-15T17:39:42.839+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.ibizabroker.lms.controller.CirculationController.getMyLoanHistory(org.springframework.security.core.userdetails.UserDetails); target is of class [com.ibizabroker.lms.controller.CirculationController]
2025-11-15T17:39:42.848+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.ibizabroker.lms.controller.CirculationController.getMyLoanHistory(org.springframework.security.core.userdetails.UserDetails); target is of class [com.ibizabroker.lms.controller.CirculationController]
2025-11-15T17:39:42.854+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : select u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,u1_0.username from users u1_0 where u1_0.username=?
2025-11-15T17:39:42.865+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : select l1_0.id,b1_0.name,u1_0.name,l1_0.loan_date,l1_0.due_date,l1_0.return_date,l1_0.status from loans l1_0 join books b1_0 on l1_0.book_id=b1_0.id join users u1_0 on l1_0.member_id=u1_0.user_id where l1_0.member_id=? order by l1_0.loan_date desc
2025-11-15T17:39:42.870+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T17:39:42.884+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[com.ibizabroker.lms.dto.LoanDetailsDto@7e31ecf0]]
2025-11-15T17:39:42.887+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-15T17:39:44.907+07:00 DEBUG 22232 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/user/circulation/my-loans
2025-11-15T17:39:44.907+07:00 DEBUG 22232 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/user/circulation/my-fines
2025-11-15T17:39:44.928+07:00 DEBUG 22232 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/user/circulation/my-fines
2025-11-15T17:39:44.936+07:00 DEBUG 22232 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:39:44.956+07:00 DEBUG 22232 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:39:44.972+07:00 DEBUG 22232 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/user/circulation/my-loans
2025-11-15T17:39:44.988+07:00 DEBUG 22232 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/user/circulation/my-loans", parameters={}
2025-11-15T17:39:45.006+07:00 DEBUG 22232 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.CirculationController#getMyLoanHistory(UserDetails)
2025-11-15T17:39:45.020+07:00 DEBUG 22232 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.ibizabroker.lms.controller.CirculationController.getMyLoanHistory(org.springframework.security.core.userdetails.UserDetails); target is of class [com.ibizabroker.lms.controller.CirculationController]
2025-11-15T17:39:45.149+07:00 DEBUG 22232 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.ibizabroker.lms.controller.CirculationController.getMyLoanHistory(org.springframework.security.core.userdetails.UserDetails); target is of class [com.ibizabroker.lms.controller.CirculationController]
2025-11-15T17:39:45.020+07:00 DEBUG 22232 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/user/circulation/my-fines
2025-11-15T17:39:45.201+07:00 DEBUG 22232 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/user/circulation/my-fines", parameters={}
2025-11-15T17:39:45.227+07:00 DEBUG 22232 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : select u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,u1_0.username from users u1_0 where u1_0.username=?
2025-11-15T17:39:45.234+07:00 DEBUG 22232 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.CirculationController#getMyFines(UserDetails)
2025-11-15T17:39:45.268+07:00 DEBUG 22232 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.ibizabroker.lms.controller.CirculationController.getMyFines(org.springframework.security.core.userdetails.UserDetails); target is of class [com.ibizabroker.lms.controller.CirculationController]
2025-11-15T17:39:45.284+07:00 DEBUG 22232 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : select l1_0.id,b1_0.name,u1_0.name,l1_0.loan_date,l1_0.due_date,l1_0.return_date,l1_0.status from loans l1_0 join books b1_0 on l1_0.book_id=b1_0.id join users u1_0 on l1_0.member_id=u1_0.user_id where l1_0.member_id=? order by l1_0.loan_date desc
2025-11-15T17:39:45.286+07:00 DEBUG 22232 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.ibizabroker.lms.controller.CirculationController.getMyFines(org.springframework.security.core.userdetails.UserDetails); target is of class [com.ibizabroker.lms.controller.CirculationController]
2025-11-15T17:39:45.301+07:00 DEBUG 22232 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : select u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,u1_0.username from users u1_0 where u1_0.username=?
2025-11-15T17:39:45.306+07:00 DEBUG 22232 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T17:39:45.306+07:00 DEBUG 22232 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[com.ibizabroker.lms.dto.LoanDetailsDto@1d2328ab]]
2025-11-15T17:39:45.318+07:00 DEBUG 22232 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : select l1_0.id,b1_0.name,u1_0.name,l1_0.due_date,l1_0.return_date,l1_0.fine_amount from loans l1_0 join books b1_0 on l1_0.book_id=b1_0.id join users u1_0 on l1_0.member_id=u1_0.user_id where l1_0.fine_status='UNPAID' and l1_0.member_id=? order by l1_0.return_date desc
2025-11-15T17:39:45.318+07:00 DEBUG 22232 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-15T17:39:45.332+07:00 DEBUG 22232 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T17:39:45.333+07:00 DEBUG 22232 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[]]
2025-11-15T17:39:45.335+07:00 DEBUG 22232 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-15T17:39:46.777+07:00 DEBUG 22232 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/user/circulation/my-loans
2025-11-15T17:39:46.787+07:00 DEBUG 22232 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:39:46.811+07:00 DEBUG 22232 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/user/circulation/my-loans
2025-11-15T17:39:46.814+07:00 DEBUG 22232 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/user/circulation/my-loans", parameters={}
2025-11-15T17:39:46.820+07:00 DEBUG 22232 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.CirculationController#getMyLoanHistory(UserDetails)
2025-11-15T17:39:46.820+07:00 DEBUG 22232 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.ibizabroker.lms.controller.CirculationController.getMyLoanHistory(org.springframework.security.core.userdetails.UserDetails); target is of class [com.ibizabroker.lms.controller.CirculationController]
2025-11-15T17:39:46.820+07:00 DEBUG 22232 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.ibizabroker.lms.controller.CirculationController.getMyLoanHistory(org.springframework.security.core.userdetails.UserDetails); target is of class [com.ibizabroker.lms.controller.CirculationController]
2025-11-15T17:39:46.836+07:00 DEBUG 22232 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : select u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,u1_0.username from users u1_0 where u1_0.username=?
2025-11-15T17:39:46.837+07:00 DEBUG 22232 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : select l1_0.id,b1_0.name,u1_0.name,l1_0.loan_date,l1_0.due_date,l1_0.return_date,l1_0.status from loans l1_0 join books b1_0 on l1_0.book_id=b1_0.id join users u1_0 on l1_0.member_id=u1_0.user_id where l1_0.member_id=? order by l1_0.loan_date desc
2025-11-15T17:39:46.854+07:00 DEBUG 22232 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T17:39:46.854+07:00 DEBUG 22232 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[com.ibizabroker.lms.dto.LoanDetailsDto@3fdd4d6e]]
2025-11-15T17:39:46.865+07:00 DEBUG 22232 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-15T17:39:50.354+07:00 DEBUG 22232 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/public/books/newest
2025-11-15T17:39:50.435+07:00 DEBUG 22232 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/public/books/newest
2025-11-15T17:39:50.472+07:00 DEBUG 22232 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:39:50.494+07:00 DEBUG 22232 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/public/books/newest
2025-11-15T17:39:50.496+07:00 DEBUG 22232 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/public/books/newest", parameters={}
2025-11-15T17:39:50.499+07:00 DEBUG 22232 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.PublicBooksController#getNewestBooks()
2025-11-15T17:39:50.502+07:00  WARN 22232 --- [http-nio-8080-exec-9] org.hibernate.orm.query                  : HHH90003004: firstResult/maxResults specified with collection fetch; applying in memory
2025-11-15T17:39:50.502+07:00 DEBUG 22232 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select b1_0.id,a1_0.book_id,a1_1.id,a1_1.name,c1_0.book_id,c1_1.id,c1_1.name,b1_0.cover_url,b1_0.isbn,b1_0.name,b1_0.number_of_copies_available,b1_0.published_year from books b1_0 left join book_authors a1_0 on b1_0.id=a1_0.book_id left join authors a1_1 on a1_1.id=a1_0.author_id left join book_categories c1_0 on b1_0.id=c1_0.book_id left join categories c1_1 on c1_1.id=c1_0.category_id order by b1_0.id desc
2025-11-15T17:39:50.528+07:00 DEBUG 22232 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T17:39:50.528+07:00 DEBUG 22232 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [[com.ibizabroker.lms.entity.Books@1d34b8e0, com.ibizabroker.lms.entity.Books@2487937, com.ibizabroke (truncated)...]
2025-11-15T17:39:50.533+07:00 DEBUG 22232 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-15T17:43:43.719+07:00 DEBUG 22232 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/public/books/newest
2025-11-15T17:43:43.727+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/public/books/newest
2025-11-15T17:43:43.735+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:43:43.742+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/public/books/newest
2025-11-15T17:43:43.743+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/public/books/newest", parameters={}
2025-11-15T17:43:43.744+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.PublicBooksController#getNewestBooks()
2025-11-15T17:43:43.745+07:00  WARN 22232 --- [http-nio-8080-exec-6] org.hibernate.orm.query                  : HHH90003004: firstResult/maxResults specified with collection fetch; applying in memory
2025-11-15T17:43:43.745+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : select b1_0.id,a1_0.book_id,a1_1.id,a1_1.name,c1_0.book_id,c1_1.id,c1_1.name,b1_0.cover_url,b1_0.isbn,b1_0.name,b1_0.number_of_copies_available,b1_0.published_year from books b1_0 left join book_authors a1_0 on b1_0.id=a1_0.book_id left join authors a1_1 on a1_1.id=a1_0.author_id left join book_categories c1_0 on b1_0.id=c1_0.book_id left join categories c1_1 on c1_1.id=c1_0.category_id order by b1_0.id desc
2025-11-15T17:43:43.750+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T17:43:43.757+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [[com.ibizabroker.lms.entity.Books@67358a36, com.ibizabroker.lms.entity.Books@c854ea, com.ibizabroker (truncated)...]
2025-11-15T17:43:43.759+07:00 DEBUG 22232 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-15T17:45:25.497+07:00 DEBUG 22232 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /user/chat
2025-11-15T17:45:25.511+07:00 DEBUG 22232 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /user/chat
2025-11-15T17:45:25.513+07:00 DEBUG 22232 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:45:25.529+07:00 DEBUG 22232 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /user/chat
2025-11-15T17:45:25.529+07:00 DEBUG 22232 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/user/chat", parameters={}
2025-11-15T17:45:25.546+07:00 DEBUG 22232 --- [http-nio-8080-exec-5] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-11-15T17:45:25.546+07:00 DEBUG 22232 --- [http-nio-8080-exec-5] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2025-11-15T17:45:25.563+07:00 DEBUG 22232 --- [http-nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.ibizabroker.lms.controller.ApiExceptionHandler#handleOther(Exception)
2025-11-15T17:45:25.660+07:00 DEBUG 22232 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T17:45:25.662+07:00 DEBUG 22232 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{message= xy ra li khng mong mun t my ch.}]
2025-11-15T17:45:25.662+07:00 DEBUG 22232 --- [http-nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource user/chat.]
2025-11-15T17:45:25.662+07:00 DEBUG 22232 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 500 INTERNAL_SERVER_ERROR
2025-11-15T17:46:37.369+07:00 DEBUG 22232 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/api/public/books/newest
2025-11-15T17:46:37.376+07:00 DEBUG 22232 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/api/public/books/newest
2025-11-15T17:46:37.384+07:00 DEBUG 22232 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:46:37.394+07:00 DEBUG 22232 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/api/public/books/newest
2025-11-15T17:46:37.395+07:00 DEBUG 22232 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/api/public/books/newest", parameters={}
2025-11-15T17:46:37.396+07:00 DEBUG 22232 --- [http-nio-8080-exec-8] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-11-15T17:46:37.402+07:00 DEBUG 22232 --- [http-nio-8080-exec-8] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2025-11-15T17:46:37.404+07:00 DEBUG 22232 --- [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.ibizabroker.lms.controller.ApiExceptionHandler#handleOther(Exception)
2025-11-15T17:46:37.437+07:00 DEBUG 22232 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T17:46:37.438+07:00 DEBUG 22232 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{message= xy ra li khng mong mun t my ch.}]
2025-11-15T17:46:37.440+07:00 DEBUG 22232 --- [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/api/public/books/newest.]
2025-11-15T17:46:37.441+07:00 DEBUG 22232 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 500 INTERNAL_SERVER_ERROR
2025-11-15T17:46:42.301+07:00 DEBUG 22232 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/api/public/books/newest
2025-11-15T17:46:42.305+07:00 DEBUG 22232 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:46:42.312+07:00 DEBUG 22232 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/api/public/books/newest
2025-11-15T17:46:42.313+07:00 DEBUG 22232 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/api/public/books/newest", parameters={}
2025-11-15T17:46:42.314+07:00 DEBUG 22232 --- [http-nio-8080-exec-9] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-11-15T17:46:42.316+07:00 DEBUG 22232 --- [http-nio-8080-exec-9] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2025-11-15T17:46:42.317+07:00 DEBUG 22232 --- [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.ibizabroker.lms.controller.ApiExceptionHandler#handleOther(Exception)
2025-11-15T17:46:42.344+07:00 DEBUG 22232 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T17:46:42.344+07:00 DEBUG 22232 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{message= xy ra li khng mong mun t my ch.}]
2025-11-15T17:46:42.344+07:00 DEBUG 22232 --- [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/api/public/books/newest.]
2025-11-15T17:46:42.348+07:00 DEBUG 22232 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 500 INTERNAL_SERVER_ERROR
2025-11-15T17:48:00.406+07:00  INFO 6812 --- [main] c.i.lms.LibraryManagementApplication     : Starting LibraryManagementApplication using Java 21.0.8 with PID 6812 (C:\Users\Admin\library-management-system\lms-backend\target\classes started by Admin in C:\Users\Admin\library-management-system\lms-backend)
2025-11-15T17:48:00.408+07:00 DEBUG 6812 --- [main] c.i.lms.LibraryManagementApplication     : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-15T17:48:00.408+07:00  INFO 6812 --- [main] c.i.lms.LibraryManagementApplication     : No active profile set, falling back to 1 default profile: "default"
2025-11-15T17:48:01.441+07:00  INFO 6812 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-15T17:48:01.690+07:00  INFO 6812 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 221 ms. Found 9 JPA repository interfaces.
2025-11-15T17:48:02.691+07:00  INFO 6812 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-15T17:48:02.733+07:00  INFO 6812 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-15T17:48:02.736+07:00  INFO 6812 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-15T17:48:02.857+07:00  INFO 6812 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-15T17:48:02.857+07:00  INFO 6812 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2380 ms
2025-11-15T17:48:03.030+07:00  INFO 6812 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-15T17:48:03.124+07:00  INFO 6812 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-15T17:48:03.191+07:00  INFO 6812 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-15T17:48:03.605+07:00  INFO 6812 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-15T17:48:03.674+07:00  INFO 6812 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-15T17:48:04.102+07:00  INFO 6812 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@71734463
2025-11-15T17:48:04.105+07:00  INFO 6812 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-15T17:48:04.176+07:00  WARN 6812 --- [main] org.hibernate.dialect.Dialect            : HHH000511: The 5.5.5 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-11-15T17:48:04.181+07:00  WARN 6812 --- [main] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-15T17:48:04.201+07:00  INFO 6812 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 5.5.5
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-15T17:48:05.890+07:00  INFO 6812 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-15T17:48:06.157+07:00 DEBUG 6812 --- [main] org.hibernate.SQL                        : alter table loans modify column status enum ('ACTIVE','OVERDUE','RETURNED') not null
2025-11-15T17:48:06.174+07:00 DEBUG 6812 --- [main] org.hibernate.SQL                        : alter table reservations modify column status enum ('ACTIVE','CANCELLED','EXPIRED','FULFILLED') not null
2025-11-15T17:48:06.257+07:00  INFO 6812 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-15T17:48:06.773+07:00  INFO 6812 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-15T17:48:07.607+07:00 DEBUG 6812 --- [main] c.i.lms.configuration.JwtRequestFilter   : Filter 'jwtRequestFilter' configured for use
2025-11-15T17:48:09.242+07:00  INFO 6812 --- [main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-11-15T17:48:09.242+07:00  WARN 6812 --- [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-11-15T17:48:10.121+07:00 DEBUG 6812 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 43 mappings in 'requestMappingHandlerMapping'
2025-11-15T17:48:10.204+07:00 DEBUG 6812 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-15T17:48:10.374+07:00 DEBUG 6812 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtRequestFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-15T17:48:10.688+07:00 DEBUG 6812 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-15T17:48:10.767+07:00 DEBUG 6812 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-15T17:48:10.984+07:00  INFO 6812 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-15T17:48:11.016+07:00  INFO 6812 --- [main] c.i.lms.LibraryManagementApplication     : Started LibraryManagementApplication in 11.599 seconds (process running for 12.058)
2025-11-15T17:48:11.134+07:00 DEBUG 6812 --- [main] org.hibernate.SQL                        : select r1_0.role_id,r1_0.role_name from role r1_0 where r1_0.role_name=?
2025-11-15T17:48:11.173+07:00 DEBUG 6812 --- [main] org.hibernate.SQL                        : select r1_0.role_id,r1_0.role_name from role r1_0 where r1_0.role_name=?
2025-11-15T17:48:11.173+07:00 DEBUG 6812 --- [main] org.hibernate.SQL                        : select u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,u1_0.username from users u1_0 where u1_0.username=?
2025-11-15T17:48:11.316+07:00 DEBUG 6812 --- [main] org.hibernate.SQL                        : insert into users (email,name,password,username) values (?,?,?,?)
2025-11-15T17:48:11.342+07:00 DEBUG 6812 --- [main] org.hibernate.SQL                        : insert into user_role (user_id,role_id) values (?,?)
2025-11-15T17:48:11.359+07:00 DEBUG 6812 --- [main] org.hibernate.SQL                        : select u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,u1_0.username from users u1_0 where u1_0.username=?
2025-11-15T17:48:11.473+07:00 DEBUG 6812 --- [main] org.hibernate.SQL                        : insert into users (email,name,password,username) values (?,?,?,?)
2025-11-15T17:48:11.473+07:00 DEBUG 6812 --- [main] org.hibernate.SQL                        : insert into user_role (user_id,role_id) values (?,?)
2025-11-15T17:48:39.642+07:00  INFO 6812 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-15T17:48:39.643+07:00  INFO 6812 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-15T17:48:39.643+07:00 DEBUG 6812 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-11-15T17:48:39.643+07:00 DEBUG 6812 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-11-15T17:48:39.643+07:00 DEBUG 6812 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-11-15T17:48:39.643+07:00 DEBUG 6812 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@4d71f24b
2025-11-15T17:48:39.661+07:00 DEBUG 6812 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@2b7af38e
2025-11-15T17:48:39.661+07:00 DEBUG 6812 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-15T17:48:39.677+07:00  INFO 6812 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 34 ms
2025-11-15T17:48:40.040+07:00 DEBUG 6812 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/api/user/chat
2025-11-15T17:48:40.122+07:00 DEBUG 6812 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/api/user/chat
2025-11-15T17:48:40.523+07:00 DEBUG 6812 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:48:40.573+07:00 DEBUG 6812 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/api/user/chat
2025-11-15T17:48:40.590+07:00 DEBUG 6812 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/api/user/chat", parameters={}
2025-11-15T17:48:40.607+07:00 DEBUG 6812 --- [http-nio-8080-exec-3] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-11-15T17:48:40.623+07:00 DEBUG 6812 --- [http-nio-8080-exec-3] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2025-11-15T17:48:40.674+07:00 DEBUG 6812 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.ibizabroker.lms.controller.ApiExceptionHandler#handleOther(Exception)
2025-11-15T17:48:40.857+07:00 DEBUG 6812 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T17:48:40.857+07:00 DEBUG 6812 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{message= xy ra li khng mong mun t my ch.}]
2025-11-15T17:48:40.890+07:00 DEBUG 6812 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/api/user/chat.]
2025-11-15T17:48:40.906+07:00 DEBUG 6812 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 500 INTERNAL_SERVER_ERROR
2025-11-15T17:49:39.447+07:00 DEBUG 6812 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/api/public/books/newest
2025-11-15T17:49:39.455+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/api/public/books/newest
2025-11-15T17:49:39.465+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:49:39.475+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/api/public/books/newest
2025-11-15T17:49:39.476+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/api/public/books/newest", parameters={}
2025-11-15T17:49:39.479+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-11-15T17:49:39.485+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2025-11-15T17:49:39.489+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.ibizabroker.lms.controller.ApiExceptionHandler#handleOther(Exception)
2025-11-15T17:49:39.530+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T17:49:39.531+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{message= xy ra li khng mong mun t my ch.}]
2025-11-15T17:49:39.535+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/api/public/books/newest.]
2025-11-15T17:49:39.537+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 500 INTERNAL_SERVER_ERROR
2025-11-15T17:50:31.964+07:00 DEBUG 6812 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/user/chat
2025-11-15T17:50:31.964+07:00 ERROR 6812 --- [http-nio-8080-exec-5] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception

io.jsonwebtoken.security.SignatureException: JWT signature does not match locally computed signature. JWT validity cannot be asserted and should not be trusted.
	at io.jsonwebtoken.impl.DefaultJwtParser.verifySignature(DefaultJwtParser.java:340) ~[jjwt-impl-0.12.5.jar:0.12.5]
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:577) ~[jjwt-impl-0.12.5.jar:0.12.5]
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:362) ~[jjwt-impl-0.12.5.jar:0.12.5]
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:94) ~[jjwt-impl-0.12.5.jar:0.12.5]
	at io.jsonwebtoken.impl.io.AbstractParser.parse(AbstractParser.java:36) ~[jjwt-impl-0.12.5.jar:0.12.5]
	at io.jsonwebtoken.impl.io.AbstractParser.parse(AbstractParser.java:29) ~[jjwt-impl-0.12.5.jar:0.12.5]
	at io.jsonwebtoken.impl.DefaultJwtParser.parseSignedClaims(DefaultJwtParser.java:821) ~[jjwt-impl-0.12.5.jar:0.12.5]
	at com.ibizabroker.lms.util.JwtUtil.parseAllClaims(JwtUtil.java:75) ~[classes/:na]
	at com.ibizabroker.lms.util.JwtUtil.getClaim(JwtUtil.java:68) ~[classes/:na]
	at com.ibizabroker.lms.util.JwtUtil.getUsernameFromToken(JwtUtil.java:54) ~[classes/:na]
	at com.ibizabroker.lms.configuration.JwtRequestFilter.doFilterInternal(JwtRequestFilter.java:41) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319) ~[spring-security-config-6.5.6.jar:6.5.6]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240) ~[spring-security-config-6.5.6.jar:6.5.6]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-11-15T17:50:31.980+07:00 DEBUG 6812 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /error
2025-11-15T17:50:31.980+07:00 DEBUG 6812 --- [http-nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-15T17:50:31.980+07:00 DEBUG 6812 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /error
2025-11-15T17:50:31.980+07:00 DEBUG 6812 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for POST "/error", parameters={}
2025-11-15T17:50:31.980+07:00 DEBUG 6812 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-11-15T17:50:32.015+07:00 DEBUG 6812 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-15T17:50:32.018+07:00 DEBUG 6812 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Sat Nov 15 17:50:32 ICT 2025, status=500, error=Internal Server Error, path=/api/user/cha (truncated)...]
2025-11-15T17:50:32.051+07:00 DEBUG 6812 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 500
2025-11-15T17:50:43.603+07:00 DEBUG 6812 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/authenticate
2025-11-15T17:50:43.603+07:00 DEBUG 6812 --- [http-nio-8080-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-15T17:50:43.603+07:00 DEBUG 6812 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/authenticate
2025-11-15T17:50:43.603+07:00 DEBUG 6812 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/auth/authenticate", parameters={}
2025-11-15T17:50:43.603+07:00 DEBUG 6812 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.AuthController#authenticate(LoginRequest)
2025-11-15T17:50:43.651+07:00 DEBUG 6812 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest[username=testuser, password=password]]
2025-11-15T17:50:43.779+07:00 DEBUG 6812 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:50:43.966+07:00 DEBUG 6812 --- [http-nio-8080-exec-6] o.s.s.a.dao.DaoAuthenticationProvider    : Failed to find user 'testuser'
2025-11-15T17:50:43.966+07:00 DEBUG 6812 --- [http-nio-8080-exec-6] o.s.s.authentication.ProviderManager     : Authentication failed with provider DaoAuthenticationProvider since Bad credentials
2025-11-15T17:50:43.966+07:00 DEBUG 6812 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Found 'Content-Type:application/json' in response
2025-11-15T17:50:43.966+07:00 DEBUG 6812 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{message=Tn ng nhp hoc mt khu khng ng}]
2025-11-15T17:50:43.982+07:00 DEBUG 6812 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 401 UNAUTHORIZED
2025-11-15T17:51:00.581+07:00 DEBUG 6812 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/authenticate
2025-11-15T17:51:00.581+07:00 DEBUG 6812 --- [http-nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-15T17:51:00.581+07:00 DEBUG 6812 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/authenticate
2025-11-15T17:51:00.581+07:00 DEBUG 6812 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/auth/authenticate", parameters={}
2025-11-15T17:51:00.581+07:00 DEBUG 6812 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.AuthController#authenticate(LoginRequest)
2025-11-15T17:51:00.586+07:00 DEBUG 6812 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest[username=user, password=user123]]
2025-11-15T17:51:00.590+07:00 DEBUG 6812 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:51:00.687+07:00 DEBUG 6812 --- [http-nio-8080-exec-8] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-11-15T17:51:00.687+07:00 DEBUG 6812 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:51:00.723+07:00 DEBUG 6812 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json]
2025-11-15T17:51:00.727+07:00 DEBUG 6812 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse[token=eyJhbGciOiJIUzI1NiJ9.eyJ1c2VySWQiOjM3LCJyb2xlcyI6WyJST0xFX1VTRVIiXSwic3ViIjoidXN (truncated)...]
2025-11-15T17:51:00.735+07:00 DEBUG 6812 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-15T17:51:00.753+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/user/chat
2025-11-15T17:51:00.760+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:51:00.762+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/user/chat
2025-11-15T17:51:00.762+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : POST "/api/user/chat", parameters={}
2025-11-15T17:51:00.769+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.ChatbotController#ask(ChatRequestDto)
2025-11-15T17:51:00.779+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [com.ibizabroker.lms.dto.ChatRequestDto@24732f06]
2025-11-15T17:51:00.807+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public reactor.core.publisher.Mono com.ibizabroker.lms.controller.ChatbotController.ask(com.ibizabroker.lms.dto.ChatRequestDto); target is of class [com.ibizabroker.lms.controller.ChatbotController]
2025-11-15T17:51:00.841+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public reactor.core.publisher.Mono com.ibizabroker.lms.controller.ChatbotController.ask(com.ibizabroker.lms.dto.ChatRequestDto); target is of class [com.ibizabroker.lms.controller.ChatbotController]
2025-11-15T17:51:00.845+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select b1_0.id,b1_0.cover_url,b1_0.isbn,b1_0.name,b1_0.number_of_copies_available,b1_0.published_year from books b1_0
2025-11-15T17:51:00.862+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:00.866+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:00.869+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:00.872+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:00.876+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:00.879+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:00.879+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:00.885+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:00.889+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:00.894+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:00.898+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:00.902+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:00.905+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:00.909+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:00.912+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:00.915+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:00.918+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:00.922+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:00.924+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:00.930+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:00.934+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:00.936+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:00.941+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:00.941+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:00.941+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:00.951+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:00.954+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:00.958+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:00.962+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:00.965+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:00.968+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:00.973+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:00.980+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:00.980+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:00.987+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:00.991+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:00.995+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:00.995+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.003+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.008+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.013+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.013+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.019+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.023+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.028+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.030+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.030+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.038+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.041+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.045+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.049+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.052+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.055+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.059+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.063+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.066+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.068+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.071+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.074+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.079+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.082+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.084+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.087+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.091+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.095+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.099+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.102+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.104+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.108+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.112+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.114+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.118+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.121+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.126+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.130+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.133+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.136+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.139+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.142+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.145+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.150+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.155+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.157+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.161+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.163+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.166+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.168+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.170+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.174+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.178+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.182+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.188+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.255+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : SELECT * FROM chat_messages WHERE conversation_id = ? ORDER BY created_at DESC LIMIT 5
2025-11-15T17:51:01.271+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select b1_0.id,b1_0.cover_url,b1_0.isbn,b1_0.name,b1_0.number_of_copies_available,b1_0.published_year from books b1_0
2025-11-15T17:51:01.277+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.285+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.289+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.294+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.299+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.304+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.311+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.314+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.319+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.324+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.328+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.331+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.333+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.340+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.347+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.351+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.353+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.358+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.362+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.364+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.366+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.368+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.370+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.373+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.377+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.379+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.382+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.384+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.385+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.387+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.391+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.394+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.397+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.400+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.403+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.406+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.412+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.416+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.418+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.422+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.429+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.431+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.440+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.447+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.454+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.459+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.465+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.470+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.477+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.481+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.487+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.493+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.498+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.502+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.506+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.511+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.516+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.521+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.529+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.529+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.543+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.548+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.554+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.564+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.571+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.579+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.585+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.591+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.597+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.607+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.618+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.797+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.814+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.828+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.839+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.846+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.862+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.869+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.888+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.901+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.909+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.928+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.937+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.943+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.951+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.955+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.961+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.968+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.972+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.976+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:01.984+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:01.986+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:02.160+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] o.s.w.r.f.client.ExchangeFunctions       : [71bf3157] HTTP POST https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=AIzaSyAWQ-HL34H2YSZfejB2s-RB8Oq_H_uQvvE
2025-11-15T17:51:02.479+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] o.s.w.c.request.async.WebAsyncManager    : Started async request for "/api/user/chat"
2025-11-15T17:51:02.479+07:00 DEBUG 6812 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Exiting but response remains open for further handling
2025-11-15T17:51:03.015+07:00 DEBUG 6812 --- [reactor-http-nio-2] org.springframework.web.HttpLogging      : [71bf3157] Encoding [{contents=[Ljava.lang.Object;@40b851a7}]
2025-11-15T17:51:03.270+07:00 DEBUG 6812 --- [reactor-http-nio-2] o.s.w.r.f.client.ExchangeFunctions       : [71bf3157] [94e1626b-1] Response 404 NOT_FOUND
2025-11-15T17:51:03.293+07:00 DEBUG 6812 --- [reactor-http-nio-2] org.springframework.web.HttpLogging      : [71bf3157] [94e1626b-1] Read 259 bytes
2025-11-15T17:51:03.330+07:00 ERROR 6812 --- [reactor-http-nio-2] c.i.lms.controller.ChatbotController     : Chatbot API error: 

org.springframework.web.reactive.function.client.WebClientResponseException$NotFound: 404 Not Found from POST https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent
	at org.springframework.web.reactive.function.client.WebClientResponseException.create(WebClientResponseException.java:324) ~[spring-webflux-6.2.12.jar:6.2.12]
	Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: 
Error has been observed at the following site(s):
	*__checkpoint  404 NOT_FOUND from POST https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent [DefaultWebClient]
Original Stack Trace:
		at org.springframework.web.reactive.function.client.WebClientResponseException.create(WebClientResponseException.java:324) ~[spring-webflux-6.2.12.jar:6.2.12]
		at org.springframework.web.reactive.function.client.DefaultClientResponse.lambda$createException$1(DefaultClientResponse.java:214) ~[spring-webflux-6.2.12.jar:6.2.12]
		at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:106) ~[reactor-core-3.7.12.jar:3.7.12]
		at reactor.core.publisher.FluxOnErrorReturn$ReturnSubscriber.onNext(FluxOnErrorReturn.java:162) ~[reactor-core-3.7.12.jar:3.7.12]
		at reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.onNext(FluxDefaultIfEmpty.java:122) ~[reactor-core-3.7.12.jar:3.7.12]
		at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129) ~[reactor-core-3.7.12.jar:3.7.12]
		at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onNext(FluxContextWrite.java:107) ~[reactor-core-3.7.12.jar:3.7.12]
		at reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onNext(FluxMapFuseable.java:299) ~[reactor-core-3.7.12.jar:3.7.12]
		at reactor.core.publisher.FluxFilterFuseable$FilterFuseableConditionalSubscriber.onNext(FluxFilterFuseable.java:337) ~[reactor-core-3.7.12.jar:3.7.12]
		at reactor.core.publisher.Operators$BaseFluxToMonoOperator.completePossiblyEmpty(Operators.java:2096) ~[reactor-core-3.7.12.jar:3.7.12]
		at reactor.core.publisher.MonoCollect$CollectSubscriber.onComplete(MonoCollect.java:145) ~[reactor-core-3.7.12.jar:3.7.12]
		at reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144) ~[reactor-core-3.7.12.jar:3.7.12]
		at reactor.core.publisher.FluxPeek$PeekSubscriber.onComplete(FluxPeek.java:260) ~[reactor-core-3.7.12.jar:3.7.12]
		at reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144) ~[reactor-core-3.7.12.jar:3.7.12]
		at reactor.netty.channel.FluxReceive.onInboundComplete(FluxReceive.java:413) ~[reactor-netty-core-1.2.11.jar:1.2.11]
		at reactor.netty.channel.ChannelOperations.onInboundComplete(ChannelOperations.java:464) ~[reactor-netty-core-1.2.11.jar:1.2.11]
		at reactor.netty.channel.ChannelOperations.terminate(ChannelOperations.java:518) ~[reactor-netty-core-1.2.11.jar:1.2.11]
		at reactor.netty.http.client.HttpClientOperations.onInboundNext(HttpClientOperations.java:925) ~[reactor-netty-http-1.2.11.jar:1.2.11]
		at reactor.netty.channel.ChannelOperationsHandler.channelRead(ChannelOperationsHandler.java:115) ~[reactor-netty-core-1.2.11.jar:1.2.11]
		at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.handler.codec.http.HttpContentDecoder.decode(HttpContentDecoder.java:181) ~[netty-codec-http-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.handler.codec.http.HttpContentDecoder.decode(HttpContentDecoder.java:48) ~[netty-codec-http-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:91) ~[netty-codec-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:436) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:346) ~[netty-codec-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:318) ~[netty-codec-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:251) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1519) ~[netty-handler-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1377) ~[netty-handler-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1428) ~[netty-handler-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:530) ~[netty-codec-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:469) ~[netty-codec-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290) ~[netty-codec-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1357) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:868) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:796) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:732) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:658) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:998) ~[netty-common-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.128.Final.jar:4.1.128.Final]
		at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-11-15T17:51:03.332+07:00 DEBUG 6812 --- [reactor-http-nio-2] o.s.w.c.request.async.WebAsyncManager    : Async result set for "/api/user/chat"
2025-11-15T17:51:03.337+07:00 DEBUG 6812 --- [reactor-http-nio-2] o.s.w.c.request.async.WebAsyncManager    : Performing async dispatch for "/api/user/chat"
2025-11-15T17:51:03.339+07:00 DEBUG 6812 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/user/chat
2025-11-15T17:51:03.339+07:00 DEBUG 6812 --- [http-nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-15T17:51:03.345+07:00 DEBUG 6812 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /error
2025-11-15T17:51:03.346+07:00 DEBUG 6812 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /error
2025-11-15T17:51:03.347+07:00 DEBUG 6812 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for POST "/error", parameters={}
2025-11-15T17:51:03.348+07:00 DEBUG 6812 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-11-15T17:51:03.350+07:00 DEBUG 6812 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-15T17:51:03.350+07:00 DEBUG 6812 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Sat Nov 15 17:51:03 ICT 2025, status=401, error=Unauthorized, path=/api/user/chat}]
2025-11-15T17:51:03.351+07:00 DEBUG 6812 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 401
2025-11-15T17:51:03.351+07:00 DEBUG 6812 --- [http-nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-15T17:51:03.354+07:00 DEBUG 6812 --- [http-nio-8080-exec-1] o.s.w.c.request.async.WebAsyncManager    : Servlet container error notification for "/api/user/chat"
2025-11-15T17:51:40.495+07:00 DEBUG 6812 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/user/chat
2025-11-15T17:51:40.502+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/user/chat
2025-11-15T17:51:40.509+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:51:40.558+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/user/chat
2025-11-15T17:51:40.558+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : POST "/api/user/chat", parameters={}
2025-11-15T17:51:40.570+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.ChatbotController#ask(ChatRequestDto)
2025-11-15T17:51:40.578+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [com.ibizabroker.lms.dto.ChatRequestDto@694e376a]
2025-11-15T17:51:40.590+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public reactor.core.publisher.Mono com.ibizabroker.lms.controller.ChatbotController.ask(com.ibizabroker.lms.dto.ChatRequestDto); target is of class [com.ibizabroker.lms.controller.ChatbotController]
2025-11-15T17:51:40.590+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public reactor.core.publisher.Mono com.ibizabroker.lms.controller.ChatbotController.ask(com.ibizabroker.lms.dto.ChatRequestDto); target is of class [com.ibizabroker.lms.controller.ChatbotController]
2025-11-15T17:51:40.590+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select b1_0.id,b1_0.cover_url,b1_0.isbn,b1_0.name,b1_0.number_of_copies_available,b1_0.published_year from books b1_0
2025-11-15T17:51:40.624+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:40.624+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:40.640+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:40.640+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:40.640+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:40.657+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:40.657+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:40.657+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:40.673+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:40.673+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:40.673+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:40.687+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:40.690+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:40.690+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:40.708+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:40.708+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:40.721+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:40.737+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:40.752+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:40.759+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:40.776+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:40.776+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:40.786+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:40.787+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:40.787+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:40.787+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:40.802+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:40.809+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:40.809+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:40.809+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:40.820+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:40.826+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:40.826+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:40.826+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:40.837+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:40.837+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:40.853+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:40.859+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:40.859+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:40.876+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:40.876+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:40.888+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:40.893+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:40.893+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:40.905+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:40.909+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:40.920+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:40.920+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:40.920+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:40.942+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:40.955+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:40.988+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.019+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.026+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.038+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.054+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.070+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.087+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.087+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.087+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.103+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.104+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.104+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.104+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.120+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.126+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.126+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.137+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.137+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.137+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.159+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.159+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.176+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.176+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.176+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.188+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.193+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.193+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.193+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.204+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.209+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.209+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.221+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.221+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.221+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.221+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.236+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.243+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.243+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.243+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.253+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.253+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.253+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : SELECT * FROM chat_messages WHERE conversation_id = ? ORDER BY created_at DESC LIMIT 5
2025-11-15T17:51:41.276+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select b1_0.id,b1_0.cover_url,b1_0.isbn,b1_0.name,b1_0.number_of_copies_available,b1_0.published_year from books b1_0
2025-11-15T17:51:41.287+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.306+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.308+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.308+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.308+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.321+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.373+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.406+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.418+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.457+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.488+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.576+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.603+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.619+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.633+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.645+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.653+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.662+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.670+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.675+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.675+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.688+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.692+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.695+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.701+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.709+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.713+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.715+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.727+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.740+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.750+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.757+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.763+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.771+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.774+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.779+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.787+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.793+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.794+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.794+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.804+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.807+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.810+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.815+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.815+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.821+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.828+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.828+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.838+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.842+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.844+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.844+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.856+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.860+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.864+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.873+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.877+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.880+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.880+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.888+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.891+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.894+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.894+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.906+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.910+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.911+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.919+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.921+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.925+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.927+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.936+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.939+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.943+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.943+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.943+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.955+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.958+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.961+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.964+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:41.976+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:41.990+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:42.005+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:42.025+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:42.025+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:42.042+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:42.049+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:42.054+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:42.059+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:42.059+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:42.059+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:42.070+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.book_id,c1_1.id,c1_1.name from book_categories c1_0 join categories c1_1 on c1_1.id=c1_0.category_id where c1_0.book_id=?
2025-11-15T17:51:42.070+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.book_id,a1_1.id,a1_1.name from book_authors a1_0 join authors a1_1 on a1_1.id=a1_0.author_id where a1_0.book_id=?
2025-11-15T17:51:42.104+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] o.s.w.r.f.client.ExchangeFunctions       : [20f83bbc] HTTP POST https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=AIzaSyAWQ-HL34H2YSZfejB2s-RB8Oq_H_uQvvE
2025-11-15T17:51:42.109+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] o.s.w.c.request.async.WebAsyncManager    : Started async request for "/api/user/chat"
2025-11-15T17:51:42.109+07:00 DEBUG 6812 --- [reactor-http-nio-2] org.springframework.web.HttpLogging      : [20f83bbc] Encoding [{contents=[Ljava.lang.Object;@42c5f90e}]
2025-11-15T17:51:42.109+07:00 DEBUG 6812 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Exiting but response remains open for further handling
2025-11-15T17:51:42.188+07:00 DEBUG 6812 --- [reactor-http-nio-2] o.s.w.r.f.client.ExchangeFunctions       : [20f83bbc] [94e1626b-2] Response 404 NOT_FOUND
2025-11-15T17:51:42.224+07:00 DEBUG 6812 --- [reactor-http-nio-2] org.springframework.web.HttpLogging      : [20f83bbc] [94e1626b-2] Read 259 bytes
2025-11-15T17:51:42.260+07:00 ERROR 6812 --- [reactor-http-nio-2] c.i.lms.controller.ChatbotController     : Chatbot API error: 

org.springframework.web.reactive.function.client.WebClientResponseException$NotFound: 404 Not Found from POST https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent
	at org.springframework.web.reactive.function.client.WebClientResponseException.create(WebClientResponseException.java:324) ~[spring-webflux-6.2.12.jar:6.2.12]
	Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: 
Error has been observed at the following site(s):
	*__checkpoint  404 NOT_FOUND from POST https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent [DefaultWebClient]
Original Stack Trace:
		at org.springframework.web.reactive.function.client.WebClientResponseException.create(WebClientResponseException.java:324) ~[spring-webflux-6.2.12.jar:6.2.12]
		at org.springframework.web.reactive.function.client.DefaultClientResponse.lambda$createException$1(DefaultClientResponse.java:214) ~[spring-webflux-6.2.12.jar:6.2.12]
		at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:106) ~[reactor-core-3.7.12.jar:3.7.12]
		at reactor.core.publisher.FluxOnErrorReturn$ReturnSubscriber.onNext(FluxOnErrorReturn.java:162) ~[reactor-core-3.7.12.jar:3.7.12]
		at reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.onNext(FluxDefaultIfEmpty.java:122) ~[reactor-core-3.7.12.jar:3.7.12]
		at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129) ~[reactor-core-3.7.12.jar:3.7.12]
		at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onNext(FluxContextWrite.java:107) ~[reactor-core-3.7.12.jar:3.7.12]
		at reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onNext(FluxMapFuseable.java:299) ~[reactor-core-3.7.12.jar:3.7.12]
		at reactor.core.publisher.FluxFilterFuseable$FilterFuseableConditionalSubscriber.onNext(FluxFilterFuseable.java:337) ~[reactor-core-3.7.12.jar:3.7.12]
		at reactor.core.publisher.Operators$BaseFluxToMonoOperator.completePossiblyEmpty(Operators.java:2096) ~[reactor-core-3.7.12.jar:3.7.12]
		at reactor.core.publisher.MonoCollect$CollectSubscriber.onComplete(MonoCollect.java:145) ~[reactor-core-3.7.12.jar:3.7.12]
		at reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144) ~[reactor-core-3.7.12.jar:3.7.12]
		at reactor.core.publisher.FluxPeek$PeekSubscriber.onComplete(FluxPeek.java:260) ~[reactor-core-3.7.12.jar:3.7.12]
		at reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144) ~[reactor-core-3.7.12.jar:3.7.12]
		at reactor.netty.channel.FluxReceive.onInboundComplete(FluxReceive.java:413) ~[reactor-netty-core-1.2.11.jar:1.2.11]
		at reactor.netty.channel.ChannelOperations.onInboundComplete(ChannelOperations.java:464) ~[reactor-netty-core-1.2.11.jar:1.2.11]
		at reactor.netty.channel.ChannelOperations.terminate(ChannelOperations.java:518) ~[reactor-netty-core-1.2.11.jar:1.2.11]
		at reactor.netty.http.client.HttpClientOperations.onInboundNext(HttpClientOperations.java:925) ~[reactor-netty-http-1.2.11.jar:1.2.11]
		at reactor.netty.channel.ChannelOperationsHandler.channelRead(ChannelOperationsHandler.java:115) ~[reactor-netty-core-1.2.11.jar:1.2.11]
		at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.handler.codec.http.HttpContentDecoder.decode(HttpContentDecoder.java:181) ~[netty-codec-http-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.handler.codec.http.HttpContentDecoder.decode(HttpContentDecoder.java:48) ~[netty-codec-http-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:91) ~[netty-codec-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:436) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:346) ~[netty-codec-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:318) ~[netty-codec-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:251) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1519) ~[netty-handler-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1377) ~[netty-handler-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1428) ~[netty-handler-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:530) ~[netty-codec-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:469) ~[netty-codec-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290) ~[netty-codec-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1357) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:868) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:796) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:732) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:658) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:998) ~[netty-common-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.128.Final.jar:4.1.128.Final]
		at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-11-15T17:51:42.289+07:00 DEBUG 6812 --- [reactor-http-nio-2] o.s.w.c.request.async.WebAsyncManager    : Async result set for "/api/user/chat"
2025-11-15T17:51:42.304+07:00 DEBUG 6812 --- [reactor-http-nio-2] o.s.w.c.request.async.WebAsyncManager    : Performing async dispatch for "/api/user/chat"
2025-11-15T17:51:42.320+07:00 DEBUG 6812 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/user/chat
2025-11-15T17:51:42.326+07:00 DEBUG 6812 --- [http-nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-15T17:51:42.356+07:00 DEBUG 6812 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /error
2025-11-15T17:51:42.370+07:00 DEBUG 6812 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /error
2025-11-15T17:51:42.376+07:00 DEBUG 6812 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for POST "/error", parameters={}
2025-11-15T17:51:42.387+07:00 DEBUG 6812 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-11-15T17:51:42.426+07:00 DEBUG 6812 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T17:51:42.442+07:00 DEBUG 6812 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Sat Nov 15 17:51:42 ICT 2025, status=401, error=Unauthorized, path=/api/user/chat}]
2025-11-15T17:51:42.459+07:00 DEBUG 6812 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 401
2025-11-15T17:51:42.469+07:00 DEBUG 6812 --- [http-nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-15T17:51:42.472+07:00 DEBUG 6812 --- [http-nio-8080-exec-5] o.s.w.c.request.async.WebAsyncManager    : Servlet container error notification for "/api/user/chat"
2025-11-15T17:54:57.503+07:00 DEBUG 6812 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/api/auth/authenticate
2025-11-15T17:54:57.514+07:00 DEBUG 6812 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/api/auth/authenticate
2025-11-15T17:54:57.649+07:00 DEBUG 6812 --- [http-nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-15T17:54:57.732+07:00 DEBUG 6812 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /error
2025-11-15T17:54:57.745+07:00 DEBUG 6812 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /error
2025-11-15T17:54:57.793+07:00 DEBUG 6812 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for POST "/error", parameters={}
2025-11-15T17:54:57.817+07:00 DEBUG 6812 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-11-15T17:54:57.850+07:00 DEBUG 6812 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T17:54:57.866+07:00 DEBUG 6812 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Sat Nov 15 17:54:57 ICT 2025, status=401, error=Unauthorized, path=/api/api/auth/authenti (truncated)...]
2025-11-15T17:54:57.883+07:00 DEBUG 6812 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 401
2025-11-15T17:54:57.899+07:00 DEBUG 6812 --- [http-nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-15T17:55:47.142+07:00  INFO 20144 --- [main] c.i.lms.LibraryManagementApplication     : Starting LibraryManagementApplication using Java 21.0.8 with PID 20144 (C:\Users\Admin\library-management-system\lms-backend\target\classes started by Admin in C:\Users\Admin\library-management-system\lms-backend)
2025-11-15T17:55:47.142+07:00 DEBUG 20144 --- [main] c.i.lms.LibraryManagementApplication     : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-15T17:55:47.142+07:00  INFO 20144 --- [main] c.i.lms.LibraryManagementApplication     : No active profile set, falling back to 1 default profile: "default"
2025-11-15T17:55:48.746+07:00  INFO 20144 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-15T17:55:49.184+07:00  INFO 20144 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 422 ms. Found 9 JPA repository interfaces.
2025-11-15T17:55:50.153+07:00  INFO 20144 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-15T17:55:50.167+07:00  INFO 20144 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-15T17:55:50.168+07:00  INFO 20144 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-15T17:55:50.368+07:00  INFO 20144 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-15T17:55:50.368+07:00  INFO 20144 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3123 ms
2025-11-15T17:55:50.598+07:00  INFO 20144 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-15T17:55:50.683+07:00  INFO 20144 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-15T17:55:50.751+07:00  INFO 20144 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-15T17:55:51.101+07:00  INFO 20144 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-15T17:55:51.155+07:00  INFO 20144 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-15T17:55:51.397+07:00  INFO 20144 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@13374ca6
2025-11-15T17:55:51.399+07:00  INFO 20144 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-15T17:55:51.477+07:00  WARN 20144 --- [main] org.hibernate.dialect.Dialect            : HHH000511: The 5.5.5 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-11-15T17:55:51.484+07:00  WARN 20144 --- [main] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-15T17:55:51.528+07:00  INFO 20144 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 5.5.5
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-15T17:55:53.292+07:00  INFO 20144 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-15T17:55:53.562+07:00 DEBUG 20144 --- [main] org.hibernate.SQL                        : alter table loans modify column status enum ('ACTIVE','OVERDUE','RETURNED') not null
2025-11-15T17:55:53.578+07:00 DEBUG 20144 --- [main] org.hibernate.SQL                        : alter table reservations modify column status enum ('ACTIVE','CANCELLED','EXPIRED','FULFILLED') not null
2025-11-15T17:55:53.738+07:00  INFO 20144 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-15T17:55:54.054+07:00  INFO 20144 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-15T17:55:54.815+07:00 DEBUG 20144 --- [main] c.i.lms.configuration.JwtRequestFilter   : Filter 'jwtRequestFilter' configured for use
2025-11-15T17:55:56.365+07:00  INFO 20144 --- [main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-11-15T17:55:56.365+07:00  WARN 20144 --- [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-11-15T17:55:57.490+07:00 DEBUG 20144 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 43 mappings in 'requestMappingHandlerMapping'
2025-11-15T17:55:57.558+07:00 DEBUG 20144 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-15T17:55:57.753+07:00 DEBUG 20144 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtRequestFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-15T17:55:57.912+07:00 DEBUG 20144 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-15T17:55:58.026+07:00 DEBUG 20144 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-15T17:56:00.406+07:00  WARN 20144 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
2025-11-15T17:56:00.415+07:00  INFO 20144 --- [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-15T17:56:00.419+07:00  INFO 20144 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-15T17:56:00.429+07:00  INFO 20144 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-15T17:56:00.457+07:00  INFO 20144 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-15T17:56:00.489+07:00 ERROR 20144 --- [main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8080 was already in use.

Action:

Identify and stop the process that's listening on port 8080 or configure this application to listen on another port.

2025-11-15T17:56:19.112+07:00  INFO 3312 --- [main] c.i.lms.LibraryManagementApplication     : Starting LibraryManagementApplication using Java 21.0.8 with PID 3312 (C:\Users\Admin\library-management-system\lms-backend\target\classes started by Admin in C:\Users\Admin\library-management-system\lms-backend)
2025-11-15T17:56:19.114+07:00 DEBUG 3312 --- [main] c.i.lms.LibraryManagementApplication     : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-15T17:56:19.115+07:00  INFO 3312 --- [main] c.i.lms.LibraryManagementApplication     : No active profile set, falling back to 1 default profile: "default"
2025-11-15T17:56:20.186+07:00  INFO 3312 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-15T17:56:20.394+07:00  INFO 3312 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 195 ms. Found 9 JPA repository interfaces.
2025-11-15T17:56:21.303+07:00  INFO 3312 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-15T17:56:21.333+07:00  INFO 3312 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-15T17:56:21.333+07:00  INFO 3312 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-15T17:56:21.474+07:00  INFO 3312 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-15T17:56:21.474+07:00  INFO 3312 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2283 ms
2025-11-15T17:56:21.671+07:00  INFO 3312 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-15T17:56:21.724+07:00  INFO 3312 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-15T17:56:21.779+07:00  INFO 3312 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-15T17:56:22.049+07:00  INFO 3312 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-15T17:56:22.098+07:00  INFO 3312 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-15T17:56:22.418+07:00  INFO 3312 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@511d5e6e
2025-11-15T17:56:22.418+07:00  INFO 3312 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-15T17:56:22.475+07:00  WARN 3312 --- [main] org.hibernate.dialect.Dialect            : HHH000511: The 5.5.5 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-11-15T17:56:22.475+07:00  WARN 3312 --- [main] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-15T17:56:22.511+07:00  INFO 3312 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 5.5.5
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-15T17:56:23.977+07:00  INFO 3312 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-15T17:56:24.238+07:00 DEBUG 3312 --- [main] org.hibernate.SQL                        : alter table loans modify column status enum ('ACTIVE','OVERDUE','RETURNED') not null
2025-11-15T17:56:24.238+07:00 DEBUG 3312 --- [main] org.hibernate.SQL                        : alter table reservations modify column status enum ('ACTIVE','CANCELLED','EXPIRED','FULFILLED') not null
2025-11-15T17:56:24.315+07:00  INFO 3312 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-15T17:56:24.683+07:00  INFO 3312 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-15T17:56:25.427+07:00 DEBUG 3312 --- [main] c.i.lms.configuration.JwtRequestFilter   : Filter 'jwtRequestFilter' configured for use
2025-11-15T17:56:26.817+07:00  INFO 3312 --- [main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-11-15T17:56:26.817+07:00  WARN 3312 --- [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-11-15T17:56:27.694+07:00 DEBUG 3312 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 43 mappings in 'requestMappingHandlerMapping'
2025-11-15T17:56:27.758+07:00 DEBUG 3312 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-15T17:56:27.952+07:00 DEBUG 3312 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtRequestFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-15T17:56:28.121+07:00 DEBUG 3312 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-15T17:56:28.177+07:00 DEBUG 3312 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-15T17:56:28.413+07:00  INFO 3312 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-15T17:56:28.429+07:00  INFO 3312 --- [main] c.i.lms.LibraryManagementApplication     : Started LibraryManagementApplication in 9.94 seconds (process running for 10.478)
2025-11-15T17:56:28.591+07:00 DEBUG 3312 --- [main] org.hibernate.SQL                        : select r1_0.role_id,r1_0.role_name from role r1_0 where r1_0.role_name=?
2025-11-15T17:56:28.665+07:00 DEBUG 3312 --- [main] org.hibernate.SQL                        : select r1_0.role_id,r1_0.role_name from role r1_0 where r1_0.role_name=?
2025-11-15T17:56:28.700+07:00 DEBUG 3312 --- [main] org.hibernate.SQL                        : select u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,u1_0.username from users u1_0 where u1_0.username=?
2025-11-15T17:56:28.885+07:00 DEBUG 3312 --- [main] org.hibernate.SQL                        : insert into users (email,name,password,username) values (?,?,?,?)
2025-11-15T17:56:28.908+07:00 DEBUG 3312 --- [main] org.hibernate.SQL                        : insert into user_role (user_id,role_id) values (?,?)
2025-11-15T17:56:28.922+07:00 DEBUG 3312 --- [main] org.hibernate.SQL                        : select u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,u1_0.username from users u1_0 where u1_0.username=?
2025-11-15T17:56:29.091+07:00 DEBUG 3312 --- [main] org.hibernate.SQL                        : insert into users (email,name,password,username) values (?,?,?,?)
2025-11-15T17:56:29.091+07:00 DEBUG 3312 --- [main] org.hibernate.SQL                        : insert into user_role (user_id,role_id) values (?,?)
2025-11-15T17:56:33.983+07:00  INFO 3312 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-15T17:56:33.983+07:00  INFO 3312 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-15T17:56:33.983+07:00 DEBUG 3312 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-11-15T17:56:33.983+07:00 DEBUG 3312 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-11-15T17:56:33.983+07:00 DEBUG 3312 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-11-15T17:56:33.983+07:00 DEBUG 3312 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@16e31425
2025-11-15T17:56:33.998+07:00 DEBUG 3312 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@2cca9ab9
2025-11-15T17:56:34.000+07:00 DEBUG 3312 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-15T17:56:34.001+07:00  INFO 3312 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 18 ms
2025-11-15T17:56:34.069+07:00 DEBUG 3312 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/api/auth/authenticate
2025-11-15T17:56:34.141+07:00 DEBUG 3312 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/api/auth/authenticate
2025-11-15T17:56:34.149+07:00 DEBUG 3312 --- [http-nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-15T17:56:34.164+07:00 DEBUG 3312 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /error
2025-11-15T17:56:34.164+07:00 DEBUG 3312 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /error
2025-11-15T17:56:34.175+07:00 DEBUG 3312 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for POST "/error", parameters={}
2025-11-15T17:56:34.175+07:00 DEBUG 3312 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-11-15T17:56:34.243+07:00 DEBUG 3312 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T17:56:34.248+07:00 DEBUG 3312 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Sat Nov 15 17:56:34 ICT 2025, status=401, error=Unauthorized, path=/api/api/auth/authenti (truncated)...]
2025-11-15T17:56:34.348+07:00 DEBUG 3312 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 401
2025-11-15T17:56:34.348+07:00 DEBUG 3312 --- [http-nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-15T17:56:43.406+07:00 DEBUG 3312 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/api/auth/authenticate
2025-11-15T17:56:43.413+07:00 DEBUG 3312 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/api/auth/authenticate
2025-11-15T17:56:43.414+07:00 DEBUG 3312 --- [http-nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-15T17:56:43.414+07:00 DEBUG 3312 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /error
2025-11-15T17:56:43.424+07:00 DEBUG 3312 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /error
2025-11-15T17:56:43.425+07:00 DEBUG 3312 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for POST "/error", parameters={}
2025-11-15T17:56:43.427+07:00 DEBUG 3312 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-11-15T17:56:43.429+07:00 DEBUG 3312 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T17:56:43.431+07:00 DEBUG 3312 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Sat Nov 15 17:56:43 ICT 2025, status=401, error=Unauthorized, path=/api/api/auth/authenti (truncated)...]
2025-11-15T17:56:43.434+07:00 DEBUG 3312 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 401
2025-11-15T17:56:43.435+07:00 DEBUG 3312 --- [http-nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-15T17:58:21.172+07:00  INFO 5004 --- [main] c.i.lms.LibraryManagementApplication     : Starting LibraryManagementApplication using Java 21.0.8 with PID 5004 (C:\Users\Admin\library-management-system\lms-backend\target\classes started by Admin in C:\Users\Admin\library-management-system\lms-backend)
2025-11-15T17:58:21.185+07:00 DEBUG 5004 --- [main] c.i.lms.LibraryManagementApplication     : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-15T17:58:21.189+07:00  INFO 5004 --- [main] c.i.lms.LibraryManagementApplication     : No active profile set, falling back to 1 default profile: "default"
2025-11-15T17:58:22.720+07:00  INFO 5004 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-15T17:58:23.045+07:00  INFO 5004 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 317 ms. Found 9 JPA repository interfaces.
2025-11-15T17:58:24.269+07:00  INFO 5004 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-15T17:58:24.318+07:00  INFO 5004 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-15T17:58:24.318+07:00  INFO 5004 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-15T17:58:24.464+07:00  INFO 5004 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-15T17:58:24.464+07:00  INFO 5004 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3139 ms
2025-11-15T17:58:24.736+07:00  INFO 5004 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-15T17:58:24.829+07:00  INFO 5004 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-15T17:58:24.924+07:00  INFO 5004 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-15T17:58:25.441+07:00  INFO 5004 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-15T17:58:25.481+07:00  INFO 5004 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-15T17:58:25.754+07:00  INFO 5004 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2382b2f
2025-11-15T17:58:25.759+07:00  INFO 5004 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-15T17:58:25.841+07:00  WARN 5004 --- [main] org.hibernate.dialect.Dialect            : HHH000511: The 5.5.5 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-11-15T17:58:25.849+07:00  WARN 5004 --- [main] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-15T17:58:25.891+07:00  INFO 5004 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 5.5.5
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-15T17:58:27.759+07:00  INFO 5004 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-15T17:58:28.233+07:00 DEBUG 5004 --- [main] org.hibernate.SQL                        : alter table loans modify column status enum ('ACTIVE','OVERDUE','RETURNED') not null
2025-11-15T17:58:28.244+07:00 DEBUG 5004 --- [main] org.hibernate.SQL                        : alter table reservations modify column status enum ('ACTIVE','CANCELLED','EXPIRED','FULFILLED') not null
2025-11-15T17:58:28.353+07:00  INFO 5004 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-15T17:58:28.653+07:00  INFO 5004 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-15T17:58:29.496+07:00 DEBUG 5004 --- [main] c.i.lms.configuration.JwtRequestFilter   : Filter 'jwtRequestFilter' configured for use
2025-11-15T17:58:31.122+07:00  INFO 5004 --- [main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-11-15T17:58:31.122+07:00  WARN 5004 --- [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-11-15T17:58:32.241+07:00 DEBUG 5004 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 43 mappings in 'requestMappingHandlerMapping'
2025-11-15T17:58:32.325+07:00 DEBUG 5004 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-15T17:58:32.624+07:00 DEBUG 5004 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtRequestFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-15T17:58:32.891+07:00 DEBUG 5004 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-15T17:58:32.980+07:00 DEBUG 5004 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-15T17:58:33.521+07:00  INFO 5004 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-15T17:58:33.543+07:00  INFO 5004 --- [main] c.i.lms.LibraryManagementApplication     : Started LibraryManagementApplication in 13.258 seconds (process running for 13.917)
2025-11-15T17:58:33.694+07:00 DEBUG 5004 --- [main] org.hibernate.SQL                        : select r1_0.role_id,r1_0.role_name from role r1_0 where r1_0.role_name=?
2025-11-15T17:58:33.755+07:00 DEBUG 5004 --- [main] org.hibernate.SQL                        : select r1_0.role_id,r1_0.role_name from role r1_0 where r1_0.role_name=?
2025-11-15T17:58:33.771+07:00 DEBUG 5004 --- [main] org.hibernate.SQL                        : select u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,u1_0.username from users u1_0 where u1_0.username=?
2025-11-15T17:58:33.971+07:00 DEBUG 5004 --- [main] org.hibernate.SQL                        : insert into users (email,name,password,username) values (?,?,?,?)
2025-11-15T17:58:34.021+07:00 DEBUG 5004 --- [main] org.hibernate.SQL                        : insert into user_role (user_id,role_id) values (?,?)
2025-11-15T17:58:34.035+07:00 DEBUG 5004 --- [main] org.hibernate.SQL                        : select u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,u1_0.username from users u1_0 where u1_0.username=?
2025-11-15T17:58:34.155+07:00 DEBUG 5004 --- [main] org.hibernate.SQL                        : insert into users (email,name,password,username) values (?,?,?,?)
2025-11-15T17:58:34.155+07:00 DEBUG 5004 --- [main] org.hibernate.SQL                        : insert into user_role (user_id,role_id) values (?,?)
2025-11-15T17:58:49.644+07:00  INFO 5004 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-15T17:58:49.660+07:00  INFO 5004 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-15T17:58:49.674+07:00 DEBUG 5004 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-11-15T17:58:49.680+07:00 DEBUG 5004 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-11-15T17:58:49.685+07:00 DEBUG 5004 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-11-15T17:58:49.699+07:00 DEBUG 5004 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@4682b468
2025-11-15T17:58:49.713+07:00 DEBUG 5004 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@29e4ad7a
2025-11-15T17:58:49.726+07:00 DEBUG 5004 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-15T17:58:49.731+07:00  INFO 5004 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 57 ms
2025-11-15T17:58:49.858+07:00 DEBUG 5004 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/auth/authenticate
2025-11-15T17:58:50.210+07:00 DEBUG 5004 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/authenticate
2025-11-15T17:58:50.221+07:00 DEBUG 5004 --- [http-nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-15T17:58:50.228+07:00 DEBUG 5004 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/authenticate
2025-11-15T17:58:50.240+07:00 DEBUG 5004 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/auth/authenticate", parameters={}
2025-11-15T17:58:50.246+07:00 DEBUG 5004 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.AuthController#authenticate(LoginRequest)
2025-11-15T17:58:50.594+07:00 DEBUG 5004 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest[username=user, password=user123]]
2025-11-15T17:58:51.070+07:00 DEBUG 5004 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:58:52.067+07:00 DEBUG 5004 --- [http-nio-8080-exec-3] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-11-15T17:58:52.167+07:00 DEBUG 5004 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:58:53.161+07:00 DEBUG 5004 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json]
2025-11-15T17:58:53.217+07:00 DEBUG 5004 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse[token=eyJhbGciOiJIUzI1NiJ9.eyJ1c2VySWQiOjQxLCJyb2xlcyI6WyJST0xFX1VTRVIiXSwic3ViIjoidXN (truncated)...]
2025-11-15T17:58:53.263+07:00 DEBUG 5004 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-15T17:58:53.321+07:00 DEBUG 5004 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/api/public/books/newest
2025-11-15T17:58:53.339+07:00 DEBUG 5004 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/api/public/books/newest
2025-11-15T17:58:53.660+07:00 DEBUG 5004 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:58:53.783+07:00 DEBUG 5004 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/api/public/books/newest
2025-11-15T17:58:53.813+07:00 DEBUG 5004 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/api/public/books/newest", parameters={}
2025-11-15T17:58:53.850+07:00 DEBUG 5004 --- [http-nio-8080-exec-4] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-11-15T17:58:53.926+07:00 DEBUG 5004 --- [http-nio-8080-exec-4] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2025-11-15T17:58:53.981+07:00 DEBUG 5004 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.ibizabroker.lms.controller.ApiExceptionHandler#handleOther(Exception)
2025-11-15T17:58:57.067+07:00 DEBUG 5004 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T17:58:57.083+07:00 DEBUG 5004 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{message= xy ra li khng mong mun t my ch.}]
2025-11-15T17:58:57.116+07:00 DEBUG 5004 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/api/public/books/newest.]
2025-11-15T17:58:57.149+07:00 DEBUG 5004 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 500 INTERNAL_SERVER_ERROR
2025-11-15T17:59:01.552+07:00 DEBUG 5004 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/api/public/books?availableOnly=true&page=0&size=10
2025-11-15T17:59:01.558+07:00 DEBUG 5004 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/api/public/books?availableOnly=false&page=0&size=1000
2025-11-15T17:59:01.594+07:00 DEBUG 5004 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/api/public/books?availableOnly=true&page=0&size=10
2025-11-15T17:59:01.608+07:00 DEBUG 5004 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/api/public/books?availableOnly=false&page=0&size=1000
2025-11-15T17:59:01.804+07:00 DEBUG 5004 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:59:01.897+07:00 DEBUG 5004 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:59:01.916+07:00 DEBUG 5004 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/api/public/books?availableOnly=true&page=0&size=10
2025-11-15T17:59:01.925+07:00 DEBUG 5004 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/api/public/books?availableOnly=true&page=0&size=10", parameters={masked}
2025-11-15T17:59:01.966+07:00 DEBUG 5004 --- [http-nio-8080-exec-5] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-11-15T17:59:01.979+07:00 DEBUG 5004 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/api/public/books?availableOnly=false&page=0&size=1000
2025-11-15T17:59:01.998+07:00 DEBUG 5004 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/api/public/books?availableOnly=false&page=0&size=1000", parameters={masked}
2025-11-15T17:59:02.046+07:00 DEBUG 5004 --- [http-nio-8080-exec-6] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-11-15T17:59:02.027+07:00 DEBUG 5004 --- [http-nio-8080-exec-5] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2025-11-15T17:59:02.060+07:00 DEBUG 5004 --- [http-nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.ibizabroker.lms.controller.ApiExceptionHandler#handleOther(Exception)
2025-11-15T17:59:02.056+07:00 DEBUG 5004 --- [http-nio-8080-exec-6] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2025-11-15T17:59:02.076+07:00 DEBUG 5004 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.ibizabroker.lms.controller.ApiExceptionHandler#handleOther(Exception)
2025-11-15T17:59:03.377+07:00 DEBUG 5004 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T17:59:03.412+07:00 DEBUG 5004 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{message= xy ra li khng mong mun t my ch.}]
2025-11-15T17:59:03.426+07:00 DEBUG 5004 --- [http-nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/api/public/books.]
2025-11-15T17:59:03.922+07:00 DEBUG 5004 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 500 INTERNAL_SERVER_ERROR
2025-11-15T17:59:03.984+07:00 DEBUG 5004 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T17:59:03.993+07:00 DEBUG 5004 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{message= xy ra li khng mong mun t my ch.}]
2025-11-15T17:59:04.006+07:00 DEBUG 5004 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/api/public/books.]
2025-11-15T17:59:04.020+07:00 DEBUG 5004 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 500 INTERNAL_SERVER_ERROR
2025-11-15T17:59:56.582+07:00 DEBUG 5004 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/api/public/books?availableOnly=true&page=0&size=10
2025-11-15T17:59:56.582+07:00 DEBUG 5004 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/api/public/books?availableOnly=false&page=0&size=1000
2025-11-15T17:59:56.611+07:00 DEBUG 5004 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/api/public/books?availableOnly=true&page=0&size=10
2025-11-15T17:59:56.597+07:00 DEBUG 5004 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/api/public/books?availableOnly=false&page=0&size=1000
2025-11-15T17:59:56.653+07:00 DEBUG 5004 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:59:56.670+07:00 DEBUG 5004 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T17:59:56.690+07:00 DEBUG 5004 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/api/public/books?availableOnly=false&page=0&size=1000
2025-11-15T17:59:56.694+07:00 DEBUG 5004 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/api/public/books?availableOnly=false&page=0&size=1000", parameters={masked}
2025-11-15T17:59:56.695+07:00 DEBUG 5004 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/api/public/books?availableOnly=true&page=0&size=10
2025-11-15T17:59:56.701+07:00 DEBUG 5004 --- [http-nio-8080-exec-10] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-11-15T17:59:56.709+07:00 DEBUG 5004 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/api/public/books?availableOnly=true&page=0&size=10", parameters={masked}
2025-11-15T17:59:56.716+07:00 DEBUG 5004 --- [http-nio-8080-exec-8] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-11-15T17:59:56.728+07:00 DEBUG 5004 --- [http-nio-8080-exec-10] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2025-11-15T17:59:56.727+07:00 DEBUG 5004 --- [http-nio-8080-exec-8] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2025-11-15T17:59:56.732+07:00 DEBUG 5004 --- [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.ibizabroker.lms.controller.ApiExceptionHandler#handleOther(Exception)
2025-11-15T17:59:56.732+07:00 DEBUG 5004 --- [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.ibizabroker.lms.controller.ApiExceptionHandler#handleOther(Exception)
2025-11-15T17:59:56.876+07:00 DEBUG 5004 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T17:59:56.892+07:00 DEBUG 5004 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{message= xy ra li khng mong mun t my ch.}]
2025-11-15T17:59:56.901+07:00 DEBUG 5004 --- [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/api/public/books.]
2025-11-15T17:59:56.912+07:00 DEBUG 5004 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 500 INTERNAL_SERVER_ERROR
2025-11-15T17:59:56.932+07:00 DEBUG 5004 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T17:59:56.934+07:00 DEBUG 5004 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{message= xy ra li khng mong mun t my ch.}]
2025-11-15T17:59:56.938+07:00 DEBUG 5004 --- [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/api/public/books.]
2025-11-15T17:59:56.939+07:00 DEBUG 5004 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 500 INTERNAL_SERVER_ERROR
2025-11-15T18:04:54.776+07:00  INFO 23332 --- [main] c.i.lms.LibraryManagementApplication     : Starting LibraryManagementApplication using Java 21.0.8 with PID 23332 (C:\Users\Admin\library-management-system\lms-backend\target\classes started by Admin in C:\Users\Admin\library-management-system\lms-backend)
2025-11-15T18:04:54.779+07:00 DEBUG 23332 --- [main] c.i.lms.LibraryManagementApplication     : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-15T18:04:54.781+07:00  INFO 23332 --- [main] c.i.lms.LibraryManagementApplication     : No active profile set, falling back to 1 default profile: "default"
2025-11-15T18:04:55.711+07:00  INFO 23332 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-15T18:04:55.892+07:00  INFO 23332 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 177 ms. Found 9 JPA repository interfaces.
2025-11-15T18:04:56.815+07:00  INFO 23332 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-15T18:04:56.875+07:00  INFO 23332 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-15T18:04:56.878+07:00  INFO 23332 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-15T18:04:57.014+07:00  INFO 23332 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-15T18:04:57.014+07:00  INFO 23332 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2165 ms
2025-11-15T18:04:57.197+07:00  INFO 23332 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-15T18:04:57.250+07:00  INFO 23332 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-15T18:04:57.325+07:00  INFO 23332 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-15T18:04:57.626+07:00  INFO 23332 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-15T18:04:57.684+07:00  INFO 23332 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-15T18:04:57.908+07:00  INFO 23332 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@13374ca6
2025-11-15T18:04:57.908+07:00  INFO 23332 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-15T18:04:57.978+07:00  WARN 23332 --- [main] org.hibernate.dialect.Dialect            : HHH000511: The 5.5.5 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-11-15T18:04:57.985+07:00  WARN 23332 --- [main] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-15T18:04:58.013+07:00  INFO 23332 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 5.5.5
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-15T18:04:59.515+07:00  INFO 23332 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-15T18:04:59.765+07:00 DEBUG 23332 --- [main] org.hibernate.SQL                        : alter table loans modify column status enum ('ACTIVE','OVERDUE','RETURNED') not null
2025-11-15T18:04:59.777+07:00 DEBUG 23332 --- [main] org.hibernate.SQL                        : alter table reservations modify column status enum ('ACTIVE','CANCELLED','EXPIRED','FULFILLED') not null
2025-11-15T18:04:59.873+07:00  INFO 23332 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-15T18:05:00.225+07:00  INFO 23332 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-15T18:05:01.073+07:00 DEBUG 23332 --- [main] c.i.lms.configuration.JwtRequestFilter   : Filter 'jwtRequestFilter' configured for use
2025-11-15T18:05:02.639+07:00  INFO 23332 --- [main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-11-15T18:05:02.639+07:00  WARN 23332 --- [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-11-15T18:05:03.572+07:00 DEBUG 23332 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 43 mappings in 'requestMappingHandlerMapping'
2025-11-15T18:05:03.636+07:00 DEBUG 23332 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-15T18:05:03.789+07:00 DEBUG 23332 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtRequestFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-15T18:05:03.921+07:00 DEBUG 23332 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-15T18:05:04.004+07:00 DEBUG 23332 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-15T18:05:04.223+07:00  INFO 23332 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-15T18:05:04.239+07:00  INFO 23332 --- [main] c.i.lms.LibraryManagementApplication     : Started LibraryManagementApplication in 10.226 seconds (process running for 10.659)
2025-11-15T18:05:04.371+07:00 DEBUG 23332 --- [main] org.hibernate.SQL                        : select r1_0.role_id,r1_0.role_name from role r1_0 where r1_0.role_name=?
2025-11-15T18:05:04.416+07:00 DEBUG 23332 --- [main] org.hibernate.SQL                        : select r1_0.role_id,r1_0.role_name from role r1_0 where r1_0.role_name=?
2025-11-15T18:05:04.416+07:00 DEBUG 23332 --- [main] org.hibernate.SQL                        : select u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,u1_0.username from users u1_0 where u1_0.username=?
2025-11-15T18:05:04.669+07:00 DEBUG 23332 --- [main] org.hibernate.SQL                        : insert into users (email,name,password,username) values (?,?,?,?)
2025-11-15T18:05:04.714+07:00 DEBUG 23332 --- [main] org.hibernate.SQL                        : insert into user_role (user_id,role_id) values (?,?)
2025-11-15T18:05:04.732+07:00 DEBUG 23332 --- [main] org.hibernate.SQL                        : select u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,u1_0.username from users u1_0 where u1_0.username=?
2025-11-15T18:05:04.853+07:00 DEBUG 23332 --- [main] org.hibernate.SQL                        : insert into users (email,name,password,username) values (?,?,?,?)
2025-11-15T18:05:04.856+07:00 DEBUG 23332 --- [main] org.hibernate.SQL                        : insert into user_role (user_id,role_id) values (?,?)
2025-11-15T18:07:11.326+07:00  INFO 23332 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-15T18:07:11.329+07:00  INFO 23332 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-15T18:07:11.330+07:00 DEBUG 23332 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-11-15T18:07:11.331+07:00 DEBUG 23332 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-11-15T18:07:11.332+07:00 DEBUG 23332 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-11-15T18:07:11.339+07:00 DEBUG 23332 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@4d71f24b
2025-11-15T18:07:11.341+07:00 DEBUG 23332 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@2b7af38e
2025-11-15T18:07:11.342+07:00 DEBUG 23332 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-15T18:07:11.344+07:00  INFO 23332 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 14 ms
2025-11-15T18:07:11.405+07:00 DEBUG 23332 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/public/books?availableOnly=true&page=0&size=10
2025-11-15T18:07:11.405+07:00 DEBUG 23332 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/public/books?availableOnly=false&page=0&size=1000
2025-11-15T18:07:11.472+07:00 DEBUG 23332 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/public/books?availableOnly=false&page=0&size=1000
2025-11-15T18:07:11.472+07:00 DEBUG 23332 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/public/books?availableOnly=true&page=0&size=10
2025-11-15T18:07:11.803+07:00 DEBUG 23332 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T18:07:11.803+07:00 DEBUG 23332 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T18:07:11.831+07:00 DEBUG 23332 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/public/books?availableOnly=true&page=0&size=10
2025-11-15T18:07:11.831+07:00 DEBUG 23332 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/public/books?availableOnly=false&page=0&size=1000
2025-11-15T18:07:11.852+07:00 DEBUG 23332 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/public/books?availableOnly=true&page=0&size=10", parameters={masked}
2025-11-15T18:07:11.852+07:00 DEBUG 23332 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/public/books?availableOnly=false&page=0&size=1000", parameters={masked}
2025-11-15T18:07:11.858+07:00 DEBUG 23332 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.PublicBooksController#listBooks(String, String, boolean, int, int)
2025-11-15T18:07:11.858+07:00 DEBUG 23332 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.PublicBooksController#listBooks(String, String, boolean, int, int)
2025-11-15T18:07:11.963+07:00  WARN 23332 --- [http-nio-8080-exec-4] org.hibernate.orm.query                  : HHH90003004: firstResult/maxResults specified with collection fetch; applying in memory
2025-11-15T18:07:11.963+07:00  WARN 23332 --- [http-nio-8080-exec-10] org.hibernate.orm.query                  : HHH90003004: firstResult/maxResults specified with collection fetch; applying in memory
2025-11-15T18:07:12.004+07:00 DEBUG 23332 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : select distinct b1_0.id,a1_0.book_id,a1_1.id,a1_1.name,c1_0.book_id,c1_1.id,c1_1.name,b1_0.cover_url,b1_0.isbn,b1_0.name,b1_0.number_of_copies_available,b1_0.published_year from books b1_0 left join book_authors a1_0 on b1_0.id=a1_0.book_id left join authors a1_1 on a1_1.id=a1_0.author_id left join book_categories c1_0 on b1_0.id=c1_0.book_id left join categories c1_1 on c1_1.id=c1_0.category_id where (? is null or ?='' or lower(b1_0.name) like replace(lower(concat('%',?,'%')),'\\','\\\\') or lower(a1_1.name) like replace(lower(concat('%',?,'%')),'\\','\\\\')) and (? is null or ?='' or c1_1.name=?) and (?=0 or b1_0.number_of_copies_available>0)
2025-11-15T18:07:12.004+07:00 DEBUG 23332 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : select distinct b1_0.id,a1_0.book_id,a1_1.id,a1_1.name,c1_0.book_id,c1_1.id,c1_1.name,b1_0.cover_url,b1_0.isbn,b1_0.name,b1_0.number_of_copies_available,b1_0.published_year from books b1_0 left join book_authors a1_0 on b1_0.id=a1_0.book_id left join authors a1_1 on a1_1.id=a1_0.author_id left join book_categories c1_0 on b1_0.id=c1_0.book_id left join categories c1_1 on c1_1.id=c1_0.category_id where (? is null or ?='' or lower(b1_0.name) like replace(lower(concat('%',?,'%')),'\\','\\\\') or lower(a1_1.name) like replace(lower(concat('%',?,'%')),'\\','\\\\')) and (? is null or ?='' or c1_1.name=?) and (?=0 or b1_0.number_of_copies_available>0)
2025-11-15T18:07:12.130+07:00 DEBUG 23332 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : select count(distinct b1_0.id) from books b1_0 left join book_authors a1_0 on b1_0.id=a1_0.book_id left join authors a1_1 on a1_1.id=a1_0.author_id left join book_categories c1_0 on b1_0.id=c1_0.book_id left join categories c1_1 on c1_1.id=c1_0.category_id where (? is null or ?='' or lower(b1_0.name) like replace(lower(concat('%',?,'%')),'\\','\\\\') or lower(a1_1.name) like replace(lower(concat('%',?,'%')),'\\','\\\\')) and (? is null or ?='' or c1_1.name=?) and (?=0 or b1_0.number_of_copies_available>0)
2025-11-15T18:07:12.462+07:00  WARN 23332 --- [http-nio-8080-exec-4] ration$PageModule$WarningLoggingModifier : Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2025-11-15T18:07:12.496+07:00 DEBUG 23332 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T18:07:12.496+07:00 DEBUG 23332 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T18:07:12.515+07:00 DEBUG 23332 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [Page 1 of 1 containing com.ibizabroker.lms.entity.Books instances]
2025-11-15T18:07:12.515+07:00 DEBUG 23332 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [Page 1 of 5 containing com.ibizabroker.lms.entity.Books instances]
2025-11-15T18:07:12.715+07:00 DEBUG 23332 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-15T18:07:12.715+07:00 DEBUG 23332 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-15T18:07:32.316+07:00 DEBUG 23332 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/user/chat
2025-11-15T18:07:32.322+07:00 DEBUG 23332 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/user/chat
2025-11-15T18:07:32.335+07:00 DEBUG 23332 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T18:07:32.345+07:00 DEBUG 23332 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/user/chat
2025-11-15T18:07:32.346+07:00 DEBUG 23332 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/user/chat", parameters={}
2025-11-15T18:07:32.346+07:00 DEBUG 23332 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.ChatbotController#ask(ChatRequestDto)
2025-11-15T18:07:32.712+07:00 DEBUG 23332 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [com.ibizabroker.lms.dto.ChatRequestDto@a96954b]
2025-11-15T18:07:32.929+07:00 DEBUG 23332 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public reactor.core.publisher.Mono com.ibizabroker.lms.controller.ChatbotController.ask(com.ibizabroker.lms.dto.ChatRequestDto); target is of class [com.ibizabroker.lms.controller.ChatbotController]
2025-11-15T18:07:33.013+07:00 DEBUG 23332 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public reactor.core.publisher.Mono com.ibizabroker.lms.controller.ChatbotController.ask(com.ibizabroker.lms.dto.ChatRequestDto); target is of class [com.ibizabroker.lms.controller.ChatbotController]
2025-11-15T18:07:33.029+07:00 DEBUG 23332 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : select b1_0.id,a1_0.book_id,a1_1.id,a1_1.name,c1_0.book_id,c1_1.id,c1_1.name,b1_0.cover_url,b1_0.isbn,b1_0.name,b1_0.number_of_copies_available,b1_0.published_year from books b1_0 left join book_authors a1_0 on b1_0.id=a1_0.book_id left join authors a1_1 on a1_1.id=a1_0.author_id left join book_categories c1_0 on b1_0.id=c1_0.book_id left join categories c1_1 on c1_1.id=c1_0.category_id
2025-11-15T18:07:33.145+07:00 DEBUG 23332 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : SELECT * FROM chat_messages WHERE conversation_id = ? ORDER BY created_at DESC LIMIT 5
2025-11-15T18:07:33.162+07:00 DEBUG 23332 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : select b1_0.id,a1_0.book_id,a1_1.id,a1_1.name,c1_0.book_id,c1_1.id,c1_1.name,b1_0.cover_url,b1_0.isbn,b1_0.name,b1_0.number_of_copies_available,b1_0.published_year from books b1_0 left join book_authors a1_0 on b1_0.id=a1_0.book_id left join authors a1_1 on a1_1.id=a1_0.author_id left join book_categories c1_0 on b1_0.id=c1_0.book_id left join categories c1_1 on c1_1.id=c1_0.category_id
2025-11-15T18:07:33.429+07:00 DEBUG 23332 --- [http-nio-8080-exec-5] o.s.w.r.f.client.ExchangeFunctions       : [68493a73] HTTP POST https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=AIzaSyAWQ-HL34H2YSZfejB2s-RB8Oq_H_uQvvE
2025-11-15T18:07:34.184+07:00 DEBUG 23332 --- [http-nio-8080-exec-5] o.s.w.c.request.async.WebAsyncManager    : Started async request for "/api/user/chat"
2025-11-15T18:07:34.196+07:00 DEBUG 23332 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Exiting but response remains open for further handling
2025-11-15T18:07:34.879+07:00 DEBUG 23332 --- [reactor-http-nio-2] org.springframework.web.HttpLogging      : [68493a73] Encoding [{contents=[Ljava.lang.Object;@2b650c8d}]
2025-11-15T18:07:35.043+07:00 DEBUG 23332 --- [reactor-http-nio-2] o.s.w.r.f.client.ExchangeFunctions       : [68493a73] [0d058fa8-1] Response 404 NOT_FOUND
2025-11-15T18:07:35.100+07:00 DEBUG 23332 --- [reactor-http-nio-2] org.springframework.web.HttpLogging      : [68493a73] [0d058fa8-1] Read 259 bytes
2025-11-15T18:07:35.128+07:00 ERROR 23332 --- [reactor-http-nio-2] c.i.lms.controller.ChatbotController     : Chatbot API error: 

org.springframework.web.reactive.function.client.WebClientResponseException$NotFound: 404 Not Found from POST https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent
	at org.springframework.web.reactive.function.client.WebClientResponseException.create(WebClientResponseException.java:324) ~[spring-webflux-6.2.12.jar:6.2.12]
	Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: 
Error has been observed at the following site(s):
	*__checkpoint  404 NOT_FOUND from POST https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent [DefaultWebClient]
Original Stack Trace:
		at org.springframework.web.reactive.function.client.WebClientResponseException.create(WebClientResponseException.java:324) ~[spring-webflux-6.2.12.jar:6.2.12]
		at org.springframework.web.reactive.function.client.DefaultClientResponse.lambda$createException$1(DefaultClientResponse.java:214) ~[spring-webflux-6.2.12.jar:6.2.12]
		at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:106) ~[reactor-core-3.7.12.jar:3.7.12]
		at reactor.core.publisher.FluxOnErrorReturn$ReturnSubscriber.onNext(FluxOnErrorReturn.java:162) ~[reactor-core-3.7.12.jar:3.7.12]
		at reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.onNext(FluxDefaultIfEmpty.java:122) ~[reactor-core-3.7.12.jar:3.7.12]
		at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129) ~[reactor-core-3.7.12.jar:3.7.12]
		at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onNext(FluxContextWrite.java:107) ~[reactor-core-3.7.12.jar:3.7.12]
		at reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onNext(FluxMapFuseable.java:299) ~[reactor-core-3.7.12.jar:3.7.12]
		at reactor.core.publisher.FluxFilterFuseable$FilterFuseableConditionalSubscriber.onNext(FluxFilterFuseable.java:337) ~[reactor-core-3.7.12.jar:3.7.12]
		at reactor.core.publisher.Operators$BaseFluxToMonoOperator.completePossiblyEmpty(Operators.java:2096) ~[reactor-core-3.7.12.jar:3.7.12]
		at reactor.core.publisher.MonoCollect$CollectSubscriber.onComplete(MonoCollect.java:145) ~[reactor-core-3.7.12.jar:3.7.12]
		at reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144) ~[reactor-core-3.7.12.jar:3.7.12]
		at reactor.core.publisher.FluxPeek$PeekSubscriber.onComplete(FluxPeek.java:260) ~[reactor-core-3.7.12.jar:3.7.12]
		at reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144) ~[reactor-core-3.7.12.jar:3.7.12]
		at reactor.netty.channel.FluxReceive.onInboundComplete(FluxReceive.java:413) ~[reactor-netty-core-1.2.11.jar:1.2.11]
		at reactor.netty.channel.ChannelOperations.onInboundComplete(ChannelOperations.java:464) ~[reactor-netty-core-1.2.11.jar:1.2.11]
		at reactor.netty.channel.ChannelOperations.terminate(ChannelOperations.java:518) ~[reactor-netty-core-1.2.11.jar:1.2.11]
		at reactor.netty.http.client.HttpClientOperations.onInboundNext(HttpClientOperations.java:925) ~[reactor-netty-http-1.2.11.jar:1.2.11]
		at reactor.netty.channel.ChannelOperationsHandler.channelRead(ChannelOperationsHandler.java:115) ~[reactor-netty-core-1.2.11.jar:1.2.11]
		at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.handler.codec.http.HttpContentDecoder.decode(HttpContentDecoder.java:181) ~[netty-codec-http-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.handler.codec.http.HttpContentDecoder.decode(HttpContentDecoder.java:48) ~[netty-codec-http-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:91) ~[netty-codec-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:436) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:346) ~[netty-codec-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:318) ~[netty-codec-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:251) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1519) ~[netty-handler-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1377) ~[netty-handler-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1428) ~[netty-handler-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:530) ~[netty-codec-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:469) ~[netty-codec-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290) ~[netty-codec-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1357) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:868) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:796) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:732) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:658) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:998) ~[netty-common-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.128.Final.jar:4.1.128.Final]
		at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.128.Final.jar:4.1.128.Final]
		at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-11-15T18:07:35.165+07:00 DEBUG 23332 --- [reactor-http-nio-2] o.s.w.c.request.async.WebAsyncManager    : Async result set for "/api/user/chat"
2025-11-15T18:07:35.166+07:00 DEBUG 23332 --- [reactor-http-nio-2] o.s.w.c.request.async.WebAsyncManager    : Performing async dispatch for "/api/user/chat"
2025-11-15T18:07:35.412+07:00 DEBUG 23332 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/user/chat
2025-11-15T18:07:35.445+07:00 DEBUG 23332 --- [http-nio-8080-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-15T18:07:35.445+07:00 DEBUG 23332 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /error
2025-11-15T18:07:35.464+07:00 DEBUG 23332 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /error
2025-11-15T18:07:35.464+07:00 DEBUG 23332 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for POST "/error", parameters={}
2025-11-15T18:07:35.464+07:00 DEBUG 23332 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-11-15T18:07:35.482+07:00 DEBUG 23332 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T18:07:35.482+07:00 DEBUG 23332 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Sat Nov 15 18:07:35 ICT 2025, status=401, error=Unauthorized, path=/api/user/chat}]
2025-11-15T18:07:35.500+07:00 DEBUG 23332 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 401
2025-11-15T18:07:35.500+07:00 DEBUG 23332 --- [http-nio-8080-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-15T18:07:35.500+07:00 DEBUG 23332 --- [http-nio-8080-exec-6] o.s.w.c.request.async.WebAsyncManager    : Servlet container error notification for "/api/user/chat"
2025-11-15T18:16:00.059+07:00  INFO 23332 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-11-15T18:16:00.088+07:00  INFO 23332 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-11-15T18:16:02.212+07:00  INFO 23332 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-15T18:16:02.216+07:00  INFO 23332 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-15T18:16:02.224+07:00  INFO 23332 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-15T18:16:14.013+07:00  INFO 8288 --- [main] c.i.lms.LibraryManagementApplication     : Starting LibraryManagementApplication using Java 21.0.8 with PID 8288 (C:\Users\Admin\library-management-system\lms-backend\target\classes started by Admin in C:\Users\Admin\library-management-system\lms-backend)
2025-11-15T18:16:14.021+07:00 DEBUG 8288 --- [main] c.i.lms.LibraryManagementApplication     : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-15T18:16:14.021+07:00  INFO 8288 --- [main] c.i.lms.LibraryManagementApplication     : No active profile set, falling back to 1 default profile: "default"
2025-11-15T18:16:15.338+07:00  INFO 8288 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-15T18:16:15.593+07:00  INFO 8288 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 234 ms. Found 9 JPA repository interfaces.
2025-11-15T18:16:16.603+07:00  INFO 8288 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-15T18:16:16.627+07:00  INFO 8288 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-15T18:16:16.627+07:00  INFO 8288 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-15T18:16:16.728+07:00  INFO 8288 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-15T18:16:16.728+07:00  INFO 8288 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2635 ms
2025-11-15T18:16:16.932+07:00  INFO 8288 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-15T18:16:17.018+07:00  INFO 8288 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-15T18:16:17.101+07:00  INFO 8288 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-15T18:16:17.539+07:00  INFO 8288 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-15T18:16:17.597+07:00  INFO 8288 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-15T18:16:17.804+07:00  INFO 8288 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@55c46ec1
2025-11-15T18:16:17.829+07:00  INFO 8288 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-15T18:16:17.884+07:00  WARN 8288 --- [main] org.hibernate.dialect.Dialect            : HHH000511: The 5.5.5 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-11-15T18:16:17.894+07:00  WARN 8288 --- [main] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-15T18:16:17.932+07:00  INFO 8288 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 5.5.5
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-15T18:16:19.577+07:00  INFO 8288 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-15T18:16:20.212+07:00 DEBUG 8288 --- [main] org.hibernate.SQL                        : alter table loans modify column status enum ('ACTIVE','OVERDUE','RETURNED') not null
2025-11-15T18:16:20.218+07:00 DEBUG 8288 --- [main] org.hibernate.SQL                        : alter table reservations modify column status enum ('ACTIVE','CANCELLED','EXPIRED','FULFILLED') not null
2025-11-15T18:16:20.326+07:00  INFO 8288 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-15T18:16:20.684+07:00  INFO 8288 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-15T18:16:21.605+07:00 DEBUG 8288 --- [main] c.i.lms.configuration.JwtRequestFilter   : Filter 'jwtRequestFilter' configured for use
2025-11-15T18:16:23.449+07:00  INFO 8288 --- [main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-11-15T18:16:23.449+07:00  WARN 8288 --- [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-11-15T18:16:24.401+07:00 DEBUG 8288 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 43 mappings in 'requestMappingHandlerMapping'
2025-11-15T18:16:24.464+07:00 DEBUG 8288 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-15T18:16:24.627+07:00 DEBUG 8288 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtRequestFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-15T18:16:24.827+07:00 DEBUG 8288 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-15T18:16:24.900+07:00 DEBUG 8288 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-15T18:16:25.339+07:00  INFO 8288 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-15T18:16:25.355+07:00  INFO 8288 --- [main] c.i.lms.LibraryManagementApplication     : Started LibraryManagementApplication in 12.209 seconds (process running for 12.792)
2025-11-15T18:16:25.508+07:00 DEBUG 8288 --- [main] org.hibernate.SQL                        : select r1_0.role_id,r1_0.role_name from role r1_0 where r1_0.role_name=?
2025-11-15T18:16:25.564+07:00 DEBUG 8288 --- [main] org.hibernate.SQL                        : select r1_0.role_id,r1_0.role_name from role r1_0 where r1_0.role_name=?
2025-11-15T18:16:25.579+07:00 DEBUG 8288 --- [main] org.hibernate.SQL                        : select u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,u1_0.username from users u1_0 where u1_0.username=?
2025-11-15T18:16:25.741+07:00 DEBUG 8288 --- [main] org.hibernate.SQL                        : insert into users (email,name,password,username) values (?,?,?,?)
2025-11-15T18:16:25.779+07:00 DEBUG 8288 --- [main] org.hibernate.SQL                        : insert into user_role (user_id,role_id) values (?,?)
2025-11-15T18:16:25.796+07:00 DEBUG 8288 --- [main] org.hibernate.SQL                        : select u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,u1_0.username from users u1_0 where u1_0.username=?
2025-11-15T18:16:25.913+07:00 DEBUG 8288 --- [main] org.hibernate.SQL                        : insert into users (email,name,password,username) values (?,?,?,?)
2025-11-15T18:16:25.930+07:00 DEBUG 8288 --- [main] org.hibernate.SQL                        : insert into user_role (user_id,role_id) values (?,?)
2025-11-15T18:16:49.236+07:00  INFO 8288 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-15T18:16:49.236+07:00  INFO 8288 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-15T18:16:49.236+07:00 DEBUG 8288 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-11-15T18:16:49.236+07:00 DEBUG 8288 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-11-15T18:16:49.236+07:00 DEBUG 8288 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-11-15T18:16:49.236+07:00 DEBUG 8288 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@4d71f24b
2025-11-15T18:16:49.236+07:00 DEBUG 8288 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@2b7af38e
2025-11-15T18:16:49.249+07:00 DEBUG 8288 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-15T18:16:49.249+07:00  INFO 8288 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 13 ms
2025-11-15T18:16:49.286+07:00 DEBUG 8288 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/auth/authenticate
2025-11-15T18:16:49.356+07:00 DEBUG 8288 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/authenticate
2025-11-15T18:16:49.367+07:00 DEBUG 8288 --- [http-nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-15T18:16:49.374+07:00 DEBUG 8288 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/authenticate
2025-11-15T18:16:49.374+07:00 DEBUG 8288 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/auth/authenticate", parameters={}
2025-11-15T18:16:49.385+07:00 DEBUG 8288 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.AuthController#authenticate(LoginRequest)
2025-11-15T18:16:49.673+07:00 DEBUG 8288 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest[username=user, password=user123]]
2025-11-15T18:16:49.911+07:00 DEBUG 8288 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T18:16:50.148+07:00 DEBUG 8288 --- [http-nio-8080-exec-3] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-11-15T18:16:50.150+07:00 DEBUG 8288 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T18:16:50.375+07:00 DEBUG 8288 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json]
2025-11-15T18:16:50.391+07:00 DEBUG 8288 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse[token=eyJhbGciOiJIUzI1NiJ9.eyJ1c2VySWQiOjQ1LCJyb2xlcyI6WyJST0xFX1VTRVIiXSwic3ViIjoidXN (truncated)...]
2025-11-15T18:16:50.421+07:00 DEBUG 8288 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-15T18:16:50.471+07:00 DEBUG 8288 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/public/books/newest
2025-11-15T18:16:50.473+07:00 DEBUG 8288 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/public/books/newest
2025-11-15T18:16:50.581+07:00 DEBUG 8288 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T18:16:50.591+07:00 DEBUG 8288 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/public/books/newest
2025-11-15T18:16:50.591+07:00 DEBUG 8288 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/public/books/newest", parameters={}
2025-11-15T18:16:50.597+07:00 DEBUG 8288 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.PublicBooksController#getNewestBooks()
2025-11-15T18:16:50.626+07:00  WARN 8288 --- [http-nio-8080-exec-4] org.hibernate.orm.query                  : HHH90003004: firstResult/maxResults specified with collection fetch; applying in memory
2025-11-15T18:16:50.630+07:00 DEBUG 8288 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : select b1_0.id,a1_0.book_id,a1_1.id,a1_1.name,c1_0.book_id,c1_1.id,c1_1.name,b1_0.cover_url,b1_0.isbn,b1_0.name,b1_0.number_of_copies_available,b1_0.published_year from books b1_0 left join book_authors a1_0 on b1_0.id=a1_0.book_id left join authors a1_1 on a1_1.id=a1_0.author_id left join book_categories c1_0 on b1_0.id=c1_0.book_id left join categories c1_1 on c1_1.id=c1_0.category_id order by b1_0.id desc
2025-11-15T18:16:50.706+07:00 DEBUG 8288 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T18:16:50.710+07:00 DEBUG 8288 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [[com.ibizabroker.lms.entity.Books@76c37b8e, com.ibizabroker.lms.entity.Books@7ad1069e, com.ibizabrok (truncated)...]
2025-11-15T18:16:50.743+07:00 DEBUG 8288 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-15T18:17:01.122+07:00 DEBUG 8288 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/user/chat
2025-11-15T18:17:01.131+07:00 DEBUG 8288 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/user/chat
2025-11-15T18:17:01.146+07:00 DEBUG 8288 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T18:17:01.156+07:00 DEBUG 8288 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/user/chat
2025-11-15T18:17:01.156+07:00 DEBUG 8288 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/user/chat", parameters={}
2025-11-15T18:17:01.156+07:00 DEBUG 8288 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.ChatbotController#ask(ChatRequestDto)
2025-11-15T18:17:01.182+07:00 DEBUG 8288 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [com.ibizabroker.lms.dto.ChatRequestDto@5ba940a4]
2025-11-15T18:17:01.374+07:00 DEBUG 8288 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public reactor.core.publisher.Mono com.ibizabroker.lms.controller.ChatbotController.ask(com.ibizabroker.lms.dto.ChatRequestDto); target is of class [com.ibizabroker.lms.controller.ChatbotController]
2025-11-15T18:17:01.472+07:00 DEBUG 8288 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public reactor.core.publisher.Mono com.ibizabroker.lms.controller.ChatbotController.ask(com.ibizabroker.lms.dto.ChatRequestDto); target is of class [com.ibizabroker.lms.controller.ChatbotController]
2025-11-15T18:17:01.492+07:00 DEBUG 8288 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : select b1_0.id,a1_0.book_id,a1_1.id,a1_1.name,c1_0.book_id,c1_1.id,c1_1.name,b1_0.cover_url,b1_0.isbn,b1_0.name,b1_0.number_of_copies_available,b1_0.published_year from books b1_0 left join book_authors a1_0 on b1_0.id=a1_0.book_id left join authors a1_1 on a1_1.id=a1_0.author_id left join book_categories c1_0 on b1_0.id=c1_0.book_id left join categories c1_1 on c1_1.id=c1_0.category_id
2025-11-15T18:17:01.638+07:00 DEBUG 8288 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : SELECT * FROM chat_messages WHERE conversation_id = ? ORDER BY created_at DESC LIMIT 5
2025-11-15T18:17:01.668+07:00 DEBUG 8288 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : select b1_0.id,a1_0.book_id,a1_1.id,a1_1.name,c1_0.book_id,c1_1.id,c1_1.name,b1_0.cover_url,b1_0.isbn,b1_0.name,b1_0.number_of_copies_available,b1_0.published_year from books b1_0 left join book_authors a1_0 on b1_0.id=a1_0.book_id left join authors a1_1 on a1_1.id=a1_0.author_id left join book_categories c1_0 on b1_0.id=c1_0.book_id left join categories c1_1 on c1_1.id=c1_0.category_id
2025-11-15T18:17:02.147+07:00 DEBUG 8288 --- [http-nio-8080-exec-6] o.s.w.r.f.client.ExchangeFunctions       : [3d53a11f] HTTP POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=AIzaSyAWQ-HL34H2YSZfejB2s-RB8Oq_H_uQvvE
2025-11-15T18:17:03.169+07:00 DEBUG 8288 --- [http-nio-8080-exec-6] o.s.w.c.request.async.WebAsyncManager    : Started async request for "/api/user/chat"
2025-11-15T18:17:03.206+07:00 DEBUG 8288 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Exiting but response remains open for further handling
2025-11-15T18:17:04.827+07:00 DEBUG 8288 --- [reactor-http-nio-2] org.springframework.web.HttpLogging      : [3d53a11f] Encoding [{contents=[Ljava.lang.Object;@5912d44d}]
2025-11-15T18:17:07.717+07:00 DEBUG 8288 --- [reactor-http-nio-2] o.s.w.r.f.client.ExchangeFunctions       : [3d53a11f] [1032af08-1] Response 200 OK
2025-11-15T18:17:07.841+07:00 DEBUG 8288 --- [reactor-http-nio-2] org.springframework.web.HttpLogging      : [3d53a11f] [1032af08-1] Decoded "{<EOL>  "candidates": [<EOL>    {<EOL>      "content": {<EOL>        "parts": [<EOL>          {<EOL>            "text": "To  (truncated)..."
2025-11-15T18:17:07.877+07:00 DEBUG 8288 --- [reactor-http-nio-2] org.hibernate.SQL                        : insert into chat_messages (bot_response,conversation_id,created_at,user_id,user_message) values (?,?,?,?,?)
2025-11-15T18:17:07.956+07:00 DEBUG 8288 --- [reactor-http-nio-2] o.s.w.c.request.async.WebAsyncManager    : Async result set for "/api/user/chat"
2025-11-15T18:17:07.960+07:00 DEBUG 8288 --- [reactor-http-nio-2] o.s.w.c.request.async.WebAsyncManager    : Performing async dispatch for "/api/user/chat"
2025-11-15T18:17:08.010+07:00 DEBUG 8288 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/user/chat
2025-11-15T18:17:08.014+07:00 DEBUG 8288 --- [http-nio-8080-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-15T18:17:08.027+07:00 DEBUG 8288 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /error
2025-11-15T18:17:08.029+07:00 DEBUG 8288 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /error
2025-11-15T18:17:08.031+07:00 DEBUG 8288 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for POST "/error", parameters={}
2025-11-15T18:17:08.031+07:00 DEBUG 8288 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-11-15T18:17:08.041+07:00 DEBUG 8288 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T18:17:08.046+07:00 DEBUG 8288 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Sat Nov 15 18:17:08 ICT 2025, status=401, error=Unauthorized, path=/api/user/chat}]
2025-11-15T18:17:08.060+07:00 DEBUG 8288 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 401
2025-11-15T18:17:08.064+07:00 DEBUG 8288 --- [http-nio-8080-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-15T18:17:08.066+07:00 DEBUG 8288 --- [http-nio-8080-exec-7] o.s.w.c.request.async.WebAsyncManager    : Servlet container error notification for "/api/user/chat"
2025-11-15T18:51:22.500+07:00 DEBUG 8288 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/auth/authenticate
2025-11-15T18:51:22.507+07:00 DEBUG 8288 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/authenticate
2025-11-15T18:51:22.507+07:00 DEBUG 8288 --- [http-nio-8080-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-15T18:51:22.507+07:00 DEBUG 8288 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/authenticate
2025-11-15T18:51:22.507+07:00 DEBUG 8288 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : POST "/api/auth/authenticate", parameters={}
2025-11-15T18:51:22.507+07:00 DEBUG 8288 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.AuthController#authenticate(LoginRequest)
2025-11-15T18:51:22.507+07:00 DEBUG 8288 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest[username=user, password=user123]]
2025-11-15T18:51:22.523+07:00 DEBUG 8288 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T18:51:22.739+07:00 DEBUG 8288 --- [http-nio-8080-exec-10] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-11-15T18:51:22.741+07:00 DEBUG 8288 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T18:51:22.748+07:00 DEBUG 8288 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json]
2025-11-15T18:51:22.748+07:00 DEBUG 8288 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse[token=eyJhbGciOiJIUzI1NiJ9.eyJ1c2VySWQiOjQ1LCJyb2xlcyI6WyJST0xFX1VTRVIiXSwic3ViIjoidXN (truncated)...]
2025-11-15T18:51:22.748+07:00 DEBUG 8288 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-15T18:51:22.781+07:00 DEBUG 8288 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/public/books/newest
2025-11-15T18:51:22.791+07:00 DEBUG 8288 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/public/books/newest
2025-11-15T18:51:22.806+07:00 DEBUG 8288 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T18:51:22.816+07:00 DEBUG 8288 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/public/books/newest
2025-11-15T18:51:22.817+07:00 DEBUG 8288 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/public/books/newest", parameters={}
2025-11-15T18:51:22.822+07:00 DEBUG 8288 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.PublicBooksController#getNewestBooks()
2025-11-15T18:51:22.825+07:00  WARN 8288 --- [http-nio-8080-exec-3] org.hibernate.orm.query                  : HHH90003004: firstResult/maxResults specified with collection fetch; applying in memory
2025-11-15T18:51:22.831+07:00 DEBUG 8288 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : select b1_0.id,a1_0.book_id,a1_1.id,a1_1.name,c1_0.book_id,c1_1.id,c1_1.name,b1_0.cover_url,b1_0.isbn,b1_0.name,b1_0.number_of_copies_available,b1_0.published_year from books b1_0 left join book_authors a1_0 on b1_0.id=a1_0.book_id left join authors a1_1 on a1_1.id=a1_0.author_id left join book_categories c1_0 on b1_0.id=c1_0.book_id left join categories c1_1 on c1_1.id=c1_0.category_id order by b1_0.id desc
2025-11-15T18:51:22.856+07:00 DEBUG 8288 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T18:51:22.858+07:00 DEBUG 8288 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [[com.ibizabroker.lms.entity.Books@65436aae, com.ibizabroker.lms.entity.Books@b0894a1, com.ibizabroke (truncated)...]
2025-11-15T18:51:22.862+07:00 DEBUG 8288 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-15T18:51:38.978+07:00 DEBUG 8288 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/user/chat
2025-11-15T18:51:38.993+07:00 DEBUG 8288 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/user/chat
2025-11-15T18:51:39.011+07:00 DEBUG 8288 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T18:51:39.022+07:00 DEBUG 8288 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/user/chat
2025-11-15T18:51:39.036+07:00 DEBUG 8288 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/user/chat", parameters={}
2025-11-15T18:51:39.039+07:00 DEBUG 8288 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.ChatbotController#ask(ChatRequestDto)
2025-11-15T18:51:39.043+07:00 DEBUG 8288 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [com.ibizabroker.lms.dto.ChatRequestDto@72bdce2b]
2025-11-15T18:51:39.045+07:00 DEBUG 8288 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public reactor.core.publisher.Mono com.ibizabroker.lms.controller.ChatbotController.ask(com.ibizabroker.lms.dto.ChatRequestDto); target is of class [com.ibizabroker.lms.controller.ChatbotController]
2025-11-15T18:51:39.047+07:00 DEBUG 8288 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public reactor.core.publisher.Mono com.ibizabroker.lms.controller.ChatbotController.ask(com.ibizabroker.lms.dto.ChatRequestDto); target is of class [com.ibizabroker.lms.controller.ChatbotController]
2025-11-15T18:51:39.058+07:00 DEBUG 8288 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : select b1_0.id,a1_0.book_id,a1_1.id,a1_1.name,c1_0.book_id,c1_1.id,c1_1.name,b1_0.cover_url,b1_0.isbn,b1_0.name,b1_0.number_of_copies_available,b1_0.published_year from books b1_0 left join book_authors a1_0 on b1_0.id=a1_0.book_id left join authors a1_1 on a1_1.id=a1_0.author_id left join book_categories c1_0 on b1_0.id=c1_0.book_id left join categories c1_1 on c1_1.id=c1_0.category_id
2025-11-15T18:51:39.091+07:00 DEBUG 8288 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : SELECT * FROM chat_messages WHERE conversation_id = ? ORDER BY created_at DESC LIMIT 5
2025-11-15T18:51:39.111+07:00 DEBUG 8288 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : select b1_0.id,a1_0.book_id,a1_1.id,a1_1.name,c1_0.book_id,c1_1.id,c1_1.name,b1_0.cover_url,b1_0.isbn,b1_0.name,b1_0.number_of_copies_available,b1_0.published_year from books b1_0 left join book_authors a1_0 on b1_0.id=a1_0.book_id left join authors a1_1 on a1_1.id=a1_0.author_id left join book_categories c1_0 on b1_0.id=c1_0.book_id left join categories c1_1 on c1_1.id=c1_0.category_id
2025-11-15T18:51:39.142+07:00 DEBUG 8288 --- [http-nio-8080-exec-4] o.s.w.r.f.client.ExchangeFunctions       : [67ba27ed] HTTP POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=AIzaSyAWQ-HL34H2YSZfejB2s-RB8Oq_H_uQvvE
2025-11-15T18:51:39.156+07:00 DEBUG 8288 --- [http-nio-8080-exec-4] o.s.w.c.request.async.WebAsyncManager    : Started async request for "/api/user/chat"
2025-11-15T18:51:39.156+07:00 DEBUG 8288 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Exiting but response remains open for further handling
2025-11-15T18:51:39.495+07:00 DEBUG 8288 --- [reactor-http-nio-3] org.springframework.web.HttpLogging      : [67ba27ed] Encoding [{contents=[Ljava.lang.Object;@6fd62f16}]
2025-11-15T18:51:41.429+07:00 DEBUG 8288 --- [reactor-http-nio-3] o.s.w.r.f.client.ExchangeFunctions       : [67ba27ed] [43194530-1] Response 200 OK
2025-11-15T18:51:41.433+07:00 DEBUG 8288 --- [reactor-http-nio-3] org.springframework.web.HttpLogging      : [67ba27ed] [43194530-1] Decoded "{<EOL>  "candidates": [<EOL>    {<EOL>      "content": {<EOL>        "parts": [<EOL>          {<EOL>            "text": "To  (truncated)..."
2025-11-15T18:51:41.438+07:00 DEBUG 8288 --- [reactor-http-nio-3] org.hibernate.SQL                        : insert into chat_messages (bot_response,conversation_id,created_at,user_id,user_message) values (?,?,?,?,?)
2025-11-15T18:51:41.459+07:00 DEBUG 8288 --- [reactor-http-nio-3] o.s.w.c.request.async.WebAsyncManager    : Async result set for "/api/user/chat"
2025-11-15T18:51:41.459+07:00 DEBUG 8288 --- [reactor-http-nio-3] o.s.w.c.request.async.WebAsyncManager    : Performing async dispatch for "/api/user/chat"
2025-11-15T18:51:41.463+07:00 DEBUG 8288 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/user/chat
2025-11-15T18:51:41.469+07:00 DEBUG 8288 --- [http-nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-15T18:51:41.473+07:00 DEBUG 8288 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /error
2025-11-15T18:51:41.477+07:00 DEBUG 8288 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /error
2025-11-15T18:51:41.479+07:00 DEBUG 8288 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for POST "/error", parameters={}
2025-11-15T18:51:41.479+07:00 DEBUG 8288 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-11-15T18:51:41.483+07:00 DEBUG 8288 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T18:51:41.487+07:00 DEBUG 8288 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Sat Nov 15 18:51:41 ICT 2025, status=401, error=Unauthorized, path=/api/user/chat}]
2025-11-15T18:51:41.490+07:00 DEBUG 8288 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 401
2025-11-15T18:51:41.493+07:00 DEBUG 8288 --- [http-nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-15T18:51:41.495+07:00 DEBUG 8288 --- [http-nio-8080-exec-5] o.s.w.c.request.async.WebAsyncManager    : Servlet container error notification for "/api/user/chat"
2025-11-15T18:53:53.240+07:00 DEBUG 8288 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/auth/authenticate
2025-11-15T18:53:53.248+07:00 DEBUG 8288 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/authenticate
2025-11-15T18:53:53.248+07:00 DEBUG 8288 --- [http-nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-15T18:53:53.248+07:00 DEBUG 8288 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/authenticate
2025-11-15T18:53:53.248+07:00 DEBUG 8288 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/auth/authenticate", parameters={}
2025-11-15T18:53:53.248+07:00 DEBUG 8288 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.AuthController#authenticate(LoginRequest)
2025-11-15T18:53:53.255+07:00 DEBUG 8288 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest[username=user, password=user123]]
2025-11-15T18:53:53.261+07:00 DEBUG 8288 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T18:53:53.474+07:00 DEBUG 8288 --- [http-nio-8080-exec-8] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-11-15T18:53:53.474+07:00 DEBUG 8288 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T18:53:53.482+07:00 DEBUG 8288 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json]
2025-11-15T18:53:53.482+07:00 DEBUG 8288 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse[token=eyJhbGciOiJIUzI1NiJ9.eyJ1c2VySWQiOjQ1LCJyb2xlcyI6WyJST0xFX1VTRVIiXSwic3ViIjoidXN (truncated)...]
2025-11-15T18:53:53.486+07:00 DEBUG 8288 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-15T18:53:53.507+07:00 DEBUG 8288 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/public/books/newest
2025-11-15T18:53:53.510+07:00 DEBUG 8288 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/public/books/newest
2025-11-15T18:53:53.518+07:00 DEBUG 8288 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T18:53:53.528+07:00 DEBUG 8288 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/public/books/newest
2025-11-15T18:53:53.528+07:00 DEBUG 8288 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/public/books/newest", parameters={}
2025-11-15T18:53:53.532+07:00 DEBUG 8288 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.PublicBooksController#getNewestBooks()
2025-11-15T18:53:53.541+07:00  WARN 8288 --- [http-nio-8080-exec-10] org.hibernate.orm.query                  : HHH90003004: firstResult/maxResults specified with collection fetch; applying in memory
2025-11-15T18:53:53.544+07:00 DEBUG 8288 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : select b1_0.id,a1_0.book_id,a1_1.id,a1_1.name,c1_0.book_id,c1_1.id,c1_1.name,b1_0.cover_url,b1_0.isbn,b1_0.name,b1_0.number_of_copies_available,b1_0.published_year from books b1_0 left join book_authors a1_0 on b1_0.id=a1_0.book_id left join authors a1_1 on a1_1.id=a1_0.author_id left join book_categories c1_0 on b1_0.id=c1_0.book_id left join categories c1_1 on c1_1.id=c1_0.category_id order by b1_0.id desc
2025-11-15T18:53:53.553+07:00 DEBUG 8288 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T18:53:53.553+07:00 DEBUG 8288 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [[com.ibizabroker.lms.entity.Books@64bc2ce3, com.ibizabroker.lms.entity.Books@72fdaed7, com.ibizabrok (truncated)...]
2025-11-15T18:53:53.553+07:00 DEBUG 8288 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-15T18:54:02.580+07:00 DEBUG 8288 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/user/chat
2025-11-15T18:54:02.601+07:00 DEBUG 8288 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/user/chat
2025-11-15T18:54:02.799+07:00 DEBUG 8288 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T18:54:03.038+07:00 DEBUG 8288 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/user/chat
2025-11-15T18:54:03.098+07:00 DEBUG 8288 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : POST "/api/user/chat", parameters={}
2025-11-15T18:54:03.115+07:00 DEBUG 8288 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.ChatbotController#ask(ChatRequestDto)
2025-11-15T18:54:03.151+07:00 DEBUG 8288 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [com.ibizabroker.lms.dto.ChatRequestDto@755ecced]
2025-11-15T18:54:03.181+07:00 DEBUG 8288 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public reactor.core.publisher.Mono com.ibizabroker.lms.controller.ChatbotController.ask(com.ibizabroker.lms.dto.ChatRequestDto); target is of class [com.ibizabroker.lms.controller.ChatbotController]
2025-11-15T18:54:03.192+07:00 DEBUG 8288 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public reactor.core.publisher.Mono com.ibizabroker.lms.controller.ChatbotController.ask(com.ibizabroker.lms.dto.ChatRequestDto); target is of class [com.ibizabroker.lms.controller.ChatbotController]
2025-11-15T18:54:03.252+07:00 DEBUG 8288 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : select b1_0.id,a1_0.book_id,a1_1.id,a1_1.name,c1_0.book_id,c1_1.id,c1_1.name,b1_0.cover_url,b1_0.isbn,b1_0.name,b1_0.number_of_copies_available,b1_0.published_year from books b1_0 left join book_authors a1_0 on b1_0.id=a1_0.book_id left join authors a1_1 on a1_1.id=a1_0.author_id left join book_categories c1_0 on b1_0.id=c1_0.book_id left join categories c1_1 on c1_1.id=c1_0.category_id
2025-11-15T18:54:03.342+07:00 DEBUG 8288 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : SELECT * FROM chat_messages WHERE conversation_id = ? ORDER BY created_at DESC LIMIT 5
2025-11-15T18:54:03.399+07:00 DEBUG 8288 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : select b1_0.id,a1_0.book_id,a1_1.id,a1_1.name,c1_0.book_id,c1_1.id,c1_1.name,b1_0.cover_url,b1_0.isbn,b1_0.name,b1_0.number_of_copies_available,b1_0.published_year from books b1_0 left join book_authors a1_0 on b1_0.id=a1_0.book_id left join authors a1_1 on a1_1.id=a1_0.author_id left join book_categories c1_0 on b1_0.id=c1_0.book_id left join categories c1_1 on c1_1.id=c1_0.category_id
2025-11-15T18:54:03.484+07:00 DEBUG 8288 --- [http-nio-8080-exec-1] o.s.w.r.f.client.ExchangeFunctions       : [4a9d0f28] HTTP POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=AIzaSyAWQ-HL34H2YSZfejB2s-RB8Oq_H_uQvvE
2025-11-15T18:54:03.498+07:00 DEBUG 8288 --- [reactor-http-nio-3] org.springframework.web.HttpLogging      : [4a9d0f28] Encoding [{contents=[Ljava.lang.Object;@4005d3c2}]
2025-11-15T18:54:03.495+07:00 DEBUG 8288 --- [http-nio-8080-exec-1] o.s.w.c.request.async.WebAsyncManager    : Started async request for "/api/user/chat"
2025-11-15T18:54:03.507+07:00 DEBUG 8288 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Exiting but response remains open for further handling
2025-11-15T18:54:06.937+07:00 DEBUG 8288 --- [reactor-http-nio-3] o.s.w.r.f.client.ExchangeFunctions       : [4a9d0f28] [43194530-2] Response 200 OK
2025-11-15T18:54:06.948+07:00 DEBUG 8288 --- [reactor-http-nio-3] org.springframework.web.HttpLogging      : [4a9d0f28] [43194530-2] Decoded "{<EOL>  "candidates": [<EOL>    {<EOL>      "content": {<EOL>        "parts": [<EOL>          {<EOL>            "text": "To  (truncated)..."
2025-11-15T18:54:06.953+07:00 DEBUG 8288 --- [reactor-http-nio-3] org.hibernate.SQL                        : insert into chat_messages (bot_response,conversation_id,created_at,user_id,user_message) values (?,?,?,?,?)
2025-11-15T18:54:06.972+07:00 DEBUG 8288 --- [reactor-http-nio-3] o.s.w.c.request.async.WebAsyncManager    : Async result set for "/api/user/chat"
2025-11-15T18:54:06.972+07:00 DEBUG 8288 --- [reactor-http-nio-3] o.s.w.c.request.async.WebAsyncManager    : Performing async dispatch for "/api/user/chat"
2025-11-15T18:54:06.974+07:00 DEBUG 8288 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/user/chat
2025-11-15T18:54:06.977+07:00 DEBUG 8288 --- [http-nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-15T18:54:06.979+07:00 DEBUG 8288 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /error
2025-11-15T18:54:06.979+07:00 DEBUG 8288 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /error
2025-11-15T18:54:06.980+07:00 DEBUG 8288 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for POST "/error", parameters={}
2025-11-15T18:54:06.985+07:00 DEBUG 8288 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-11-15T18:54:06.985+07:00 DEBUG 8288 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T18:54:06.988+07:00 DEBUG 8288 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Sat Nov 15 18:54:06 ICT 2025, status=401, error=Unauthorized, path=/api/user/chat}]
2025-11-15T18:54:06.988+07:00 DEBUG 8288 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 401
2025-11-15T18:54:06.988+07:00 DEBUG 8288 --- [http-nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-15T18:54:06.988+07:00 DEBUG 8288 --- [http-nio-8080-exec-3] o.s.w.c.request.async.WebAsyncManager    : Servlet container error notification for "/api/user/chat"
2025-11-15T19:06:22.023+07:00  INFO 8288 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-11-15T19:06:22.049+07:00  INFO 8288 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-11-15T19:06:24.159+07:00  INFO 8288 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-15T19:06:24.159+07:00  INFO 8288 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-15T19:06:24.167+07:00  INFO 8288 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-15T19:06:37.162+07:00  INFO 3864 --- [main] c.i.lms.LibraryManagementApplication     : Starting LibraryManagementApplication using Java 21.0.8 with PID 3864 (C:\Users\Admin\library-management-system\lms-backend\target\classes started by Admin in C:\Users\Admin\library-management-system\lms-backend)
2025-11-15T19:06:37.162+07:00 DEBUG 3864 --- [main] c.i.lms.LibraryManagementApplication     : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-15T19:06:37.162+07:00  INFO 3864 --- [main] c.i.lms.LibraryManagementApplication     : No active profile set, falling back to 1 default profile: "default"
2025-11-15T19:06:38.570+07:00  INFO 3864 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-15T19:06:38.877+07:00  INFO 3864 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 289 ms. Found 9 JPA repository interfaces.
2025-11-15T19:06:39.899+07:00  INFO 3864 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-15T19:06:39.953+07:00  INFO 3864 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-15T19:06:39.962+07:00  INFO 3864 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-15T19:06:40.196+07:00  INFO 3864 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-15T19:06:40.198+07:00  INFO 3864 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2952 ms
2025-11-15T19:06:40.455+07:00  INFO 3864 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-15T19:06:40.556+07:00  INFO 3864 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-15T19:06:40.657+07:00  INFO 3864 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-15T19:06:41.061+07:00  INFO 3864 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-15T19:06:41.127+07:00  INFO 3864 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-15T19:06:41.548+07:00  INFO 3864 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@13374ca6
2025-11-15T19:06:41.554+07:00  INFO 3864 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-15T19:06:41.650+07:00  WARN 3864 --- [main] org.hibernate.dialect.Dialect            : HHH000511: The 5.5.5 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-11-15T19:06:41.656+07:00  WARN 3864 --- [main] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-15T19:06:41.694+07:00  INFO 3864 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 5.5.5
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-15T19:06:43.507+07:00  INFO 3864 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-15T19:06:43.851+07:00 DEBUG 3864 --- [main] org.hibernate.SQL                        : alter table loans modify column status enum ('ACTIVE','OVERDUE','RETURNED') not null
2025-11-15T19:06:43.864+07:00 DEBUG 3864 --- [main] org.hibernate.SQL                        : alter table reservations modify column status enum ('ACTIVE','CANCELLED','EXPIRED','FULFILLED') not null
2025-11-15T19:06:44.296+07:00  INFO 3864 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-15T19:06:44.786+07:00  INFO 3864 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-15T19:06:45.980+07:00 DEBUG 3864 --- [main] c.i.lms.configuration.JwtRequestFilter   : Filter 'jwtRequestFilter' configured for use
2025-11-15T19:06:47.908+07:00  INFO 3864 --- [main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-11-15T19:06:47.909+07:00  WARN 3864 --- [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-11-15T19:06:49.089+07:00 DEBUG 3864 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 43 mappings in 'requestMappingHandlerMapping'
2025-11-15T19:06:49.151+07:00 DEBUG 3864 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-15T19:06:49.315+07:00 DEBUG 3864 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtRequestFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-15T19:06:49.673+07:00 DEBUG 3864 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-15T19:06:49.762+07:00 DEBUG 3864 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-15T19:06:50.032+07:00  INFO 3864 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-15T19:06:50.047+07:00  INFO 3864 --- [main] c.i.lms.LibraryManagementApplication     : Started LibraryManagementApplication in 13.715 seconds (process running for 14.313)
2025-11-15T19:06:50.167+07:00 DEBUG 3864 --- [main] org.hibernate.SQL                        : select r1_0.role_id,r1_0.role_name from role r1_0 where r1_0.role_name=?
2025-11-15T19:06:50.214+07:00 DEBUG 3864 --- [main] org.hibernate.SQL                        : select r1_0.role_id,r1_0.role_name from role r1_0 where r1_0.role_name=?
2025-11-15T19:06:50.219+07:00 DEBUG 3864 --- [main] org.hibernate.SQL                        : select u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,u1_0.username from users u1_0 where u1_0.username=?
2025-11-15T19:06:50.369+07:00 DEBUG 3864 --- [main] org.hibernate.SQL                        : insert into users (email,name,password,username) values (?,?,?,?)
2025-11-15T19:06:50.410+07:00 DEBUG 3864 --- [main] org.hibernate.SQL                        : insert into user_role (user_id,role_id) values (?,?)
2025-11-15T19:06:50.421+07:00 DEBUG 3864 --- [main] org.hibernate.SQL                        : select u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,u1_0.username from users u1_0 where u1_0.username=?
2025-11-15T19:06:50.551+07:00 DEBUG 3864 --- [main] org.hibernate.SQL                        : insert into users (email,name,password,username) values (?,?,?,?)
2025-11-15T19:06:50.551+07:00 DEBUG 3864 --- [main] org.hibernate.SQL                        : insert into user_role (user_id,role_id) values (?,?)
2025-11-15T19:06:54.594+07:00  INFO 3864 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-15T19:06:54.602+07:00  INFO 3864 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-15T19:06:54.602+07:00 DEBUG 3864 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-11-15T19:06:54.602+07:00 DEBUG 3864 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-11-15T19:06:54.602+07:00 DEBUG 3864 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-11-15T19:06:54.610+07:00 DEBUG 3864 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@44eab1b0
2025-11-15T19:06:54.610+07:00 DEBUG 3864 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@4c1b3e17
2025-11-15T19:06:54.610+07:00 DEBUG 3864 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-15T19:06:54.618+07:00  INFO 3864 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 16 ms
2025-11-15T19:06:54.717+07:00 DEBUG 3864 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/public/books/newest
2025-11-15T19:06:54.858+07:00 DEBUG 3864 --- [http-nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-15T19:06:54.871+07:00 DEBUG 3864 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/public/books/newest
2025-11-15T19:06:54.885+07:00 DEBUG 3864 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/public/books/newest", parameters={}
2025-11-15T19:06:54.898+07:00 DEBUG 3864 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.PublicBooksController#getNewestBooks()
2025-11-15T19:06:54.993+07:00  WARN 3864 --- [http-nio-8080-exec-1] org.hibernate.orm.query                  : HHH90003004: firstResult/maxResults specified with collection fetch; applying in memory
2025-11-15T19:06:55.027+07:00 DEBUG 3864 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : select b1_0.id,a1_0.book_id,a1_1.id,a1_1.name,c1_0.book_id,c1_1.id,c1_1.name,b1_0.cover_url,b1_0.isbn,b1_0.name,b1_0.number_of_copies_available,b1_0.published_year from books b1_0 left join book_authors a1_0 on b1_0.id=a1_0.book_id left join authors a1_1 on a1_1.id=a1_0.author_id left join book_categories c1_0 on b1_0.id=c1_0.book_id left join categories c1_1 on c1_1.id=c1_0.category_id order by b1_0.id desc
2025-11-15T19:06:55.294+07:00 DEBUG 3864 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T19:06:55.303+07:00 DEBUG 3864 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [[com.ibizabroker.lms.entity.Books@493403a8, com.ibizabroker.lms.entity.Books@28441bed, com.ibizabrok (truncated)...]
2025-11-15T19:06:55.530+07:00 DEBUG 3864 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-15T19:07:05.206+07:00 DEBUG 3864 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/auth/authenticate
2025-11-15T19:07:05.211+07:00 DEBUG 3864 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/authenticate
2025-11-15T19:07:05.211+07:00 DEBUG 3864 --- [http-nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-15T19:07:05.211+07:00 DEBUG 3864 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/authenticate
2025-11-15T19:07:05.211+07:00 DEBUG 3864 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/auth/authenticate", parameters={}
2025-11-15T19:07:05.211+07:00 DEBUG 3864 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.AuthController#authenticate(LoginRequest)
2025-11-15T19:07:05.298+07:00 DEBUG 3864 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest[username=user, password=user123]]
2025-11-15T19:07:05.524+07:00 DEBUG 3864 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T19:07:05.745+07:00 DEBUG 3864 --- [http-nio-8080-exec-5] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-11-15T19:07:05.750+07:00 DEBUG 3864 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T19:07:05.970+07:00 DEBUG 3864 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json]
2025-11-15T19:07:05.974+07:00 DEBUG 3864 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse[token=eyJhbGciOiJIUzI1NiJ9.eyJ1c2VySWQiOjQ3LCJyb2xlcyI6WyJST0xFX1VTRVIiXSwic3ViIjoidXN (truncated)...]
2025-11-15T19:07:05.977+07:00 DEBUG 3864 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-15T19:07:06.007+07:00 DEBUG 3864 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/public/books/newest
2025-11-15T19:07:06.015+07:00 DEBUG 3864 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/public/books/newest
2025-11-15T19:07:06.124+07:00 DEBUG 3864 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T19:07:06.134+07:00 DEBUG 3864 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/public/books/newest
2025-11-15T19:07:06.134+07:00 DEBUG 3864 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/public/books/newest", parameters={}
2025-11-15T19:07:06.134+07:00 DEBUG 3864 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.PublicBooksController#getNewestBooks()
2025-11-15T19:07:06.145+07:00  WARN 3864 --- [http-nio-8080-exec-6] org.hibernate.orm.query                  : HHH90003004: firstResult/maxResults specified with collection fetch; applying in memory
2025-11-15T19:07:06.150+07:00 DEBUG 3864 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : select b1_0.id,a1_0.book_id,a1_1.id,a1_1.name,c1_0.book_id,c1_1.id,c1_1.name,b1_0.cover_url,b1_0.isbn,b1_0.name,b1_0.number_of_copies_available,b1_0.published_year from books b1_0 left join book_authors a1_0 on b1_0.id=a1_0.book_id left join authors a1_1 on a1_1.id=a1_0.author_id left join book_categories c1_0 on b1_0.id=c1_0.book_id left join categories c1_1 on c1_1.id=c1_0.category_id order by b1_0.id desc
2025-11-15T19:07:06.178+07:00 DEBUG 3864 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T19:07:06.184+07:00 DEBUG 3864 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [[com.ibizabroker.lms.entity.Books@7a84b951, com.ibizabroker.lms.entity.Books@62607cf1, com.ibizabrok (truncated)...]
2025-11-15T19:07:06.186+07:00 DEBUG 3864 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-15T19:08:15.191+07:00 DEBUG 3864 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/public/books/newest
2025-11-15T19:08:15.197+07:00 DEBUG 3864 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/public/books/newest
2025-11-15T19:08:15.219+07:00 DEBUG 3864 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T19:08:15.241+07:00 DEBUG 3864 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/public/books/newest
2025-11-15T19:08:15.242+07:00 DEBUG 3864 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/public/books/newest", parameters={}
2025-11-15T19:08:15.245+07:00 DEBUG 3864 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.PublicBooksController#getNewestBooks()
2025-11-15T19:08:15.248+07:00  WARN 3864 --- [http-nio-8080-exec-10] org.hibernate.orm.query                  : HHH90003004: firstResult/maxResults specified with collection fetch; applying in memory
2025-11-15T19:08:15.250+07:00 DEBUG 3864 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : select b1_0.id,a1_0.book_id,a1_1.id,a1_1.name,c1_0.book_id,c1_1.id,c1_1.name,b1_0.cover_url,b1_0.isbn,b1_0.name,b1_0.number_of_copies_available,b1_0.published_year from books b1_0 left join book_authors a1_0 on b1_0.id=a1_0.book_id left join authors a1_1 on a1_1.id=a1_0.author_id left join book_categories c1_0 on b1_0.id=c1_0.book_id left join categories c1_1 on c1_1.id=c1_0.category_id order by b1_0.id desc
2025-11-15T19:08:15.278+07:00 DEBUG 3864 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T19:08:15.278+07:00 DEBUG 3864 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [[com.ibizabroker.lms.entity.Books@1da46b2b, com.ibizabroker.lms.entity.Books@2df8737f, com.ibizabrok (truncated)...]
2025-11-15T19:08:15.278+07:00 DEBUG 3864 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-15T19:08:32.074+07:00 DEBUG 3864 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/user/chat
2025-11-15T19:08:32.083+07:00 DEBUG 3864 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/user/chat
2025-11-15T19:08:32.095+07:00 DEBUG 3864 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T19:08:32.114+07:00 DEBUG 3864 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/user/chat
2025-11-15T19:08:32.114+07:00 DEBUG 3864 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/user/chat", parameters={}
2025-11-15T19:08:32.114+07:00 DEBUG 3864 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.ChatbotController#ask(ChatRequestDto)
2025-11-15T19:08:32.138+07:00 DEBUG 3864 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [com.ibizabroker.lms.dto.ChatRequestDto@48367975]
2025-11-15T19:08:32.215+07:00 DEBUG 3864 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public reactor.core.publisher.Mono com.ibizabroker.lms.controller.ChatbotController.ask(com.ibizabroker.lms.dto.ChatRequestDto); target is of class [com.ibizabroker.lms.controller.ChatbotController]
2025-11-15T19:08:32.336+07:00 DEBUG 3864 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public reactor.core.publisher.Mono com.ibizabroker.lms.controller.ChatbotController.ask(com.ibizabroker.lms.dto.ChatRequestDto); target is of class [com.ibizabroker.lms.controller.ChatbotController]
2025-11-15T19:08:32.400+07:00 DEBUG 3864 --- [http-nio-8080-exec-8] o.s.w.c.request.async.WebAsyncManager    : Started async request for "/api/user/chat"
2025-11-15T19:08:32.408+07:00 DEBUG 3864 --- [http-nio-8080-exec-8] o.s.w.c.request.async.WebAsyncManager    : Async result set for "/api/user/chat"
2025-11-15T19:08:32.408+07:00 DEBUG 3864 --- [http-nio-8080-exec-8] o.s.w.c.request.async.WebAsyncManager    : Performing async dispatch for "/api/user/chat"
2025-11-15T19:08:32.432+07:00 DEBUG 3864 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Exiting but response remains open for further handling
2025-11-15T19:08:32.482+07:00 DEBUG 3864 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/user/chat
2025-11-15T19:08:32.487+07:00 DEBUG 3864 --- [http-nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-15T19:08:32.520+07:00 DEBUG 3864 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /error
2025-11-15T19:08:32.528+07:00 DEBUG 3864 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /error
2025-11-15T19:08:32.535+07:00 DEBUG 3864 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for POST "/error", parameters={}
2025-11-15T19:08:32.539+07:00 DEBUG 3864 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-11-15T19:08:32.577+07:00 DEBUG 3864 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T19:08:32.596+07:00 DEBUG 3864 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Sat Nov 15 19:08:32 ICT 2025, status=401, error=Unauthorized, path=/api/user/chat}]
2025-11-15T19:08:32.654+07:00 DEBUG 3864 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 401
2025-11-15T19:08:32.660+07:00 DEBUG 3864 --- [http-nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-15T19:08:32.670+07:00 DEBUG 3864 --- [http-nio-8080-exec-8] o.s.w.c.request.async.WebAsyncManager    : Servlet container error notification for "/api/user/chat"
2025-11-15T19:13:32.874+07:00 DEBUG 3864 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/auth/authenticate
2025-11-15T19:13:32.885+07:00 DEBUG 3864 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/authenticate
2025-11-15T19:13:32.885+07:00 DEBUG 3864 --- [http-nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-15T19:13:32.890+07:00 DEBUG 3864 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/authenticate
2025-11-15T19:13:32.890+07:00 DEBUG 3864 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/auth/authenticate", parameters={}
2025-11-15T19:13:32.890+07:00 DEBUG 3864 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.AuthController#authenticate(LoginRequest)
2025-11-15T19:13:32.890+07:00 DEBUG 3864 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest[username=user, password=user123]]
2025-11-15T19:13:32.907+07:00 DEBUG 3864 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T19:13:33.104+07:00 DEBUG 3864 --- [http-nio-8080-exec-5] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-11-15T19:13:33.104+07:00 DEBUG 3864 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T19:13:33.112+07:00 DEBUG 3864 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json]
2025-11-15T19:13:33.119+07:00 DEBUG 3864 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse[token=eyJhbGciOiJIUzI1NiJ9.eyJ1c2VySWQiOjQ3LCJyb2xlcyI6WyJST0xFX1VTRVIiXSwic3ViIjoidXN (truncated)...]
2025-11-15T19:13:33.120+07:00 DEBUG 3864 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-15T19:13:33.154+07:00 DEBUG 3864 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/public/books/newest
2025-11-15T19:13:33.158+07:00 DEBUG 3864 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/public/books/newest
2025-11-15T19:13:33.179+07:00 DEBUG 3864 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T19:13:33.204+07:00 DEBUG 3864 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/public/books/newest
2025-11-15T19:13:33.204+07:00 DEBUG 3864 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/public/books/newest", parameters={}
2025-11-15T19:13:33.209+07:00 DEBUG 3864 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.PublicBooksController#getNewestBooks()
2025-11-15T19:13:33.216+07:00  WARN 3864 --- [http-nio-8080-exec-6] org.hibernate.orm.query                  : HHH90003004: firstResult/maxResults specified with collection fetch; applying in memory
2025-11-15T19:13:33.223+07:00 DEBUG 3864 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : select b1_0.id,a1_0.book_id,a1_1.id,a1_1.name,c1_0.book_id,c1_1.id,c1_1.name,b1_0.cover_url,b1_0.isbn,b1_0.name,b1_0.number_of_copies_available,b1_0.published_year from books b1_0 left join book_authors a1_0 on b1_0.id=a1_0.book_id left join authors a1_1 on a1_1.id=a1_0.author_id left join book_categories c1_0 on b1_0.id=c1_0.book_id left join categories c1_1 on c1_1.id=c1_0.category_id order by b1_0.id desc
2025-11-15T19:13:33.275+07:00 DEBUG 3864 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T19:13:33.278+07:00 DEBUG 3864 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [[com.ibizabroker.lms.entity.Books@1178d4d3, com.ibizabroker.lms.entity.Books@6994edd4, com.ibizabrok (truncated)...]
2025-11-15T19:13:33.284+07:00 DEBUG 3864 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-15T19:13:49.077+07:00 DEBUG 3864 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/user/chat
2025-11-15T19:13:49.224+07:00 DEBUG 3864 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/user/chat
2025-11-15T19:13:49.280+07:00 DEBUG 3864 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : select distinct u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,r1_0.user_id,r1_1.role_id,r1_1.role_name,u1_0.username from users u1_0 left join user_role r1_0 on u1_0.user_id=r1_0.user_id left join role r1_1 on r1_1.role_id=r1_0.role_id where lower(u1_0.username)=lower(?)
2025-11-15T19:13:49.377+07:00 DEBUG 3864 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/user/chat
2025-11-15T19:13:49.385+07:00 DEBUG 3864 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : POST "/api/user/chat", parameters={}
2025-11-15T19:13:49.409+07:00 DEBUG 3864 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.ibizabroker.lms.controller.ChatbotController#ask(ChatRequestDto)
2025-11-15T19:13:49.426+07:00 DEBUG 3864 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [com.ibizabroker.lms.dto.ChatRequestDto@5bf49a6f]
2025-11-15T19:13:49.455+07:00 DEBUG 3864 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public reactor.core.publisher.Mono com.ibizabroker.lms.controller.ChatbotController.ask(com.ibizabroker.lms.dto.ChatRequestDto); target is of class [com.ibizabroker.lms.controller.ChatbotController]
2025-11-15T19:13:49.475+07:00 DEBUG 3864 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public reactor.core.publisher.Mono com.ibizabroker.lms.controller.ChatbotController.ask(com.ibizabroker.lms.dto.ChatRequestDto); target is of class [com.ibizabroker.lms.controller.ChatbotController]
2025-11-15T19:13:49.489+07:00 DEBUG 3864 --- [http-nio-8080-exec-7] o.s.w.c.request.async.WebAsyncManager    : Started async request for "/api/user/chat"
2025-11-15T19:13:49.504+07:00 DEBUG 3864 --- [http-nio-8080-exec-7] o.s.w.c.request.async.WebAsyncManager    : Async result set for "/api/user/chat"
2025-11-15T19:13:49.516+07:00 DEBUG 3864 --- [http-nio-8080-exec-7] o.s.w.c.request.async.WebAsyncManager    : Performing async dispatch for "/api/user/chat"
2025-11-15T19:13:49.524+07:00 DEBUG 3864 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Exiting but response remains open for further handling
2025-11-15T19:13:49.539+07:00 DEBUG 3864 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/user/chat
2025-11-15T19:13:49.549+07:00 DEBUG 3864 --- [http-nio-8080-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-15T19:13:49.569+07:00 DEBUG 3864 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /error
2025-11-15T19:13:49.574+07:00 DEBUG 3864 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /error
2025-11-15T19:13:49.585+07:00 DEBUG 3864 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for POST "/error", parameters={}
2025-11-15T19:13:49.604+07:00 DEBUG 3864 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-11-15T19:13:49.619+07:00 DEBUG 3864 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-15T19:13:49.631+07:00 DEBUG 3864 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Sat Nov 15 19:13:49 ICT 2025, status=401, error=Unauthorized, path=/api/user/chat}]
2025-11-15T19:13:49.652+07:00 DEBUG 3864 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 401
2025-11-15T19:13:49.664+07:00 DEBUG 3864 --- [http-nio-8080-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-11-15T19:13:49.685+07:00 DEBUG 3864 --- [http-nio-8080-exec-7] o.s.w.c.request.async.WebAsyncManager    : Servlet container error notification for "/api/user/chat"
2025-11-15T19:44:43.702+07:00  INFO 3864 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-11-15T19:44:43.739+07:00  INFO 3864 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-11-15T19:44:45.889+07:00  INFO 3864 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-15T19:44:45.892+07:00  INFO 3864 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-15T19:44:45.896+07:00  INFO 3864 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-15T20:22:35.507+07:00  INFO 3396 --- [main] c.ibizabroker.lms.LmsApplicationTests    : Starting LmsApplicationTests using Java 21.0.8 with PID 3396 (started by Admin in C:\Users\Admin\library-management-system\lms-backend)
2025-11-15T20:22:35.511+07:00 DEBUG 3396 --- [main] c.ibizabroker.lms.LmsApplicationTests    : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-15T20:22:35.513+07:00  INFO 3396 --- [main] c.ibizabroker.lms.LmsApplicationTests    : No active profile set, falling back to 1 default profile: "default"
2025-11-15T20:22:35.592+07:00 DEBUG 3396 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@3c443976
2025-11-15T20:22:37.563+07:00  INFO 3396 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-15T20:22:37.722+07:00  INFO 3396 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 128 ms. Found 9 JPA repository interfaces.
2025-11-15T20:22:38.970+07:00  INFO 3396 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-15T20:22:39.056+07:00  INFO 3396 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-15T20:22:39.128+07:00  INFO 3396 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-15T20:22:39.608+07:00  INFO 3396 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-15T20:22:39.707+07:00  INFO 3396 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-15T20:22:40.148+07:00  INFO 3396 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4aba7617
2025-11-15T20:22:40.148+07:00  INFO 3396 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-15T20:22:40.213+07:00  WARN 3396 --- [main] org.hibernate.dialect.Dialect            : HHH000511: The 5.5.5 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-11-15T20:22:40.226+07:00  WARN 3396 --- [main] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-15T20:22:40.288+07:00  INFO 3396 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 5.5.5
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-15T20:22:41.961+07:00  INFO 3396 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-15T20:22:42.234+07:00 DEBUG 3396 --- [main] org.hibernate.SQL                        : alter table loans modify column status enum ('ACTIVE','OVERDUE','RETURNED') not null
2025-11-15T20:22:42.254+07:00 DEBUG 3396 --- [main] org.hibernate.SQL                        : alter table reservations modify column status enum ('ACTIVE','CANCELLED','EXPIRED','FULFILLED') not null
2025-11-15T20:22:42.341+07:00  INFO 3396 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-15T20:22:43.028+07:00  INFO 3396 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-15T20:22:45.211+07:00  INFO 3396 --- [main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-11-15T20:22:45.211+07:00  WARN 3396 --- [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-11-15T20:22:46.022+07:00 DEBUG 3396 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 43 mappings in 'requestMappingHandlerMapping'
2025-11-15T20:22:46.242+07:00 DEBUG 3396 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-15T20:22:46.480+07:00  INFO 3396 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint beneath base path '/actuator'
2025-11-15T20:22:46.741+07:00 DEBUG 3396 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtRequestFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-11-15T20:22:47.097+07:00 DEBUG 3396 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-15T20:22:47.172+07:00 DEBUG 3396 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-15T20:22:47.544+07:00  INFO 3396 --- [main] c.ibizabroker.lms.LmsApplicationTests    : Started LmsApplicationTests in 12.595 seconds (process running for 14.484)
2025-11-15T20:22:47.845+07:00 DEBUG 3396 --- [main] org.hibernate.SQL                        : select r1_0.role_id,r1_0.role_name from role r1_0 where r1_0.role_name=?
2025-11-15T20:22:47.933+07:00 DEBUG 3396 --- [main] org.hibernate.SQL                        : select r1_0.role_id,r1_0.role_name from role r1_0 where r1_0.role_name=?
2025-11-15T20:22:47.948+07:00 DEBUG 3396 --- [main] org.hibernate.SQL                        : select u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,u1_0.username from users u1_0 where u1_0.username=?
2025-11-15T20:22:48.135+07:00 DEBUG 3396 --- [main] org.hibernate.SQL                        : insert into users (email,name,password,username) values (?,?,?,?)
2025-11-15T20:22:48.172+07:00 DEBUG 3396 --- [main] org.hibernate.SQL                        : insert into user_role (user_id,role_id) values (?,?)
2025-11-15T20:22:48.186+07:00 DEBUG 3396 --- [main] org.hibernate.SQL                        : select u1_0.user_id,u1_0.email,u1_0.name,u1_0.password,u1_0.username from users u1_0 where u1_0.username=?
2025-11-15T20:22:48.297+07:00 DEBUG 3396 --- [main] org.hibernate.SQL                        : insert into users (email,name,password,username) values (?,?,?,?)
2025-11-15T20:22:48.307+07:00 DEBUG 3396 --- [main] org.hibernate.SQL                        : insert into user_role (user_id,role_id) values (?,?)
2025-11-15T20:22:49.282+07:00 DEBUG 3396 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@3c443976, started on Sat Nov 15 20:22:35 ICT 2025
2025-11-15T20:22:49.301+07:00  INFO 3396 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-15T20:22:49.307+07:00  INFO 3396 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-15T20:22:49.321+07:00  INFO 3396 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
